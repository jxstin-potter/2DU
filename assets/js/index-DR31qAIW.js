const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Login-rS0bkvHg.js","assets/js/vendor-Ch348d4r.js","assets/js/utils-BdZxPcI9.js","assets/js/Settings-DdwE57Su.js","assets/js/Today-CvhK-mfP.js","assets/js/tasksService-BrK5NF1i.js","assets/js/TaskDetailModal-Q58joVWi.js","assets/js/TodayAddTaskButton-BLd31CcK.js","assets/js/Completed-8HIZbbDy.js","assets/js/Upcoming-CxcDTLXA.js","assets/css/Upcoming-Cnt6eCIC.css","assets/js/Tags-CNCuruxp.js","assets/js/Inbox-B9ELR3q_.js"])))=>i.map(i=>d[i]);
var Wt=Object.defineProperty,_t=Object.defineProperties;var Bt=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var Ye=Object.prototype.hasOwnProperty,Je=Object.prototype.propertyIsEnumerable;var Me=(a,r,t)=>r in a?Wt(a,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[r]=t,A=(a,r)=>{for(var t in r||(r={}))Ye.call(r,t)&&Me(a,t,r[t]);if(be)for(var t of be(r))Je.call(r,t)&&Me(a,t,r[t]);return a},G=(a,r)=>_t(a,Bt(r));var Ze=(a,r)=>{var t={};for(var n in a)Ye.call(a,n)&&r.indexOf(n)<0&&(t[n]=a[n]);if(a!=null&&be)for(var n of be(a))r.indexOf(n)<0&&Je.call(a,n)&&(t[n]=a[n]);return t};var et=(a,r,t)=>Me(a,typeof r!="symbol"?r+"":r,t);var C=(a,r,t)=>new Promise((n,s)=>{var c=p=>{try{u(t.next(p))}catch(g){s(g)}},i=p=>{try{u(t.throw(p))}catch(g){s(g)}},u=p=>p.done?n(p.value):Promise.resolve(p.value).then(c,i);u((t=t.apply(a,r)).next())});import{h as I,i as Ht,j as Vt,k as Ut,l as $t,m as Nt,r as o,s as Kt,n as te,o as tt,p as Ae,q as Gt,t as qt,u as Qt,v as Xt,E as Yt,w as Jt,G as Zt,x as at,y as rt,O as ea,z as ta,A as e,B as aa,C as ra,D as oa,F as sa,H as y,S as na,I as mt,J as ia,T as w,K as q,P as la,L as ca,M as da,N as ot,Q as Oe,R as Le,U as gt,V as he,W as We,X as ua,Y as pa,Z as ha,$ as ma,a0 as ga,a1 as de,a2 as xa,a3 as Y,a4 as ee,a5 as ya,a6 as xt,a7 as pe,a8 as Re,a9 as fa,aa as yt,ab as ba,ac as st,ad as De,ae as ft,af as Q,ag as wa,ah as ka,ai as ve,aj as bt,ak as wt,al as Ce,am as _e,an as va,ao as Ca,ap as ja,aq as Sa,ar as kt,as as Ia,at as Ea,au as ue,av as ze,aw as nt,ax as it,ay as Pa,az as Ta,aA as Ma,aB as Aa,aC as Da,aD as Fa,aE as La,aF as Ra,aG as za,aH as Oa,aI as Ie,aJ as Wa,aK as _a,aL as vt,aM as Ct,aN as jt,aO as St,aP as Ba,aQ as Ha,aR as Va,aS as Ua,aT as $a,aU as Na,aV as K,aW as Ka,aX as Ga}from"./vendor-Ch348d4r.js";import{p as Be,a4 as qa,a5 as Qa,a6 as Xa,a7 as Ya,a8 as Ja,a9 as Za,c as er,aa as tr,e as ar}from"./utils-BdZxPcI9.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const i of c.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(s){if(s.ep)return;s.ep=!0;const c=t(s);fetch(s.href,c)}})();const rr="modulepreload",or=function(a){return"/2DU/"+a},lt={},ne=function(r,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),u=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(t.map(p=>{if(p=or(p),p in lt)return;lt[p]=!0;const g=p.endsWith(".css"),h=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${h}`))return;const d=document.createElement("link");if(d.rel=g?"stylesheet":rr,g||(d.as="script"),d.crossOrigin="",d.href=p,u&&d.setAttribute("nonce",u),document.head.appendChild(d),g)return new Promise((m,j)=>{d.addEventListener("load",m),d.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(i){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=i,window.dispatchEvent(u),!u.defaultPrevented)throw i}return s.then(i=>{for(const u of i||[])u.status==="rejected"&&c(u.reason);return r().catch(c)})},ct="#5B7A9E",sr="#6A8AA8",nr="#4A6582",ir="#7B9BB8",S={brand:{black:"#0F1419",blackElevated:"#161D26",gold:ct,goldHover:sr,goldActive:nr},primary:{main:ct,light:ir,contrastText:"#F5F5F5"},secondary:{main:"#8B9AAF",contrastText:"#0F1419"},success:{main:"#4A9B6D",light:"#6BB88A",dark:"#3A7A55"},warning:{main:"#B8954A",light:"#D4B56A",dark:"#947538"},error:{main:"#B85C5C",light:"#D47B7B",dark:"#944848"}},lr=a=>{const t={palette:{mode:"dark",primary:{main:S.primary.main,dark:S.brand.goldActive,light:S.primary.light,contrastText:S.primary.contrastText},secondary:{main:S.secondary.main,contrastText:S.secondary.contrastText},background:{default:S.brand.black,paper:S.brand.blackElevated},text:{primary:"#F5F5F5",secondary:"rgba(245, 245, 245, 0.72)"},divider:"rgba(245, 245, 245, 0.12)",error:{main:S.error.main,light:S.error.light,dark:S.error.dark},success:{main:S.success.main,light:S.success.light,dark:S.success.dark},warning:{main:S.warning.main,light:S.warning.light,dark:S.warning.dark},action:{hover:I(S.primary.main,.08),selected:I(S.primary.main,.12),focus:I(S.primary.main,.14),disabled:"rgba(245, 245, 245, 0.28)",disabledBackground:"rgba(245, 245, 245, 0.08)"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},components:{MuiCssBaseline:{styleOverrides:{body:{scrollbarColor:`rgba(245,245,245,0.28) ${S.brand.black}`,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:S.brand.black},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:"rgba(245,245,245,0.18)",minHeight:24,border:`3px solid ${S.brand.black}`},"&::-webkit-scrollbar-thumb:focus, & *::-webkit-scrollbar-thumb:focus":{backgroundColor:"rgba(245,245,245,0.28)"},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:"rgba(245,245,245,0.28)"},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:"rgba(245,245,245,0.22)"},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{backgroundColor:S.brand.black}}}},MuiButton:{styleOverrides:{contained:{backgroundColor:S.brand.gold,color:S.primary.contrastText,"&:hover":{backgroundColor:S.brand.goldHover},"&:active":{backgroundColor:S.brand.goldActive}},outlined:{borderColor:"rgba(245,245,245,0.18)",color:"#F5F5F5","&:hover":{borderColor:I(S.brand.gold,.5),backgroundColor:I(S.brand.gold,.08)}}}},MuiLink:{styleOverrides:{root:{color:S.primary.main,"&:hover":{color:S.brand.goldHover}}}},MuiCheckbox:{styleOverrides:{root:{color:"rgba(245,245,245,0.42)","&.Mui-checked":{color:S.primary.main}}}},MuiOutlinedInput:{styleOverrides:{root:{"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:S.primary.main}},notchedOutline:{borderColor:"rgba(245,245,245,0.18)"}}},MuiTab:{styleOverrides:{root:{textTransform:"none"}}},MuiTabs:{styleOverrides:{indicator:{backgroundColor:S.primary.main}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}};return Ht(t)},oe={apiKey:"AIzaSyBnQUqYLVesyv6FgmhizP7lUQxXe7Fwpbg",authDomain:"du-app-ff4ae.firebaseapp.com",projectId:"du-app-ff4ae",storageBucket:"du-app-ff4ae.appspot.com",messagingSenderId:"300312760528",appId:"1:300312760528:web:87b3c9da666ee2fd4fced5",measurementId:"G-L85WDEM9JH"},He={apiKey:oe.apiKey,authDomain:oe.authDomain,projectId:oe.projectId,storageBucket:oe.storageBucket,messagingSenderId:oe.messagingSenderId,appId:oe.appId};He.measurementId=oe.measurementId;const cr=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],dt=cr.filter(a=>!He[a]);if(dt.length>0)throw new Error(`Missing required Firebase configuration fields: ${dt.join(", ")}`);let Fe,_,V,ut=!1;try{Fe=Vt(He),_=Ut(Fe),V=$t(Fe)}catch(a){throw new Error(`Failed to initialize Firebase: ${a instanceof Error?a.message:"Unknown error"}`)}const dr=()=>C(void 0,null,function*(){if(!ut)try{yield Nt(_),ut=!0}catch(a){if(a.code!=="failed-precondition"&&a.code!=="unimplemented")throw a}}),we=(a,r,t={},n)=>{new Date().toISOString(),Object.entries(t).filter(([s,c])=>c!==void 0).map(([s,c])=>`[${s}:${c}]`).join(" ")},L={debug:(a,r={},t)=>we("DEBUG",a,r),info:(a,r={},t)=>we("INFO",a,r),warn:(a,r={},t)=>we("WARN",a,r),error:(a,r={},t)=>we("ERROR",a,r),component:a=>({debug:(r,t)=>L.debug(r,{component:a},t),info:(r,t)=>L.info(r,{component:a},t),warn:(r,t)=>L.warn(r,{component:a},t),error:(r,t)=>L.error(r,{component:a},t)}),service:a=>({debug:(r,t)=>L.debug(r,{service:a},t),info:(r,t)=>L.info(r,{service:a},t),warn:(r,t)=>L.warn(r,{service:a},t),error:(r,t)=>L.error(r,{service:a},t)}),hook:a=>({debug:(r,t)=>L.debug(r,{hook:a},t),info:(r,t)=>L.info(r,{hook:a},t),warn:(r,t)=>L.warn(r,{hook:a},t),error:(r,t)=>L.error(r,{hook:a},t)})},ce=a=>a.trim().toLowerCase(),ke=(a,r)=>{switch(a==null?void 0:a.code){case"auth/invalid-email":return new Error("Please enter a valid email address.");case"auth/user-disabled":return new Error("This account has been disabled.");case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return new Error("Invalid email or password.");case"auth/too-many-requests":return new Error("Too many attempts. Please try again later.");case"auth/network-request-failed":return new Error("Network error. Check your connection and try again.");case"auth/operation-not-allowed":return new Error("Email/password sign-in is not enabled for this project.");case"auth/account-exists-with-different-credential":return new Error("This email is linked to a different sign-in method (e.g. Google). Use that method or reset your password if applicable.");case"auth/requires-recent-login":return new Error("For security, please sign in again and retry this action.");case"auth/weak-password":return new Error("Password is too weak. Use at least 6 characters.");default:return a instanceof Error?a:new Error(r)}},It=o.createContext({user:null,loading:!0,login:()=>C(void 0,null,function*(){}),signup:()=>C(void 0,null,function*(){}),loginWithGoogle:()=>C(void 0,null,function*(){return"cancelled"}),loginWithApple:()=>C(void 0,null,function*(){return"cancelled"}),logout:()=>C(void 0,null,function*(){}),updateUserProfile:()=>C(void 0,null,function*(){}),requestPasswordReset:()=>C(void 0,null,function*(){}),addPassword:()=>C(void 0,null,function*(){}),authProviders:[],hasPasswordProvider:!1}),Ve=()=>o.useContext(It),ur=({children:a})=>{const[r,t]=o.useState(null),[n,s]=o.useState(null),[c,i]=o.useState(!0),[u,p]=o.useState(!1),g=o.useCallback(b=>C(void 0,null,function*(){yield Kt(V,b?oa:sa)}),[]),h=o.useCallback(b=>C(void 0,null,function*(){const x=te(_,"users",b.uid);if((yield tt(x)).exists())return;const f={email:ce(b.email||""),name:b.displayName||"",profilePicture:b.photoURL||void 0,preferences:{theme:"dark",highContrast:!1,notifications:!0,defaultView:"today"}};yield Ae(x,f,{merge:!0})}),[]),d=b=>C(void 0,null,function*(){try{const x=te(_,"users",b.uid),l=yield tt(x);if(l.exists()){const f=l.data();return A({id:b.uid},f)}else return{id:b.uid,email:b.email||"",name:b.displayName||"",preferences:{theme:"dark",highContrast:!1,notifications:!0,defaultView:"today"}}}catch(x){throw L.error("Error fetching user data",{action:"fetchUserData"},x),x}});o.useEffect(()=>{let b;return C(void 0,null,function*(){try{try{yield dr()}catch(l){}b=aa(V,l=>C(void 0,null,function*(){i(!0);try{if(l){s(l);try{yield ra(V)}catch(f){}yield new Promise(f=>setTimeout(f,1e3));try{yield h(l);const f=yield d(l);t(f)}catch(f){const P={id:l.uid,email:l.email||"",name:l.displayName||"",profilePicture:l.photoURL||void 0,preferences:{theme:"dark",highContrast:!1,notifications:!0,defaultView:"today"}};t(P)}}else s(null),t(null)}catch(f){l||(s(null),t(null))}finally{i(!1),p(!0)}}))}catch(l){p(!0),i(!1)}}),()=>{b&&b()}},[h]);const m=o.useCallback((b,x,l=!0)=>C(void 0,null,function*(){try{i(!0),yield g(l),yield Gt(V,ce(b),x)}catch(f){throw ke(f,"Failed to sign in. Please try again.")}finally{i(!1)}}),[g]),j=o.useCallback((b,x,l,f=!0)=>C(void 0,null,function*(){try{i(!0),yield g(f);const P=ce(b),F=(yield qt(V,P,x)).user,$={email:P,name:l.trim(),preferences:{theme:"dark",highContrast:!1,notifications:!0,defaultView:"today"}};yield Ae(te(_,"users",F.uid),$)}catch(P){throw ke(P,"Failed to create account.")}finally{i(!1)}}),[g]),M=o.useCallback(b=>C(void 0,null,function*(){try{i(!0),yield Qt(V,ce(b))}catch(x){if((x==null?void 0:x.code)==="auth/user-not-found")return;throw ke(x,"Failed to send password reset email.")}finally{i(!1)}}),[]),E=o.useMemo(()=>{const b=((n==null?void 0:n.providerData)||[]).map(x=>x==null?void 0:x.providerId).filter(x=>!!x);return Array.from(new Set(b))},[n==null?void 0:n.providerData]),k=E.includes("password"),T=o.useCallback(b=>C(void 0,null,function*(){var f;const x=V.currentUser;if(!x)throw new Error("You must be signed in to add a password.");const l=x.email?ce(x.email):"";if(!l)throw new Error("No email found for your account.");try{if(i(!0),(f=x.providerData)!=null&&f.some(U=>U.providerId==="password")){yield Xt(x,b);return}const P=Yt.credential(l,b);yield Jt(x,P)}catch(P){throw ke(P,"Failed to add password.")}finally{i(!1)}}),[]),B=o.useCallback((b=!0)=>C(void 0,null,function*(){try{i(!0),yield g(b);const x=new Zt;x.setCustomParameters({prompt:"select_account"});try{const l=yield at(V,x);return yield h(l.user),"success"}catch(l){if((l==null?void 0:l.code)==="auth/popup-closed-by-user"||(l==null?void 0:l.code)==="auth/cancelled-popup-request")return"cancelled";if((l==null?void 0:l.code)==="auth/popup-blocked")return yield rt(V,x),"redirect";throw l}}catch(x){throw new Error("Google sign-in failed. Please try again.")}finally{i(!1)}}),[g,h]),O=o.useCallback((b=!0)=>C(void 0,null,function*(){try{i(!0),yield g(b);const x=new ea("apple.com");x.addScope("email"),x.addScope("name");try{const l=yield at(V,x);return yield h(l.user),"success"}catch(l){if((l==null?void 0:l.code)==="auth/popup-closed-by-user"||(l==null?void 0:l.code)==="auth/cancelled-popup-request")return"cancelled";if((l==null?void 0:l.code)==="auth/popup-blocked")return yield rt(V,x),"redirect";throw(l==null?void 0:l.code)==="auth/operation-not-allowed"?new Error("Apple sign-in is not enabled for this project yet."):l}}catch(x){throw x instanceof Error?x:new Error("Apple sign-in failed. Please try again.")}finally{i(!1)}}),[g,h]),W=o.useCallback(()=>C(void 0,null,function*(){try{yield ta(V)}catch(b){throw new Error("Failed to log out")}}),[]),R=o.useCallback(b=>C(void 0,null,function*(){if(!(n!=null&&n.uid))return;const x=te(_,"users",n.uid);yield Ae(x,b,{merge:!0});const l=yield d(n);t(l)}),[n]),D=o.useMemo(()=>({user:r,loading:c,login:m,signup:j,loginWithGoogle:B,loginWithApple:O,logout:W,updateUserProfile:R,requestPasswordReset:M,addPassword:T,authProviders:E,hasPasswordProvider:k}),[r,c,m,j,B,O,W,R,M,T,E,k]);return u?e.jsx(It.Provider,{value:D,children:a}):e.jsx("div",{children:"Initializing authentication..."})},ho=[{code:"en",name:"English"},{code:"es",name:"Español"},{code:"fr",name:"Français"},{code:"de",name:"Deutsch"},{code:"ja",name:"日本語"},{code:"zh",name:"中文"}],Ue="en",$e={en:er,es:Za,fr:Ja,de:Ya,ja:Xa,zh:Qa},je={en:{"app.name":"2DU Task Management","app.description":"A simple and efficient task management application","app.loading":"Loading...","app.error":"An error occurred","app.retry":"Retry","app.cancel":"Cancel","app.save":"Save","app.delete":"Delete","app.edit":"Edit","app.create":"Create","app.search":"Search","app.filter":"Filter","app.sort":"Sort","app.clear":"Clear","app.confirm":"Confirm","app.close":"Close","settings.title":"Settings","settings.description":"Configure your application preferences","settings.tabsLabel":"Settings sections","settings.tabs.accessibility":"Accessibility","settings.tabs.language":"Language","settings.language":"Language","settings.language.select":"Select Language","settings.language.note":"Changes will take effect immediately","settings.accessibility":"Accessibility","settings.accessibility.description":"Configure accessibility settings to improve your experience","settings.accessibility.highContrast":"High Contrast Mode","settings.accessibility.highContrastDescription":"Increase contrast for better visibility","settings.accessibility.reducedMotion":"Reduced Motion","settings.accessibility.reducedMotionDescription":"Reduce animations and motion effects","settings.accessibility.fontSize":"Font Size","settings.accessibility.fontSizeDescription":"Adjust the size of text throughout the application","settings.accessibility.fontSize.increase":"Increase Font Size","settings.accessibility.fontSize.decrease":"Decrease Font Size","settings.accessibility.fontSize.reset":"Reset Font Size","settings.accessibility.focusVisible":"Focus Visibility","settings.accessibility.focusVisibleDescription":"Enhance the visibility of focused elements","settings.accessibility.screenReader":"Screen Reader Mode","settings.accessibility.screenReaderDescription":"Optimize the application for screen readers","settings.theme.toggle":"Toggle Theme","sidebar.inbox":"Inbox","sidebar.today":"Today","sidebar.upcoming":"Upcoming","sidebar.calendar":"Calendar","sidebar.tags":"Tags","sidebar.completed":"Completed","sidebar.analytics":"Analytics","sidebar.settings":"Settings","sidebar.welcome":"Welcome, {userName}","sidebar.user":"User","sidebar.helpResources":"Help & resources","sidebar.keyboardShortcuts":"Keyboard shortcuts","sidebar.logout":"Log out","sidebar.openProfileMenu":"Open profile menu","shortcuts.title":"Keyboard Shortcuts","auth.login":"Login","auth.signup":"Sign Up","auth.logout":"Logout","auth.email":"Email","auth.password":"Password","auth.confirmPassword":"Confirm Password","auth.forgotPassword":"Forgot Password?","auth.resetPassword":"Reset Password","auth.noAccount":"Don't have an account?","auth.haveAccount":"Already have an account?","auth.loginError":"Login failed. Please check your credentials.","auth.signupError":"Sign up failed. Please try again.","auth.passwordMismatch":"Passwords do not match.","auth.weakPassword":"Password is too weak.","auth.emailInUse":"Email is already in use.","auth.invalidEmail":"Invalid email address.","task.title":"Title","task.description":"Description","task.dueDate":"Due Date","task.priority":"Priority","task.status":"Status","task.tags":"Tags","task.addTag":"Add Tag","task.removeTag":"Remove Tag","task.create":"Create Task","task.edit":"Edit Task","task.delete":"Delete Task","task.complete":"Complete Task","task.uncomplete":"Uncomplete Task","task.reorder":"Reorder Tasks","task.filterByStatus":"Filter by Status","task.filterByTag":"Filter by Tag","task.sortByDueDate":"Sort by Due Date","task.search":"Search Tasks","task.noTasks":"No tasks found","task.loading":"Loading tasks...","task.error":"Error loading tasks","status.todo":"To Do","status.inProgress":"In Progress","status.completed":"Completed","priority.low":"Low","priority.medium":"Medium","priority.high":"High","view.today":"Today","view.upcoming":"Upcoming","view.calendar":"Calendar","view.tags":"Tags","view.completed":"Completed","a11y.menuButton":"Menu","a11y.addTaskButton":"Add Task","a11y.taskItem":"Task Item","a11y.taskComplete":"Mark task as complete","a11y.taskUncomplete":"Mark task as uncomplete","a11y.taskEdit":"Edit task","a11y.taskDelete":"Delete task","a11y.taskDrag":"Drag task to reorder","a11y.taskDrop":"Drop task to reorder","a11y.enable":"Enable","a11y.increaseFontSize":"Increase Font Size","a11y.decreaseFontSize":"Decrease Font Size","a11y.resetFontSize":"Reset Font Size","a11y.highContrast":"High Contrast","a11y.reducedMotion":"Reduced Motion","a11y.fontSize":"Font Size","a11y.focusVisible":"Focus Visible","a11y.screenReaderOnly":"Screen Reader Only","a11y.resetAllSettings":"Reset All Settings","error.somethingWentWrong":"Something went wrong","error.unexpectedError":"An unexpected error occurred","error.reloadPage":"Reload Page","error.tryAgain":"Try Again","error.pageLoadFailed":"Error loading page. Please refresh.","common.loading":"Loading...","error.defaultError":"An error occurred. Please try again.","task.dialog.titleRequired":"Title is required","task.dialog.description":"Description (optional)","task.dialog.taskTitle":"Task Title","common.cancel":"Cancel","common.save":"Save"},es:{"app.name":"2DU Gestión de Tareas","app.description":"Una aplicación simple y eficiente para la gestión de tareas","app.loading":"Cargando...","app.error":"Se produjo un error","app.retry":"Reintentar","app.cancel":"Cancelar","app.save":"Guardar","app.delete":"Eliminar","app.edit":"Editar","app.create":"Crear","app.search":"Buscar","app.filter":"Filtrar","app.sort":"Ordenar","app.clear":"Limpiar","app.confirm":"Confirmar","app.close":"Cerrar","sidebar.inbox":"Bandeja de entrada","sidebar.today":"Hoy","sidebar.upcoming":"Próximos","sidebar.calendar":"Calendario","sidebar.tags":"Etiquetas","sidebar.completed":"Completados","sidebar.settings":"Configuración","sidebar.welcome":"Bienvenido, {userName}","sidebar.user":"Usuario"}};let X=Ue;const pr=a=>{je[a]&&(X=a,localStorage.setItem("language",a))},pt=()=>X,Et=()=>{const a=localStorage.getItem("language");a&&je[a]?X=a:X=Ue},se=(a,r)=>{var n,s;const t=((n=je[X])==null?void 0:n[a])||((s=je[Ue])==null?void 0:s[a])||a;return r?Object.entries(r).reduce((c,[i,u])=>c.replace(`{${i}}`,u),t):t},hr=(a,r="PP")=>{const t=typeof a=="string"?Be(a):a;return ar(t,r,{locale:$e[X]})},mr=(a,r=new Date)=>{const t=typeof a=="string"?Be(a):a;return tr(t,r,{locale:$e[X]})},gr=(a,r=new Date)=>{const t=typeof a=="string"?Be(a):a;return qa(t,r,{locale:$e[X]})},xr=(a,r)=>new Intl.NumberFormat(X,r).format(a),yr=(a,r="USD")=>new Intl.NumberFormat(X,{style:"currency",currency:r}).format(a);Et();const Pt=o.createContext({language:"en",setLanguage:()=>{},t:a=>a,formatDate:a=>a.toString(),formatRelativeDate:a=>a.toString(),formatDistanceDate:a=>a.toString(),formatNumber:a=>a.toString(),formatCurrency:a=>a.toString()}),fr=({children:a})=>{const[r,t]=o.useState(pt());o.useEffect(()=>{Et();const c=pt();t(c)},[]);const n=o.useCallback(c=>{pr(c),t(c)},[]),s=o.useMemo(()=>({language:r,setLanguage:n,t:se,formatDate:hr,formatRelativeDate:mr,formatDistanceDate:gr,formatNumber:xr,formatCurrency:yr}),[r,n]);return e.jsx(Pt.Provider,{value:s,children:a})},Ne=()=>o.useContext(Pt),Tt=o.createContext({highContrast:!1,toggleHighContrast:()=>{},reducedMotion:!1,toggleReducedMotion:()=>{},fontSize:16,increaseFontSize:()=>{},decreaseFontSize:()=>{},resetFontSize:()=>{},focusVisible:!1,toggleFocusVisible:()=>{},screenReaderOnly:!1,toggleScreenReaderOnly:()=>{}}),br=({children:a})=>{const{t:r}=Ne(),[t,n]=o.useState(!1),[s,c]=o.useState(!1),[i,u]=o.useState(16),[p,g]=o.useState(!1),[h,d]=o.useState(!1),m=o.useCallback(l=>{l?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast")},[]),j=o.useCallback(()=>{n(l=>{const f=!l;return localStorage.setItem("highContrast",f.toString()),m(f),f})},[m]),M=o.useCallback(l=>{l?document.documentElement.classList.add("reduced-motion"):document.documentElement.classList.remove("reduced-motion")},[]),E=o.useCallback(()=>{c(l=>{const f=!l;return localStorage.setItem("reducedMotion",f.toString()),M(f),f})},[M]),k=o.useCallback(l=>{document.documentElement.style.setProperty("--base-font-size",`${l}px`)},[]),T=o.useCallback(()=>{u(l=>{const f=Math.min(l+2,24);return localStorage.setItem("fontSize",f.toString()),k(f),f})},[k]),B=o.useCallback(()=>{u(l=>{const f=Math.max(l-2,12);return localStorage.setItem("fontSize",f.toString()),k(f),f})},[k]),O=o.useCallback(()=>{u(16),localStorage.setItem("fontSize","16"),k(16)},[k]),W=o.useCallback(l=>{l?document.documentElement.classList.add("focus-visible"):document.documentElement.classList.remove("focus-visible")},[]),R=o.useCallback(()=>{g(l=>{const f=!l;return localStorage.setItem("focusVisible",f.toString()),W(f),f})},[W]),D=o.useCallback(l=>{l?document.documentElement.classList.add("screen-reader-only"):document.documentElement.classList.remove("screen-reader-only")},[]),b=o.useCallback(()=>{d(l=>{const f=!l;return localStorage.setItem("screenReaderOnly",f.toString()),D(f),f})},[D]);o.useEffect(()=>{const l=localStorage.getItem("highContrast")==="true",f=localStorage.getItem("reducedMotion")==="true",P=parseInt(localStorage.getItem("fontSize")||"16",10),U=localStorage.getItem("focusVisible")==="true",F=localStorage.getItem("screenReaderOnly")==="true";n(l),c(f),u(P),g(U),d(F),m(l),M(f),k(P),W(U),D(F)},[W,k,m,M,D]);const x=o.useMemo(()=>({highContrast:t,toggleHighContrast:j,reducedMotion:s,toggleReducedMotion:E,fontSize:i,increaseFontSize:T,decreaseFontSize:B,resetFontSize:O,focusVisible:p,toggleFocusVisible:R,screenReaderOnly:h,toggleScreenReaderOnly:b}),[t,j,s,E,i,T,B,O,p,R,h,b]);return e.jsx(Tt.Provider,{value:x,children:a})},mo=()=>o.useContext(Tt),wr=o.createContext(void 0),kr=({children:a})=>{const[r,t]=o.useState([]),n=o.useCallback(u=>{t(p=>p.filter(g=>g.id!==u))},[]),s=o.useCallback(u=>{const p=Math.random().toString(36).substring(2,9),g=G(A({},u),{id:p,timestamp:Date.now()});t(h=>[...h,g]),u.autoHideDuration!==0&&setTimeout(()=>{n(p)},u.autoHideDuration||6e3)},[n]),c=o.useCallback(()=>{t([])},[]),i=o.useMemo(()=>({showFeedback:s,hideFeedback:n,clearAllFeedback:c}),[s,n,c]);return o.useEffect(()=>()=>{},[i]),e.jsxs(wr.Provider,{value:i,children:[a,e.jsx(vr,{feedbacks:r,onClose:n})]})},vr=({feedbacks:a,onClose:r})=>{const t=a.reduce((s,c)=>(s[c.type]||(s[c.type]=[]),s[c.type].push(c),s),{}),n=Object.values(t).map(s=>s.slice().sort((c,i)=>i.timestamp-c.timestamp)[0]);return e.jsx(y,{sx:{position:"fixed",bottom:16,right:16,zIndex:9999,display:"flex",flexDirection:"column",gap:1},children:n.map(s=>e.jsx(na,{open:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{position:"relative",bottom:0,right:0},children:e.jsxs(mt,{severity:s.type,onClose:()=>r(s.id),sx:{width:"100%",minWidth:{xs:"auto",sm:300}},action:s.action&&e.jsx(q,{color:"inherit",size:"small",onClick:s.action.onClick,children:s.action.label}),children:[s.title&&e.jsx(ia,{children:s.title}),e.jsx(w,{variant:"body2",children:s.message})]})},s.id))})},Mt=o.createContext(void 0),Cr=({children:a})=>{const[r]=o.useState("dark"),t=o.useCallback(()=>{},[]),n=o.useMemo(()=>({mode:r,toggleColorMode:t}),[r,t]);return e.jsx(Mt.Provider,{value:n,children:a})},Se=()=>{const a=o.useContext(Mt);if(a===void 0)throw new Error("useTheme must be used within a ThemeProvider");return a},At=o.createContext(void 0),jr=({children:a})=>{const[r,t]=o.useState({isOpen:!1,activeInlineTaskId:null}),n=o.useCallback(()=>{t(u=>G(A({},u),{isOpen:!0,activeInlineTaskId:null}))},[]),s=o.useCallback(()=>{t(u=>G(A({},u),{isOpen:!1}))},[]),c=o.useCallback(u=>{t(p=>G(A({},p),{activeInlineTaskId:u}))},[]),i=o.useMemo(()=>({isOpen:r.isOpen,openModal:n,closeModal:s,activeInlineTaskId:r.activeInlineTaskId,setActiveInlineTaskId:c}),[r.isOpen,r.activeInlineTaskId,n,s,c]);return e.jsx(At.Provider,{value:i,children:a})},Sr=()=>{const a=o.useContext(At);if(a===void 0)throw new Error("useTaskModal must be used within a TaskModalProvider");return a},Dt="search-recently-viewed",Ke=8,Ir={"/today":{labelKey:"sidebar.today",icon:"today"},"/completed":{labelKey:"sidebar.completed",icon:"completed"},"/settings":{labelKey:"sidebar.settings",icon:"settings"}};function Er(){try{const a=localStorage.getItem(Dt);if(!a)return[];const r=JSON.parse(a);return Array.isArray(r)?r.slice(0,Ke):[]}catch(a){return[]}}function Pr(a){try{localStorage.setItem(Dt,JSON.stringify(a.slice(0,Ke)))}catch(r){}}const Ft=o.createContext(void 0),Tr=({children:a})=>{const[r,t]=o.useState(!1),[n,s]=o.useState(Er);o.useEffect(()=>{Pr(n)},[n]);const c=o.useCallback(()=>{t(!0)},[]),i=o.useCallback(()=>{t(!1)},[]),u=o.useCallback(g=>{const h=Ir[g];h&&s(d=>{const m={path:g,labelKey:h.labelKey,icon:h.icon},j=d.filter(M=>M.path!==g);return[m,...j].slice(0,Ke)})},[]),p=o.useMemo(()=>({isOpen:r,openModal:c,closeModal:i,recentViews:n,recordRecentView:u}),[r,c,i,n,u]);return e.jsx(Ft.Provider,{value:p,children:a})},Ge=()=>{const a=o.useContext(Ft);if(a===void 0)throw new Error("useSearchModal must be used within a SearchModalProvider");return a},qe=(a,r,t={},n="error")=>{const s=A({name:a.name,message:a.message,stack:a.stack},t);switch(n){case"error":L.error(r,s);break;case"warn":L.warn(r,s);break;case"info":L.info(r,s);break}},Mr=(a,r,t,n={})=>{qe(a,t,A({component:r},n))},go=(a,r,t,n={})=>{qe(a,t,A({service:r},n))},ae=(a,r,t,n={})=>{qe(a,t,A({hook:r},n))};class Ar extends o.Component{constructor(){super(...arguments);et(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){Mr(t,"ErrorBoundary","Component error",{componentStack:n.componentStack})}render(){var t;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs(la,{elevation:3,sx:{p:4,m:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(w,{variant:"h4",color:"error",gutterBottom:!0,children:se("error.somethingWentWrong")}),e.jsx(y,{sx:{my:2},children:e.jsx(w,{variant:"body1",children:((t=this.state.error)==null?void 0:t.message)||se("error.unexpectedError")})}),e.jsx(q,{variant:"contained",color:"primary",onClick:()=>window.location.reload(),children:se("error.reloadPage")})]}):this.props.children}}const Lt=({isLoading:a,error:r,children:t,loadingText:n=se("common.loading"),errorText:s=se("error.defaultError"),retryAction:c,variant:i="overlay",fullScreen:u=!1})=>{if(r){const p=typeof r=="string"?r:(r==null?void 0:r.message)||s;return e.jsx(y,{sx:{display:"flex",alignItems:"center",p:2,animation:"fadeIn 0.3s ease-out forwards"},children:e.jsx(mt,{severity:"error",action:c&&e.jsx(q,{color:"inherit",size:"small",onClick:c,startIcon:e.jsx(ca,{}),sx:{animation:"fadeIn 0.3s ease-out forwards"},children:se("error.tryAgain")}),children:e.jsx(w,{variant:"body1",children:p})})})}return a?i==="skeleton"?e.jsx(y,{sx:{animation:"slideIn 0.3s ease-out forwards",width:"100%"},children:[...Array(4)].map((p,g)=>e.jsx(da,{variant:"rectangular",height:60,sx:{mb:g<3?1:0,background:"linear-gradient(90deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1))",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:1}},g))}):i==="inline"?e.jsxs(y,{sx:{display:"flex",alignItems:"center",p:2,animation:"fadeIn 0.3s ease-out forwards"},children:[e.jsx(ot,{size:20,sx:{mr:2}}),e.jsx(w,{variant:"body2",children:n})]}):e.jsxs(y,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1e3,height:u?"100vh":"100%",animation:"fadeIn 0.3s ease-out forwards"},children:[e.jsx(ot,{size:40,sx:{mb:2}}),e.jsx(w,{variant:"body1",children:n})]}):e.jsx(e.Fragment,{children:t})},Dr=({children:a})=>{const{user:r,loading:t}=Ve(),n=Oe();return t?e.jsx(y,{sx:{position:"relative",minHeight:"100vh"},children:e.jsx(Lt,{isLoading:!0,fullScreen:!0,variant:"overlay",children:e.jsx(y,{})})}):r?e.jsx(e.Fragment,{children:a}):e.jsx(Le,{to:"/login",replace:!0,state:{from:n}})},Fr=t=>{var n=t,{isCollapsed:a=!1}=n,r=Ze(n,["isCollapsed"]);return e.jsx(gt,G(A({},r),{viewBox:"0 0 24 24",sx:{fontSize:"1.25rem"},children:a?e.jsxs("g",{children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("line",{x1:"7",y1:"7",x2:"17",y2:"7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"7",y1:"10",x2:"17",y2:"10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"7",y1:"16",x2:"17",y2:"16",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]}):e.jsxs("g",{children:[e.jsx("rect",{x:"3",y:"4",width:"7",height:"16",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("circle",{cx:"6.5",cy:"7.5",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"10.5",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"13.5",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"16.5",r:"1",fill:"currentColor"}),e.jsx("rect",{x:"12",y:"4",width:"9",height:"16",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("line",{x1:"14",y1:"7",x2:"19",y2:"7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"14",y1:"10",x2:"19",y2:"10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"14",y1:"13",x2:"19",y2:"13",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"14",y1:"16",x2:"19",y2:"16",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}))},Lr=a=>e.jsx(gt,G(A({},a),{viewBox:"0 0 24 24",children:e.jsx("path",{d:"M7 10l5 5 5-5",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"})})),Rr=({isCollapsed:a,onToggleCollapse:r,darkMode:t,toggleDarkMode:n,onLogout:s,userName:c,user:i,onOpenShortcutsHelp:u,onOpenSettings:p,isMobile:g=!1,mobileOpen:h=!1,onMobileClose:d})=>{const m=he(),j=We(),M=Oe(),{t:E}=Ne(),{openModal:k}=Sr(),{openModal:T}=Ge(),[B,O]=o.useState(null),[W,R]=o.useState(null),D=(i==null?void 0:i.name)||c||E("sidebar.user"),b=i==null?void 0:i.profilePicture,x=z=>{O(z.currentTarget)},l=()=>{O(null)},f=z=>{R(z.currentTarget)},P=()=>{R(null)},U=()=>{l(),p?p():j("/settings")},F=()=>{l(),s()},$=()=>{P(),u()},J=.75,H=[{text:E("sidebar.inbox"),icon:e.jsx(ua,{}),path:"/inbox"},{text:E("sidebar.today"),icon:e.jsx(pa,{}),path:"/today"},{text:E("sidebar.upcoming"),icon:e.jsx(ha,{}),path:"/upcoming"},{text:E("sidebar.tags"),icon:e.jsx(ma,{}),path:"/tags"},{text:E("sidebar.completed"),icon:e.jsx(ga,{}),path:"/completed"}],Z=o.useCallback((z,ge)=>{const re=M.pathname===z.path,xe=m.palette.mode==="dark"?I(m.palette.common.white,.1):I(m.palette.common.white,.7),le=m.palette.primary.main;return e.jsx(de,{button:!0,onClick:()=>j(z.path),sx:{minHeight:32,justifyContent:ge?"center":"initial",px:2,py:.5,borderRadius:1,mb:.25,backgroundColor:re?xe:"transparent",color:"text.primary","&:hover":{backgroundColor:re?xe:"action.hover"},"& .MuiListItemIcon-root":{color:re?le:"text.secondary",minWidth:36}},children:ge?e.jsx(xa,{title:z.text,placement:"right",children:e.jsx(Y,{sx:{minWidth:0,justifyContent:"center",color:re?le:"text.secondary","& svg":{fontSize:"1.25rem"}},children:z.icon})}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{sx:{minWidth:36,mr:J,justifyContent:"center",color:re?le:"text.secondary","& svg":{fontSize:"1.25rem"}},children:z.icon}),e.jsx(ee,{primary:z.text,primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.8125rem"}}})]})},z.path)},[M.pathname,j,m.palette.mode,m.palette.common.white,m.palette.primary.main]),N=g?!1:a,me=N?64:240,Te={width:g?0:me,flexShrink:0,"& .MuiDrawer-paper":{width:me,boxSizing:"border-box",backgroundColor:m.palette.background.default,color:m.palette.text.primary,transition:m.transitions.create(["width","transform"],{easing:m.transitions.easing.sharp,duration:m.transitions.duration.enteringScreen}),overflowX:"hidden",border:"none",outline:"none",boxShadow:g?m.shadows[8]:"none",willChange:"width"}};return e.jsxs(e.Fragment,{children:[e.jsxs(ya,{variant:g?"temporary":"permanent",open:g?h:!0,onClose:d,ModalProps:{keepMounted:!0},sx:Te,children:[e.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:N?"center":"space-between",p:1,px:1.5,minHeight:40,height:40},children:[N?null:e.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:.75,flex:1,minWidth:0},children:[e.jsx(xt,{src:b,alt:D,sx:{width:28,height:28,fontSize:"0.75rem",bgcolor:m.palette.primary.main},children:D.charAt(0).toUpperCase()}),e.jsx(w,{variant:"body2",sx:{fontSize:"0.8125rem",fontWeight:500,maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D}),e.jsx(pe,{onClick:x,"aria-label":E("sidebar.openProfileMenu"),size:"small",sx:{color:m.palette.text.primary,p:.25,ml:-.25,"&:hover":{backgroundColor:"action.hover"}},children:e.jsx(Lr,{sx:{fontSize:"1rem"}})})]}),e.jsx(pe,{onClick:g?d:r,"aria-label":N?"Open sidebar":"Close sidebar","aria-controls":"sidebar","aria-expanded":!N,sx:{ml:N?0:-.5,mr:N?0:-.5,color:m.palette.text.secondary,p:.5,"&:hover":{color:m.palette.primary.main,backgroundColor:m.palette.action.hover},transition:"all 0.2s ease"},children:e.jsx(Fr,{isCollapsed:N,sx:{fontSize:"1rem"}})})]}),!N&&e.jsxs(e.Fragment,{children:[e.jsxs(Re,{sx:{px:1,"& .MuiListItemIcon-root":{mr:J}},children:[e.jsxs(de,{button:!0,"data-add-task-trigger":!0,onClick:k,sx:{minHeight:32,justifyContent:"initial",px:2,py:.5,borderRadius:1,mb:.25,backgroundColor:"transparent",color:"text.primary","&:hover":{backgroundColor:"action.hover"},"& .MuiListItemIcon-root":{minWidth:36,color:"text.secondary"}},children:[e.jsx(Y,{sx:{minWidth:36,justifyContent:"center",color:"text.secondary","& svg":{fontSize:"1.25rem"}},children:e.jsx(y,{sx:{width:24,height:24,borderRadius:"50%",backgroundColor:m.palette.primary.main,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(fa,{sx:{fontSize:"1rem",color:"inherit"}})})}),e.jsx(ee,{primary:"Add task",primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.8125rem",color:"primary.main"}}})]}),e.jsxs(de,{button:!0,onClick:T,sx:{minHeight:32,justifyContent:"initial",px:2,py:.5,borderRadius:1,mb:.25,backgroundColor:"transparent",color:"text.primary","&:hover":{backgroundColor:"action.hover"},"& .MuiListItemIcon-root":{minWidth:36}},children:[e.jsx(Y,{sx:{minWidth:36,justifyContent:"center",color:"text.secondary","& svg":{fontSize:"1.25rem"}},children:e.jsx(yt,{})}),e.jsx(ee,{primary:"Search",primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.8125rem"}}})]}),H.map(z=>Z(z,!1))]}),e.jsx(y,{sx:{flexGrow:1}}),e.jsx(Re,{sx:{px:1,"& .MuiListItemIcon-root":{mr:J}},children:e.jsxs(de,{button:!0,onClick:f,sx:{minHeight:32,justifyContent:"initial",px:2,py:.5,borderRadius:1,mb:.25,color:"text.primary","&:hover":{backgroundColor:"action.hover"},"& .MuiListItemIcon-root":{color:"text.secondary",minWidth:36}},children:[e.jsx(Y,{sx:{minWidth:36,justifyContent:"center",color:"text.secondary","& svg":{fontSize:"1.25rem"}},children:e.jsx(ba,{})}),e.jsx(ee,{primary:E("sidebar.helpResources"),primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.8125rem"}}})]})})]})]}),e.jsxs(st,{anchorEl:B,open:!!B,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},disablePortal:!1,children:[e.jsxs(De,{onClick:U,children:[e.jsx(Y,{children:e.jsx(ft,{fontSize:"small"})}),e.jsx(ee,{primary:E("sidebar.settings")})]}),e.jsx(Q,{}),e.jsxs(De,{onClick:F,children:[e.jsx(Y,{children:e.jsx(wa,{fontSize:"small"})}),e.jsx(ee,{primary:E("sidebar.logout")})]})]}),e.jsx(st,{anchorEl:W,open:!!W,onClose:P,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},disablePortal:!1,children:e.jsxs(De,{onClick:$,children:[e.jsx(Y,{children:e.jsx(ka,{fontSize:"small"})}),e.jsx(ee,{primary:E("sidebar.keyboardShortcuts")})]})})]})},zr=({open:a,onClose:r})=>{const t=he(),n=[{title:"General",items:[{key:"Enter",description:"Open task view"},{key:"X",description:"Select task"},{key:"Ctrl A",description:"Select all tasks"},{key:"↑ or K",description:"Move focus up"},{key:"↓ or J",description:"Move focus down"},{key:"←",description:"Move focus to the left"},{key:"→",description:"Move focus to the right"},{key:"Esc",description:"Dismiss/cancel"},{key:"Z or Ctrl Z",description:"Undo"},{key:"Ctrl K",description:"Open Quick Find"},{key:"?",description:"Show keyboard shortcuts"},{key:"M",description:"Open/close sidebar"}]},{title:"Quick Add",items:[{key:"Q",description:"Add task"},{key:"⇧ Q",description:"Dictate tasks with Ramble"},{key:"#",description:"Pick project"},{key:"/",description:"Pick section"},{key:"+",description:"Add assignee"},{key:"@",description:"Add label"},{key:"P1, P2, P3, P4",description:"Set priority"},{key:"!",description:"Add reminder"}]},{title:"Navigate",items:[{key:"G then H or H",description:"Go to home"},{key:"G then T",description:"Go to Today"}]}],s=c=>{const i=c.split(" ");return e.jsx(y,{sx:{display:"flex",alignItems:"center",gap:.5},children:i.map((u,p)=>u==="↑"?e.jsx(va,{sx:{fontSize:"1rem"}},p):u==="↓"?e.jsx(Ca,{sx:{fontSize:"1rem"}},p):u==="←"?e.jsx(ja,{sx:{fontSize:"1rem"}},p):u==="→"?e.jsx(Sa,{sx:{fontSize:"1rem"}},p):u==="⇧"?e.jsx(w,{component:"span",sx:{fontSize:"0.75rem",fontWeight:500,fontFamily:"monospace"},children:"⇧"},p):u==="then"||u==="or"?e.jsx(w,{component:"span",variant:"body2",sx:{mx:.5,color:"text.secondary"},children:u},p):e.jsx(y,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",minWidth:"24px",height:"24px",px:1,py:.5,borderRadius:"4px",bgcolor:I(t.palette.text.primary,.08),fontFamily:"monospace",fontSize:"0.75rem",fontWeight:500,color:t.palette.text.primary},children:u},p))})};return e.jsxs(ve,{open:a,onClose:r,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,bgcolor:t.palette.background.paper,maxHeight:"80vh"}},children:[e.jsxs(bt,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pb:2},children:[e.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(w,{variant:"h6",component:"h2",fontWeight:"bold",children:"Keyboard Shortcuts"}),e.jsx(y,{sx:{width:20,height:20,borderRadius:"50%",bgcolor:I(t.palette.text.secondary,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(w,{variant:"caption",color:"text.secondary",children:"?"})})]}),e.jsx(pe,{onClick:r,size:"small",sx:{color:t.palette.text.secondary,"&:hover":{color:t.palette.text.primary}},children:e.jsx(wt,{})})]}),e.jsx(Ce,{sx:{px:3,pb:2,"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{bgcolor:"transparent"},"&::-webkit-scrollbar-thumb":{bgcolor:I(t.palette.text.secondary,.2),borderRadius:"4px","&:hover":{bgcolor:I(t.palette.text.secondary,.3)}}},children:n.map((c,i)=>e.jsxs(y,{sx:{mb:i<n.length-1?3:0},children:[e.jsx(w,{variant:"subtitle2",fontWeight:"bold",sx:{mb:2,color:t.palette.text.primary,fontSize:"0.875rem"},children:c.title}),e.jsx(y,{sx:{display:"flex",flexDirection:"column",gap:0},children:c.items.map((u,p)=>e.jsxs(_e.Fragment,{children:[e.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",py:1.5,px:0},children:[e.jsx(w,{variant:"body2",sx:{fontSize:"0.875rem",color:t.palette.text.primary},children:u.description}),s(u.key)]}),p<c.items.length-1&&e.jsx(Q,{sx:{my:0}})]},u.key))}),i<n.length-1&&e.jsx(Q,{sx:{mt:2,mb:0}})]},c.title))})]})};function Or(a,r,t){return new Promise((n,s)=>{const c=URL.createObjectURL(a),i=new Image;i.onload=()=>{URL.revokeObjectURL(c);const u=i.naturalWidth,p=i.naturalHeight;let g=u,h=p;(u>r||p>r)&&(u>p?(g=r,h=p*r/u):(h=r,g=u*r/p));const d=document.createElement("canvas");d.width=Math.round(g),d.height=Math.round(h);const m=d.getContext("2d");if(!m){s(new Error("Canvas not supported"));return}m.drawImage(i,0,0,d.width,d.height),n(d.toDataURL("image/jpeg",t))},i.onerror=()=>{URL.revokeObjectURL(c),s(new Error("Failed to load image"))},i.src=c})}const Wr=({open:a,onClose:r})=>{var Qe;const t=he(),n=kt(t.breakpoints.down("sm")),{user:s,updateUserProfile:c,addPassword:i,authProviders:u,hasPasswordProvider:p}=Ve(),{mode:g,toggleColorMode:h}=Se(),[d,m]=o.useState("account"),[j,M]=o.useState((s==null?void 0:s.name)||""),[E,k]=o.useState(null),[T,B]=o.useState(!1),O=o.useRef(null),[W,R]=o.useState(!1),[D,b]=o.useState(""),[x,l]=o.useState(""),[f,P]=o.useState(null),[U,F]=o.useState(null),[$,J]=o.useState(!1);_e.useEffect(()=>{M((s==null?void 0:s.name)||"")},[s==null?void 0:s.name]);const H=v=>{m(v)},Z=v=>{M(v.target.value)},N=()=>{const v=j.trim();v&&v!==(s==null?void 0:s.name)&&c({name:v})},me=()=>{var v;k(null),(v=O.current)==null||v.click()},Te=v=>C(void 0,null,function*(){var Xe;const ie=(Xe=v.target.files)==null?void 0:Xe[0];if(!ie||!(s!=null&&s.id))return;const Ot=4*1024*1024;if(ie.size>Ot){k("Photo must be 4MB or smaller."),v.target.value="";return}if(!ie.type.startsWith("image/")){k("Please select an image file."),v.target.value="";return}B(!0),k(null);try{const fe=yield Or(ie,256,.75);yield c({profilePicture:fe})}catch(fe){k(fe instanceof Error?fe.message:"Failed to process photo.")}finally{B(!1),v.target.value=""}}),z=()=>{c({profilePicture:""})},ge=()=>{},re=()=>{P(null),F(null),b(""),l(""),R(!0)},xe=()=>C(void 0,null,function*(){if(P(null),F(null),D.length<6){P("Password must be at least 6 characters long.");return}if(D!==x){P("Passwords do not match.");return}J(!0);try{yield i(D),R(!1),F(p?"Password updated.":"Password added. You can now sign in with email & password.")}catch(v){P(v instanceof Error?v.message:"Failed to add password.")}finally{J(!1)}}),le=v=>{switch(v){case"google.com":return"Google";case"apple.com":return"Apple";case"password":return"Email / Password";default:return v}},zt=()=>{},ye=[{id:"account",label:"Account",icon:e.jsx(Ta,{})},{id:"general",label:"General",icon:e.jsx(ft,{})}];return e.jsxs(ve,{open:a,onClose:r,maxWidth:"lg",fullWidth:!0,fullScreen:n,PaperProps:{sx:{maxWidth:n?"100%":"900px",height:n?"100%":"80vh",maxHeight:n?"100%":"700px",borderRadius:n?0:2,overflow:"hidden"}},children:[e.jsxs(Ce,{sx:{p:0,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:`1px solid ${t.palette.divider}`},children:[e.jsx(w,{variant:"h6",fontWeight:"bold",children:"Settings"}),e.jsx(pe,{onClick:r,size:"small",children:e.jsx(wt,{})})]}),n&&e.jsx(Ia,{value:ye.findIndex(v=>v.id===d),onChange:(v,ie)=>H(ye[ie].id),variant:"fullWidth",sx:{borderBottom:`1px solid ${t.palette.divider}`},children:ye.map(v=>e.jsx(Ea,{label:v.label,icon:v.icon,iconPosition:"start",sx:{minHeight:48,textTransform:"none"}},v.id))}),e.jsxs(y,{sx:{display:"flex",flex:1,overflow:"hidden"},children:[!n&&e.jsxs(y,{sx:{width:240,borderRight:`1px solid ${t.palette.divider}`,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx(y,{sx:{p:2,borderBottom:`1px solid ${t.palette.divider}`},children:e.jsx(ue,{placeholder:"Search",size:"small",fullWidth:!0,InputProps:{startAdornment:e.jsx(ze,{position:"start",children:e.jsx(yt,{fontSize:"small"})})},sx:{"& .MuiOutlinedInput-root":{backgroundColor:I(t.palette.action.hover,.3)}}})}),e.jsx(Re,{sx:{flex:1,overflow:"auto",py:1},children:ye.map(v=>e.jsxs(de,{button:!0,onClick:()=>H(v.id),selected:d===v.id,sx:{minHeight:48,px:2,"&.Mui-selected":{backgroundColor:I(t.palette.primary.main,.1),color:t.palette.primary.main,"&:hover":{backgroundColor:I(t.palette.primary.main,.15)},"& .MuiListItemIcon-root":{color:t.palette.primary.main}},"&:hover":{backgroundColor:t.palette.action.hover}},children:[e.jsx(Y,{sx:{minWidth:40},children:v.icon}),e.jsx(ee,{primary:v.label,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:d===v.id?500:400}})]},v.id))})]}),e.jsxs(y,{sx:{flex:1,overflow:"auto",p:3},children:[d==="account"&&e.jsxs(y,{children:[e.jsx(w,{variant:"h6",fontWeight:"bold",sx:{mb:3},children:"Account"}),e.jsxs(y,{sx:{mb:4},children:[e.jsx(y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Plan"})}),e.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(w,{variant:"body1",children:"Beginner"}),e.jsx(q,{variant:"outlined",size:"small",onClick:zt,sx:{textTransform:"none",borderColor:t.palette.divider,color:t.palette.text.primary,"&:hover":{borderColor:t.palette.text.secondary,backgroundColor:t.palette.action.hover}},children:"Manage plan"})]})]}),e.jsx(Q,{sx:{mb:4}}),e.jsxs(y,{sx:{mb:4},children:[e.jsx("input",{ref:O,type:"file",accept:"image/*",onChange:Te,style:{display:"none"},"aria-hidden":"true"}),e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1.5},children:"Photo"}),e.jsxs(y,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[e.jsx(xt,{src:(s==null?void 0:s.profilePicture)||void 0,alt:(s==null?void 0:s.name)||"User",sx:{width:64,height:64,fontSize:"1.5rem",bgcolor:t.palette.primary.main},children:((Qe=s==null?void 0:s.name)==null?void 0:Qe.charAt(0).toUpperCase())||"U"}),e.jsxs(y,{sx:{display:"flex",gap:1},children:[e.jsx(q,{variant:"outlined",size:"small",onClick:me,disabled:T,sx:{textTransform:"none",borderColor:t.palette.divider,color:t.palette.text.primary,"&:hover":{borderColor:t.palette.text.secondary,backgroundColor:t.palette.action.hover}},children:T?"Uploading…":"Change photo"}),e.jsx(q,{variant:"outlined",size:"small",onClick:z,sx:{textTransform:"none",borderColor:t.palette.error.main,color:t.palette.error.main,"&:hover":{borderColor:t.palette.error.dark,backgroundColor:I(t.palette.error.main,.1)}},children:"Remove photo"})]})]}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"Pick a photo up to 4MB."}),E&&e.jsx(w,{variant:"caption",color:"error",display:"block",sx:{mt:.5},children:E}),e.jsx(w,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:.5},children:"Your avatar photo will be public."})]}),e.jsx(Q,{sx:{mb:4}}),e.jsxs(y,{sx:{mb:4},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Name"}),e.jsx(ue,{fullWidth:!0,value:j,onChange:Z,onBlur:N,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{backgroundColor:t.palette.background.paper}}}),e.jsxs(w,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[j.length,"/255"]})]}),e.jsx(Q,{sx:{mb:4}}),e.jsxs(y,{sx:{mb:4},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Email"}),e.jsx(w,{variant:"body1",sx:{mb:1.5},children:(s==null?void 0:s.email)||"No email"}),e.jsx(q,{variant:"outlined",size:"small",onClick:ge,sx:{textTransform:"none",borderColor:t.palette.divider,color:t.palette.text.primary,"&:hover":{borderColor:t.palette.text.secondary,backgroundColor:t.palette.action.hover}},children:"Change email"})]}),e.jsx(Q,{sx:{mb:4}}),e.jsxs(y,{sx:{mb:4},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Password"}),e.jsx(w,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1.25},children:p?"Password is set for your account.":"No password yet. Add one to sign in without Google."}),U&&e.jsx(w,{variant:"caption",color:"success.main",sx:{display:"block",mb:1},children:U}),e.jsx(q,{variant:"outlined",size:"small",onClick:re,sx:{textTransform:"none",borderColor:t.palette.divider,color:t.palette.text.primary,"&:hover":{borderColor:t.palette.text.secondary,backgroundColor:t.palette.action.hover}},children:p?"Change password":"Add password"})]}),e.jsx(Q,{sx:{mb:4}}),e.jsxs(y,{sx:{mb:4},children:[e.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(w,{variant:"body2",color:"text.secondary",children:"Two-factor authentication"}),e.jsx(nt,{control:e.jsx(it,{checked:!1,onChange:()=>{},size:"small"}),label:""})]}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"2FA is disabled on your account."})]}),e.jsx(Q,{sx:{mb:4}}),e.jsxs(y,{children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Connected accounts"}),u.length===0?e.jsx(w,{variant:"body2",color:"text.secondary",children:"No connected accounts"}):e.jsx(y,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:u.map(v=>e.jsx(y,{sx:{px:1.25,py:.5,borderRadius:999,border:`1px solid ${t.palette.divider}`,fontSize:"0.8125rem",color:"text.secondary"},children:le(v)},v))})]})]}),d==="general"&&e.jsxs(y,{children:[e.jsx(w,{variant:"h6",fontWeight:"bold",sx:{mb:3},children:"General"}),e.jsxs(y,{sx:{mb:4},children:[e.jsxs(y,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsxs(y,{children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Theme"}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"Choose between light and dark mode"})]}),e.jsx(nt,{control:e.jsx(it,{checked:g==="dark",onChange:h,size:"small"}),label:""})]}),e.jsx(w,{variant:"body2",color:"text.primary",children:g==="dark"?"Dark mode":"Light mode"})]}),e.jsx(Q,{sx:{mb:4}}),e.jsxs(y,{sx:{mb:4},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Language"}),e.jsx(w,{variant:"body1",children:"English"}),e.jsx(w,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"Changes will take effect immediately"})]})]})]})]})]}),e.jsxs(ve,{open:W,onClose:()=>R(!1),"aria-labelledby":"add-password-title",fullWidth:!0,maxWidth:"xs",children:[e.jsx(bt,{id:"add-password-title",children:p?"Change password":"Add password"}),e.jsxs(Ce,{sx:{pt:1.25},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1.5},children:p?"Enter a new password for your account.":"Add a password so you can sign in with email & password next time."}),e.jsx(ue,{fullWidth:!0,label:"New password",type:"password",value:D,onChange:v=>b(v.target.value),disabled:$,autoComplete:"new-password",sx:{mb:1.25}}),e.jsx(ue,{fullWidth:!0,label:"Confirm password",type:"password",value:x,onChange:v=>l(v.target.value),disabled:$,autoComplete:"new-password"}),f&&e.jsx(w,{variant:"caption",color:"error",sx:{display:"block",mt:1},children:f})]}),e.jsxs(Pa,{sx:{px:3,pb:2},children:[e.jsx(q,{onClick:()=>R(!1),disabled:$,children:"Cancel"}),e.jsx(q,{variant:"contained",onClick:xe,disabled:$,children:$?"Saving…":p?"Update password":"Add password"})]})]})]})},_r={inbox:La,today:Fa,completed:Da,settings:Aa},Br=({open:a,onClose:r})=>{const t=he(),n=We(),{recentViews:s,closeModal:c}=Ge(),{t:i}=Ne(),[u,p]=o.useState(""),g=o.useRef(null),[h,d]=o.useState(0),m=o.useMemo(()=>{if(!u.trim())return s;const k=u.toLowerCase().trim();return s.filter(T=>i(T.labelKey).toLowerCase().includes(k))},[s,u,i]);o.useEffect(()=>{a&&(p(""),d(0),setTimeout(()=>{var k;return(k=g.current)==null?void 0:k.focus()},0))},[a]),o.useEffect(()=>{d(0)},[u]);const j=()=>{p(""),r(),c()},M=k=>{n(k),j()},E=k=>{if(k.key==="Escape"){j();return}if(k.key==="ArrowDown"){k.preventDefault(),d(T=>Math.min(T+1,m.length-1));return}if(k.key==="ArrowUp"){k.preventDefault(),d(T=>Math.max(T-1,0));return}k.key==="Enter"&&m.length>0&&(k.preventDefault(),M(m[h].path))};return e.jsx(ve,{open:a,onClose:j,PaperProps:{sx:{width:"560px",maxWidth:"calc(100vw - 32px)",position:"absolute",top:"15%",left:"50%",transform:"translateX(-50%)",m:0,borderRadius:"12px",overflow:"hidden",backgroundColor:t.palette.background.paper,color:t.palette.text.primary,boxShadow:t.palette.mode==="dark"?"0 20px 60px -12px rgba(0, 0, 0, 0.5), 0 8px 24px -4px rgba(0, 0, 0, 0.4)":"0 20px 60px -12px rgba(0, 0, 0, 0.15), 0 8px 24px -4px rgba(0, 0, 0, 0.1)"}},sx:{"& .MuiBackdrop-root":{backgroundColor:t.palette.mode==="dark"?"rgba(0,0,0,0.5)":"rgba(0,0,0,0.25)"}},children:e.jsxs(Ce,{sx:{p:0,"&.MuiDialogContent-root":{padding:0}},children:[e.jsx(y,{sx:{px:2,pt:2,pb:1},children:e.jsx(ue,{inputRef:g,fullWidth:!0,size:"small",placeholder:"Search or type a command...",value:u,onChange:k=>p(k.target.value),onKeyDown:E,variant:"outlined",InputProps:{startAdornment:e.jsx(ze,{position:"start",sx:{mr:1},children:e.jsx(Ma,{sx:{color:t.palette.text.secondary,fontSize:"1.25rem"}})}),endAdornment:e.jsx(ze,{position:"end",children:e.jsx(w,{component:"span",variant:"caption",sx:{px:1,py:.25,borderRadius:.75,bgcolor:t.palette.mode==="dark"?I(t.palette.common.white,.1):I(t.palette.common.black,.06),color:t.palette.text.secondary,fontFamily:"monospace",fontSize:"0.7rem"},children:"Ctrl K"})}),sx:{backgroundColor:t.palette.mode==="dark"?I(t.palette.common.white,.05):I(t.palette.common.black,.03),borderRadius:"8px","& fieldset":{borderColor:t.palette.mode==="dark"?I(t.palette.common.white,.12):I(t.palette.common.black,.12)},"&:hover fieldset":{borderColor:t.palette.mode==="dark"?I(t.palette.common.white,.2):I(t.palette.common.black,.2)},"&.Mui-focused fieldset":{borderColor:t.palette.primary.main,borderWidth:"1px"},"& .MuiInputBase-input":{color:t.palette.text.primary,py:1.25}}}})}),m.length>0&&e.jsxs(y,{sx:{pb:2},children:[e.jsx(w,{variant:"caption",sx:{display:"block",px:2,py:.75,color:t.palette.text.secondary,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Recently viewed"}),e.jsx(y,{component:"ul",sx:{m:0,p:0,listStyle:"none"},children:m.map((k,T)=>e.jsx(Hr,{item:k,label:i(k.labelKey),isHighlighted:T===h,theme:t,onSelect:()=>M(k.path),onHover:()=>d(T)},k.path))})]})]})})};function Hr({item:a,label:r,isHighlighted:t,theme:n,onSelect:s,onHover:c}){const i=_r[a.icon];return e.jsxs(y,{component:"li",onMouseEnter:c,onClick:s,sx:{display:"flex",alignItems:"center",gap:1.5,px:2,py:1.25,cursor:"pointer",borderRadius:"8px",mx:1,backgroundColor:t?n.palette.mode==="dark"?I(n.palette.common.white,.08):I(n.palette.common.black,.06):"transparent",color:n.palette.text.primary,"&:hover":{backgroundColor:n.palette.mode==="dark"?I(n.palette.common.white,.08):I(n.palette.common.black,.06)}},children:[e.jsx(y,{sx:{width:36,height:36,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:n.palette.mode==="dark"?I(n.palette.common.white,.1):I(n.palette.common.black,.06),color:n.palette.text.secondary},children:e.jsx(i,{sx:{fontSize:"1.25rem"}})}),e.jsx(w,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem"},children:r})]})}const Vr=({children:a})=>{const[r,t]=o.useState(!1),[n,s]=o.useState(!1),[c,i]=o.useState(!1),[u,p]=o.useState(!1),{mode:g}=Se(),h=he(),d=kt(h.breakpoints.down("sm")),{logout:m,user:j}=Ve(),M=We(),E=Oe(),{isOpen:k,openModal:T,closeModal:B,recordRecentView:O}=Ge();o.useEffect(()=>{O(E.pathname)},[E.pathname,O]),o.useEffect(()=>{d&&s(!1)},[E.pathname,d]),o.useEffect(()=>{const H=Z=>{(Z.ctrlKey||Z.metaKey)&&Z.key==="k"&&(Z.preventDefault(),T())};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[T]);const W=o.useCallback(()=>C(void 0,null,function*(){try{yield m(),M("/login")}catch(H){L.error("Logout failed",{action:"logout"},H)}}),[m,M]),R=o.useCallback(()=>{i(!0)},[]),D=o.useCallback(()=>{i(!1)},[]),b=o.useCallback(()=>{p(!0)},[]),x=o.useCallback(()=>{p(!1)},[]),l=o.useCallback(()=>{t(H=>!H)},[]),f=o.useCallback(()=>{s(H=>!H)},[]),P=o.useCallback(()=>{s(!1)},[]),U=Se().toggleColorMode,F=o.useMemo(()=>r?64:240,[r]),$=o.useMemo(()=>({flexGrow:1,width:d?"100%":`calc(100% - ${F}px)`,ml:d?0:`${F}px`,transition:h.transitions.create(["margin","width"],{easing:h.transitions.easing.sharp,duration:h.transitions.duration.leavingScreen})}),[F,d,h]),J=o.useMemo(()=>({width:d?"100%":`calc(100% - ${F}px)`,ml:d?0:`${F}px`,transition:h.transitions.create(["margin","width"],{easing:h.transitions.easing.sharp,duration:h.transitions.duration.leavingScreen}),backgroundColor:h.palette.background.default}),[F,d,h]);return e.jsxs(y,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(Rr,{isCollapsed:r,onToggleCollapse:l,darkMode:g==="dark",toggleDarkMode:U,onLogout:W,user:j,userName:j==null?void 0:j.name,onOpenShortcutsHelp:R,onOpenSettings:b,isMobile:d,mobileOpen:n,onMobileClose:P}),e.jsx(zr,{open:c,onClose:D}),e.jsx(Wr,{open:u,onClose:x}),e.jsx(Br,{open:k,onClose:B}),e.jsxs(y,{component:"main",sx:$,children:[e.jsx(Ra,{position:"fixed",elevation:0,sx:J,children:e.jsx(za,{children:d&&e.jsx(pe,{edge:"start",color:"inherit","aria-label":"Open navigation",sx:{mr:2},onClick:f,children:e.jsx(Oa,{})})})}),e.jsx(y,{sx:{mt:{xs:7,sm:8},pt:0,pb:3,pl:0,pr:{xs:2,sm:3},display:"flex",justifyContent:"flex-start",alignItems:"flex-start",width:"100%",minHeight:"calc(100vh - 64px)"},children:a})]})]})},Ee="categories";function Ur(){return C(this,null,function*(){const a=Ie(_,Ee),r=Wa(a,_a("order"));return(yield vt(r)).docs.map(n=>A({id:n.id},n.data()))})}function $r(a){return C(this,null,function*(){const r=Ie(_,Ee),t=yield St(r,a);return G(A({},a),{id:t.id})})}function Nr(a,r){return C(this,null,function*(){const t=te(_,Ee,a);yield jt(t,r)})}function Kr(a){return C(this,null,function*(){const r=te(_,Ee,a);yield Ct(r)})}const Gr=()=>{const[a,r]=o.useState([]),[t,n]=o.useState(!0),[s,c]=o.useState(null);o.useEffect(()=>{i()},[]);const i=()=>C(void 0,null,function*(){try{n(!0),r(yield Ur())}catch(h){c("Failed to load categories"),ae(h instanceof Error?h:new Error("Failed to load categories"),"useCategories","Failed to load categories")}finally{n(!1)}});return{categories:a,loading:t,error:s,addCategory:h=>C(void 0,null,function*(){try{const d=yield $r(G(A({},h),{order:a.length}));return r(m=>[...m,d]),d}catch(d){throw c("Failed to add category"),ae(d instanceof Error?d:new Error("Failed to add category"),"useCategories","Failed to add category"),d}}),updateCategory:(h,d)=>C(void 0,null,function*(){try{yield Nr(h,d),r(m=>m.map(j=>j.id===h?A(A({},j),d):j))}catch(m){throw c("Failed to update category"),ae(m instanceof Error?m:new Error("Failed to update category"),"useCategories","Failed to update category",{categoryId:h,updates:d}),m}}),deleteCategory:h=>C(void 0,null,function*(){try{yield Kr(h),r(d=>d.filter(m=>m.id!==h))}catch(d){throw c("Failed to delete category"),ae(d instanceof Error?d:new Error("Failed to delete category"),"useCategories","Failed to delete category",{categoryId:h}),d}}),refreshCategories:i}},Pe="tags";function qr(){return C(this,null,function*(){const a=Ie(_,Pe);return(yield vt(a)).docs.map(t=>A({id:t.id},t.data()))})}function Qr(a){return C(this,null,function*(){const r=Ie(_,Pe),t=yield St(r,a);return G(A({},a),{id:t.id})})}function Xr(a,r){return C(this,null,function*(){const t=te(_,Pe,a);yield jt(t,r)})}function Yr(a){return C(this,null,function*(){const r=te(_,Pe,a);yield Ct(r)})}const Jr=()=>{const[a,r]=o.useState([]),[t,n]=o.useState(!0),[s,c]=o.useState(null);o.useEffect(()=>{i()},[]);const i=()=>C(void 0,null,function*(){try{n(!0),r(yield qr())}catch(h){c("Failed to load tags"),ae(h instanceof Error?h:new Error("Failed to load tags"),"useTags","Failed to load tags")}finally{n(!1)}});return{tags:a,loading:t,error:s,addTag:h=>C(void 0,null,function*(){try{const d=yield Qr(h);return r(m=>[...m,d]),d}catch(d){throw c("Failed to add tag"),ae(d instanceof Error?d:new Error("Failed to add tag"),"useTags","Failed to add tag"),d}}),updateTag:(h,d)=>C(void 0,null,function*(){try{yield Xr(h,d),r(m=>m.map(j=>j.id===h?A(A({},j),d):j))}catch(m){throw c("Failed to update tag"),ae(m instanceof Error?m:new Error("Failed to update tag"),"useTags","Failed to update tag",{tagId:h,updates:d}),m}}),deleteTag:h=>C(void 0,null,function*(){try{yield Yr(h),r(d=>d.filter(m=>m.id!==h))}catch(d){throw c("Failed to delete tag"),ae(d instanceof Error?d:new Error("Failed to delete tag"),"useTags","Failed to delete tag",{tagId:h}),d}}),refreshTags:i}},Rt=o.createContext(void 0),Zr=({children:a})=>{const{categories:r,loading:t,error:n,refreshCategories:s}=Gr(),{tags:c,loading:i,error:u,refreshTags:p,addTag:g,deleteTag:h}=Jr(),d=o.useMemo(()=>({categories:r,tags:c,loading:t||i,error:n||u,tagsError:u,categoriesError:n,refresh:()=>{s(),p()},addTag:g,deleteTag:h,refreshTags:p}),[r,c,t,i,n,u,s,p,g,h]);return e.jsx(Rt.Provider,{value:d,children:a})},xo=()=>{const a=o.useContext(Rt);if(!a)throw new Error("useTaskMetadata must be used within TaskMetadataProvider");return a},eo=()=>e.jsx(Dr,{children:e.jsx(Zr,{children:e.jsx(Vr,{children:e.jsx(Ba,{})})})}),to=o.lazy(()=>ne(()=>import("./Login-rS0bkvHg.js"),__vite__mapDeps([0,1,2]))),ao=o.lazy(()=>ne(()=>import("./Settings-DdwE57Su.js"),__vite__mapDeps([3,1,2]))),ro=o.lazy(()=>ne(()=>import("./Today-CvhK-mfP.js"),__vite__mapDeps([4,1,2,5,6,7]))),oo=o.lazy(()=>ne(()=>import("./Completed-8HIZbbDy.js"),__vite__mapDeps([8,1,2,5]))),so=o.lazy(()=>ne(()=>import("./Upcoming-CxcDTLXA.js"),__vite__mapDeps([9,1,2,6,5,10]))),ht=o.lazy(()=>ne(()=>import("./Tags-CNCuruxp.js"),__vite__mapDeps([11,1,2,5,6]))),no=o.lazy(()=>ne(()=>import("./Inbox-B9ELR3q_.js"),__vite__mapDeps([12,1,2,5,6,7]))),io=()=>{const{mode:a}=Se(),r=o.useMemo(()=>lr(),[a]);return e.jsxs(Ua,{theme:r,children:[e.jsx($a,{}),e.jsx(y,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",bgcolor:"background.default"},children:e.jsx(o.Suspense,{fallback:e.jsx(Lt,{isLoading:!0,children:null}),children:e.jsxs(Na,{children:[e.jsx(K,{path:"/login",element:e.jsx(to,{})}),e.jsxs(K,{element:e.jsx(eo,{}),children:[e.jsx(K,{index:!0,element:e.jsx(Le,{to:"today",replace:!0})}),e.jsx(K,{path:"inbox",element:e.jsx(no,{})}),e.jsx(K,{path:"today",element:e.jsx(ro,{})}),e.jsx(K,{path:"upcoming",element:e.jsx(so,{})}),e.jsx(K,{path:"tags",element:e.jsx(ht,{})}),e.jsx(K,{path:"tags/:tagSlug",element:e.jsx(ht,{})}),e.jsx(K,{path:"completed",element:e.jsx(oo,{})}),e.jsx(K,{path:"settings",element:e.jsx(ao,{})})]}),e.jsx(K,{path:"*",element:e.jsx(Le,{to:"/today",replace:!0})})]})})})]})},lo=()=>e.jsx(Ar,{children:e.jsx(Cr,{children:e.jsx(ur,{children:e.jsx(fr,{children:e.jsx(br,{children:e.jsx(kr,{children:e.jsx(jr,{children:e.jsx(Tr,{children:e.jsx(Ha,{dateAdapter:Va,children:e.jsx(io,{})})})})})})})})})});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/2DU/sw.js").catch(()=>{})});Ka.createRoot(document.getElementById("root")).render(e.jsx(_e.StrictMode,{children:e.jsx(Ga,{basename:"/2DU/".replace(/\/$/,""),children:e.jsx(lo,{})})}));export{ne as _,Ne as a,mo as b,xo as c,Sr as d,_ as e,go as f,L as l,ho as s,Ve as u};
