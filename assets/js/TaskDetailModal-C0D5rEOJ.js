var at=Object.defineProperty,st=Object.defineProperties;var lt=Object.getOwnPropertyDescriptors;var We=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,ct=Object.prototype.propertyIsEnumerable;var Be=(r,l,t)=>l in r?at(r,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[l]=t,fe=(r,l)=>{for(var t in l||(l={}))it.call(l,t)&&Be(r,t,l[t]);if(We)for(var t of We(l))ct.call(l,t)&&Be(r,t,l[t]);return r},ze=(r,l)=>st(r,lt(l));var ce=(r,l,t)=>new Promise((s,c)=>{var d=j=>{try{o(t.next(j))}catch(O){c(O)}},x=j=>{try{o(t.throw(j))}catch(O){c(O)}},o=j=>j.done?s(j.value):Promise.resolve(j.value).then(d,x);o((t=t.apply(r,l)).next())});import{V as le,r as n,A as e,bv as dt,bw as ut,bx as pt,by as xt,bz as mt,bi as qe,H as f,h as p,T as ae,a8 as Qe,a1 as Ge,a3 as be,a4 as pe,aO as Te,aP as ke,bA as ft,bB as ht,bC as gt,br as ye,Y as Le,K as xe,bD as ge,ac as Ee,ad as ie,bE as Ne,b9 as Ve,bF as bt,P as yt,bG as Fe,bo as jt,bl as vt,bH as Dt,bj as Ct,bI as Ye,am as wt,a7 as ue,bJ as _e,bK as St,bL as Xe,a2 as ve,bM as Je,bN as It,bO as Mt,bP as zt,ai as Ze,al as Ue,aW as Pt,I as At,b8 as Et,ba as Rt,ar as Re,N as Tt,X as kt,an as Ot,ao as Wt,bQ as Bt,ak as Lt,a_ as Nt,bR as Ft,a9 as _t}from"./vendor-CbdQs_1R.js";import{D as se,b as De,e as de,ad as He,ae as $e,ab as et,B as Ht}from"./utils-BuwBnmRf.js";import{c as je,_ as $t,l as Kt,d as qt}from"./index-B5I4Nid2.js";const Ce={low:"Low",medium:"Medium",high:"High"},he=r=>{switch(r){case"low":return"#4A9B6D";case"medium":return"#B8954A";case"high":return"#B85C5C"}},tt=({anchorEl:r,value:l,onClose:t,onChange:s})=>{const c=le(),d=se(new Date),x=n.useMemo(()=>[{id:"tomorrow",label:"Tomorrow",sublabel:de(De(d,1),"EEE"),icon:e.jsx(dt,{sx:{fontSize:"1rem"}}),getDate:()=>De(d,1)},{id:"later",label:"Later this week",sublabel:de(De(d,2),"EEE"),icon:e.jsx(ut,{sx:{fontSize:"1rem"}}),getDate:()=>De(d,2)},{id:"weekend",label:"This weekend",sublabel:de(He(d),"EEE"),icon:e.jsx(pt,{sx:{fontSize:"1rem"}}),getDate:()=>He(d)},{id:"nextweek",label:"Next week",sublabel:de($e(d),"EEE MMM d"),icon:e.jsx(xt,{sx:{fontSize:"1rem"}}),getDate:()=>$e(d)},{id:"none",label:"No Date",sublabel:"",icon:e.jsx(mt,{sx:{fontSize:"1rem"}}),getDate:()=>null}],[d]),j=de(l||d,"MMM d"),O=y=>{s(y.getDate()),y.id==="none"&&t()},I=y=>{s(y?se(y):null)};return e.jsxs(qe,{open:!!r,anchorEl:r,onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{mt:1,p:0,minWidth:320,maxWidth:360,borderRadius:2,boxShadow:c.palette.mode==="dark"?"0 8px 32px rgba(0, 0, 0, 0.4)":"0 8px 32px rgba(0, 0, 0, 0.12)",overflow:"hidden"}},children:[e.jsx(f,{sx:{px:2,py:1.25,bgcolor:p(c.palette.text.primary,.06)},children:e.jsx(ae,{variant:"subtitle2",sx:{fontWeight:600,fontSize:"0.875rem"},children:j})}),e.jsx(Qe,{dense:!0,disablePadding:!0,sx:{py:.5},children:x.map(y=>{const b=y.getDate(),P=y.id==="none"?!l:!!(l&&b&&se(b).getTime()===se(l).getTime());return e.jsxs(Ge,{button:!0,onClick:()=>O(y),sx:{py:1,px:2,borderRadius:0,bgcolor:P?p(c.palette.primary.main,.08):"transparent","&:hover":{bgcolor:P?p(c.palette.primary.main,.12):p(c.palette.action.hover,.04)}},children:[e.jsx(be,{sx:{minWidth:32,color:"text.secondary"},children:y.icon}),e.jsx(pe,{primary:y.label,secondary:y.sublabel,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:500},secondaryTypographyProps:{fontSize:"0.75rem",color:"text.secondary"}})]},y.id)})}),e.jsxs(f,{sx:{px:2,pb:2},children:[e.jsx(Te,{dateAdapter:ke,children:e.jsx(ft,{value:l||d,onChange:I,showDaysOutsideCurrentMonth:!0,sx:{"& .MuiDateCalendar-root":{width:"100%"},"& .MuiPickersCalendarHeader-root":{justifyContent:"space-between",paddingLeft:0,paddingRight:0,"& .MuiIconButton-root":{color:"text.secondary","&:hover":{bgcolor:p(c.palette.primary.main,.08)}}},"& .MuiPickersDay-root":{fontSize:"0.875rem","&.Mui-selected":{bgcolor:c.palette.primary.main,color:c.palette.primary.contrastText,"&:hover":{bgcolor:c.palette.primary.dark}},"&.MuiPickersDay-today":{border:`2px solid ${c.palette.primary.main}`,bgcolor:"transparent",color:"text.primary"}}}})}),e.jsxs(f,{sx:{display:"flex",gap:1,mt:1},children:[e.jsxs(f,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:.5,py:.75,borderRadius:1,border:`1px solid ${c.palette.divider}`,color:"text.secondary",fontSize:"0.8125rem",cursor:"default"},children:[e.jsx(ht,{sx:{fontSize:"1rem"}}),"Time"]}),e.jsxs(f,{sx:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:.5,py:.75,borderRadius:1,border:`1px solid ${c.palette.divider}`,color:"text.secondary",fontSize:"0.8125rem",cursor:"default"},children:[e.jsx(gt,{sx:{fontSize:"1rem"}}),"Repeat"]})]})]})]})},Qt=[{value:"",label:"None"},{value:"low",label:Ce.low},{value:"medium",label:Ce.medium},{value:"high",label:Ce.high}],Gt=({initialTask:r,show:l,dueDate:t,priority:s,onDueDateChange:c,onPriorityChange:d})=>{const x=le(),o=!!(t&&et(t)),[j,O]=n.useState(null),I=u=>{u.preventDefault(),O(u.currentTarget)},y=()=>O(null),[b,P]=n.useState(null),v=u=>{u.preventDefault(),P(u.currentTarget)},L=()=>P(null),W=u=>{d(u),L()};return!l&&!t&&!s?null:e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:.75,flexWrap:"wrap",mt:.5},children:[o?e.jsx(ye,{icon:e.jsx(Le,{sx:{fontSize:"0.875rem !important",color:"#4caf50 !important"}}),label:"Today",size:"small",onClick:I,onDelete:u=>{u.stopPropagation(),c(null)},sx:{height:"28px",fontSize:"0.8125rem",backgroundColor:"#4caf50",color:"white",fontWeight:500,cursor:"pointer","& .MuiChip-icon":{color:"white !important"},"& .MuiChip-deleteIcon":{fontSize:"1rem",color:"white","&:hover":{color:"rgba(255,255,255,0.8)"}}}}):e.jsx(xe,{type:"button",size:"small",startIcon:e.jsx(Le,{sx:{fontSize:"0.875rem"}}),onClick:I,sx:{textTransform:"none",fontSize:"0.8125rem",color:x.palette.text.secondary,minWidth:"auto",px:1.25,py:.5,height:"28px",borderRadius:"6px",border:`1px solid ${p(x.palette.divider,.5)}`,backgroundColor:"transparent","&:hover":{backgroundColor:p(x.palette.action.hover,.5),borderColor:p(x.palette.divider,.8)}},children:"Today"}),e.jsx(tt,{anchorEl:j,value:t,onClose:y,onChange:u=>{c(u)}}),e.jsx(xe,{type:"button",size:"small",startIcon:e.jsx(ge,{sx:{fontSize:"0.875rem"}}),onClick:v,sx:{textTransform:"none",fontSize:"0.8125rem",color:s?he(s):x.palette.text.secondary,minWidth:"auto",px:1.25,py:.5,height:"28px",borderRadius:"6px",border:`1px solid ${p(x.palette.divider,.5)}`,backgroundColor:s?p(he(s),.12):"transparent","& .MuiButton-startIcon":{color:s?he(s):x.palette.text.secondary},"&:hover":{backgroundColor:s?p(he(s),.2):p(x.palette.action.hover,.5),borderColor:p(x.palette.divider,.8)}},children:s?Ce[s]:"Priority"}),e.jsx(Ee,{anchorEl:b,open:!!b,onClose:L,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{minWidth:140,mt:1}},children:Qt.map(({value:u,label:A})=>e.jsx(ie,{onClick:()=>W(u),selected:s===u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(be,{sx:{minWidth:32},children:e.jsx(ge,{sx:{fontSize:"1rem",color:he(u)}})}),e.jsx(pe,{primary:A,primaryTypographyProps:{fontSize:"0.875rem"}}),s===u&&e.jsx(Ne,{sx:{fontSize:"1rem",color:"primary.main",ml:1}})]}):e.jsxs(e.Fragment,{children:[e.jsx(be,{sx:{minWidth:32}}),e.jsx(pe,{primary:A,primaryTypographyProps:{fontSize:"0.875rem"}}),!s&&e.jsx(Ne,{sx:{fontSize:"1rem",color:"primary.main",ml:1}})]})},u||"none"))})]})},Vt=({show:r,isSubmitting:l,isSaveDisabled:t,onCancel:s})=>{const c=le();return r?e.jsxs(f,{sx:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:1,mt:1.25,pt:1,borderTop:`1px solid ${p(c.palette.divider,.6)}`},children:[e.jsx(xe,{type:"button",variant:"text",color:"inherit",size:"small",onClick:d=>{d.preventDefault(),d.stopPropagation(),s()},disabled:l,sx:{textTransform:"none",fontSize:"0.8125rem",fontWeight:600,height:"28px",borderRadius:"6px",px:1.5,minWidth:"68px",color:c.palette.text.secondary,"&:hover":{backgroundColor:p(c.palette.action.hover,.5)}},children:"Cancel"}),e.jsx(xe,{type:"submit",variant:"contained",disableElevation:!0,size:"small",onClick:d=>d.stopPropagation(),disabled:l||t,sx:{textTransform:"none",fontSize:"0.8125rem",fontWeight:600,height:"28px",borderRadius:"6px",px:2,minWidth:"68px",backgroundColor:c.palette.primary.main,color:c.palette.primary.contrastText,"&:hover":{backgroundColor:c.palette.primary.dark},"&.Mui-disabled":{backgroundColor:p(c.palette.primary.main,.35),color:p(c.palette.primary.contrastText,.75)}},children:"Save"})]}):null},we="data-tag-id",Se="data-tag-pending-name",Ie=["#4A9B6D","#5B7A9E","#B8954A","#A67B8A","#7B6B9E","#5A8A8A"],rt={backgroundColor:"rgba(255, 235, 59, 0.35)",borderRadius:"4px",padding:"0 2px"};function Yt(r,l){let t=0;const s=c=>{var d;if(c.nodeType===Node.TEXT_NODE){const x=((d=c.textContent)!=null?d:"").length;if(t+x>=l)return{node:c,offset:l-t};t+=x}else for(let x=0;x<c.childNodes.length;x++){const o=s(c.childNodes[x]);if(o)return o}return null};return s(r)}function Pe(r){var O;const l=window.getSelection();if(!l||l.rangeCount===0)return null;const t=l.getRangeAt(0);if(!r.contains(t.commonAncestorContainer))return null;const s=document.createRange();s.setStart(r,0),s.setEnd(t.endContainer,t.endOffset);const c=s.toString(),d=c.split(/\s/),x=(O=d[d.length-1])!=null?O:"",o=Math.max(0,c.length-x.length),j=Yt(r,o);return j?(s.setStart(j.node,j.offset),{word:x,range:s}):{word:x,range:s}}function ne(r){if(!r)return"";let l="";const t=s=>{var c;if(s.nodeType===Node.TEXT_NODE)l+=(c=s.textContent)!=null?c:"";else if(s.nodeType===Node.ELEMENT_NODE){const d=s;if(d.getAttribute(we)||d.getAttribute(Se))return;s.childNodes.forEach(t)}};return r.childNodes.forEach(t),l.trim()}function Me(r){if(!r)return[];const l=[];return r.querySelectorAll(`[${we}]`).forEach(s=>{const c=s.getAttribute(we);c&&!l.includes(c)&&l.push(c)}),l}function Oe(r){if(!r)return[];const l=[];return r.querySelectorAll(`[${Se}]`).forEach(s=>{const c=s.getAttribute(Se);c&&c.trim()&&!l.includes(c.trim())&&l.push(c.trim())}),l}function Ke(r){const l=document.createElement("span");return l.contentEditable="false",l.setAttribute(we,r.id),l.textContent=`@${r.name}`,Object.assign(l.style,rt),l.setAttribute("data-tag-mention","1"),l}function Xt(r){const l=document.createElement("span");return l.contentEditable="false",l.setAttribute(Se,r.trim()),l.textContent=`@${r.trim()}`,Object.assign(l.style,rt),l.setAttribute("data-tag-mention","1"),l}const ot=({value:r,onChange:l,onTagIdsChange:t,onPendingNamesChange:s,onTimeParsed:c,label:d,error:x,helperText:o,required:j,disabled:O,autoFocus:I,placeholder:y="Task name",inputRef:b,initialTagIds:P=[],onEscape:v,variant:L="default",sx:W})=>{const u=le(),{tags:A}=je(),T=n.useRef(null),D=b||T,q=n.useRef(A);q.current=A;const N=n.useRef(void 0),[F,C]=n.useState(!1),[Y,_]=n.useState(!1),[k,Q]=n.useState(""),[$,X]=n.useState(0),J=k.trim().toLowerCase(),G=n.useMemo(()=>A.filter(m=>J?m.name.toLowerCase().includes(J):!0),[A,J]),a=!k.trim(),M=G.length===0&&k?`Tag not found. Create ${k}`:k?`Create tag "${k}"`:"Create tag (type to name)",i=G.length+1,w=$===G.length,z=n.useCallback(()=>{const m=D.current;m&&(t==null||t(Me(m)),s==null||s(Oe(m)))},[D,t,s]),ee=n.useCallback(m=>{const E=D.current;if(!E)return;const g=Pe(E);if(!g||!g.word.startsWith("@"))return;const{range:R}=g,H=window.getSelection();if(!H)return;R.deleteContents();const U=Ke(m);R.insertNode(U),R.setStartAfter(U),R.collapse(!0),H.removeAllRanges(),H.addRange(R);const oe=ne(E);N.current=oe,l(oe),_(!1),Q(""),X(0),z()},[l,z]),h=n.useCallback(m=>{if(!m.trim())return;const E=D.current;if(!E)return;const g=Pe(E);if(!g||!g.word.startsWith("@"))return;const{range:R}=g,H=window.getSelection();if(!H)return;R.deleteContents();const U=Xt(m);R.insertNode(U),R.setStartAfter(U),R.collapse(!0),H.removeAllRanges(),H.addRange(R);const oe=ne(E);N.current=oe,l(oe),_(!1),Q(""),X(0),z()},[l,z]),K=n.useCallback(m=>{const E=m.currentTarget,g=ne(E);N.current=g,l(g),z();const R=Pe(E);R!=null&&R.word.startsWith("@")?(Q(R.word.slice(1)),_(!0),X(0)):_(!1)},[l,z]),V=n.useRef(void 0),S=n.useRef(c);S.current=c,n.useEffect(()=>{var E;if(!r.trim()){V.current!==null&&(V.current=null,(E=S.current)==null||E.call(S,null));return}let m=!1;return $t(()=>ce(void 0,null,function*(){const{parseTimeFromText:g}=yield import("./taskHelpers-DNe9C59J.js");return{parseTimeFromText:g}}),[]).then(({parseTimeFromText:g})=>{var me;if(m)return;const{time:R}=g(r),H=R!=null?R:null,U=V.current;U===H||U!=null&&H!=null&&U.getTime()===H.getTime()||(V.current=H,(me=S.current)==null||me.call(S,H))}),()=>{m=!0}},[r]),n.useEffect(()=>{const m=D.current;if(!m)return;const E=N.current;if(r===E)return;const g=ne(m);if(E!==void 0&&E===g)return;const R=Me(m),H=R.length===P.length&&P.every(oe=>R.includes(oe));if(g===r&&H)return;m.textContent="",r&&m.appendChild(document.createTextNode(r));const U=q.current;P.forEach(oe=>{const me=U.find(nt=>nt.id===oe);me&&(m.childNodes.length>0&&m.appendChild(document.createTextNode("Â ")),m.appendChild(Ke(me)))}),N.current=r,z()},[r,P]);const Z=n.useCallback(m=>{var E;if(m.key==="Escape"){if(Y){m.preventDefault(),_(!1);return}v==null||v();return}if(Y){if(m.key==="ArrowDown"){m.preventDefault(),X(g=>g<i-1?g+1:0);return}if(m.key==="ArrowUp"){m.preventDefault(),X(g=>g>0?g-1:i-1);return}if((m.key==="Enter"||m.key==="Tab")&&i>0){m.preventDefault(),w?a||h(k.trim()):ee(G[$]);return}}if(m.key==="Enter"&&!m.shiftKey){m.preventDefault();const g=(E=D.current)==null?void 0:E.closest("form");g&&g.requestSubmit()}},[Y,i,w,a,k,G,$,ee,h,D,v]),te=n.useCallback(m=>{m.preventDefault();const E=m.clipboardData.getData("text/plain"),g=window.getSelection();if(g!=null&&g.rangeCount&&D.current){const H=g.getRangeAt(0);H.deleteContents();const U=document.createTextNode(E);H.insertNode(U),H.setStartAfter(U),H.setEndAfter(U),g.removeAllRanges(),g.addRange(H)}const R=D.current?ne(D.current):"";N.current=R,l(R),z()},[l,z]);n.useEffect(()=>{I&&D.current&&requestAnimationFrame(()=>{var m;return(m=D.current)==null?void 0:m.focus()})},[I]);const re=r||(D.current?ne(D.current):"")||"",B=L==="inline";return e.jsxs(f,{sx:fe({flex:1,display:"flex",flexDirection:"column",position:"relative"},W),children:[e.jsxs(f,{sx:{position:"relative",display:"flex",flexDirection:"column"},children:[d&&!B&&e.jsxs(Ve,{shrink:F||!!re,sx:{position:"absolute",left:0,top:0,transform:F||re?"translate(14px, -9px) scale(0.75)":"translate(14px, 14px) scale(1)",transformOrigin:"top left",color:x?u.palette.error.main:F?u.palette.primary.main:u.palette.text.secondary,pointerEvents:"none",transition:"all 0.2s cubic-bezier(0.0, 0, 0.2, 1) 0ms",zIndex:1,backgroundColor:u.palette.background.paper,padding:F||re?"0 4px":"0"},children:[d,j&&" *"]}),e.jsx(f,{ref:D,contentEditable:!O,suppressContentEditableWarning:!0,onInput:K,onKeyDown:Z,onPaste:te,onFocus:()=>C(!0),onBlur:()=>C(!1),"data-placeholder":y,sx:ze(fe({minHeight:B?"28px":"40px",maxHeight:B?"200px":void 0,overflowY:B?"auto":void 0,padding:B?0:d?F||re?"14px 14px 2px 14px":"20px 14px 2px 14px":"8.5px 14px",border:B?"none":`1px solid ${x?u.palette.error.main:F?u.palette.primary.main:u.palette.mode==="dark"?p(u.palette.common.white,.2):p(u.palette.common.black,.2)}`,borderRadius:B?0:"4px",backgroundColor:B?"transparent":u.palette.mode==="dark"?p(u.palette.common.white,.05):p(u.palette.common.black,.02),color:u.palette.text.primary,fontSize:B?"0.9375rem":"0.875rem",fontWeight:B?500:400,fontFamily:u.typography.fontFamily,outline:"none",cursor:O?"not-allowed":"text",opacity:O?.6:1,transition:B?void 0:"border-color 0.2s ease",wordBreak:"break-word"},!B&&{"&:hover":{borderColor:x?u.palette.error.main:u.palette.mode==="dark"?p(u.palette.common.white,.3):p(u.palette.common.black,.3)},"&:focus":{borderColor:u.palette.primary.main,borderWidth:"2px",padding:d?F||re?"13px 13px 1px 13px":"19px 13px 1px 13px":"7.5px 13px"}}),{"&:empty:before":fe({content:"attr(data-placeholder)",color:u.palette.text.secondary,opacity:.6},B&&{fontWeight:400})})}),e.jsx(bt,{open:Y,anchorEl:D.current,placement:"bottom-start",style:{zIndex:u.zIndex.tooltip},children:e.jsx(yt,{elevation:2,sx:{maxHeight:240,overflow:"auto",minWidth:180},children:e.jsxs(Qe,{dense:!0,disablePadding:!0,children:[G.map((m,E)=>e.jsxs(Fe,{selected:E===$,onMouseDown:g=>{g.preventDefault(),ee(m)},sx:{py:.5},children:[e.jsx(jt,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),m.name]},m.id)),e.jsxs(Fe,{selected:w,disabled:a,onMouseDown:m=>{m.preventDefault(),a||h(k.trim())},sx:{py:.5},children:[e.jsx(vt,{sx:{fontSize:18,mr:1,color:"text.secondary"}}),M]})]})})})]}),o&&e.jsx(Dt,{error:x,sx:{mt:.5,mx:1.75},children:o})]})},Jt=Kt.component("InlineTaskEditor"),Zt=({onSubmit:r,onCancel:l,initialTask:t,autoFocus:s=!0,categories:c,defaultCategoryId:d,defaultDueDate:x=null,defaultTagIds:o=[]})=>{var z,ee;const j=le(),{categories:O,tags:I,addTag:y}=je(),[b,P]=n.useState(""),[v,L]=n.useState(""),[W,u]=n.useState(null),[A,T]=n.useState(""),[D,q]=n.useState(d),[N,F]=n.useState(o),[C,Y]=n.useState(!1),[_,k]=n.useState(!1),Q=n.useRef(null),$=n.useRef(null),X=n.useRef(null),J=n.useRef(null),G=n.useRef(!1);n.useEffect(()=>{var V,S;const h=(V=t==null?void 0:t.id)!=null?V:null,K=J.current===h;t?(G.current=!1,K||(J.current=t.id,P(t.title),L(t.description||""),u(t.dueDate?new Date(t.dueDate):null),T(t.priority||""),q(t.categoryId||d),F((S=t.tags)!=null?S:[]),k(!0),$.current&&($.current.textContent=t.description||""))):(J.current=null,G.current||(G.current=!0,u(x),F(o)),k(!0),$.current&&($.current.textContent=""))},[t,d,x,o]),n.useEffect(()=>{const h=K=>{var Z,te;const V=K.target;if(!X.current||X.current.contains(V))return;const S=K.target;(Z=S.closest)!=null&&Z.call(S,"[data-add-task-trigger]")||(te=S.closest)!=null&&te.call(S,'[role="dialog"]')||!C&&b.trim()===""&&v.trim()===""&&l()};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[l,C,b,v]);const a=n.useMemo(()=>{var h,K,V,S;if(t){const Z=(t.description||"")===v,te=t.dueDate==null&&W==null||t.dueDate!=null&&W!=null&&new Date(t.dueDate).getTime()===W.getTime(),re=((K=(h=t.tags)==null?void 0:h.length)!=null?K:0)===N.length&&((V=t.tags)!=null?V:[]).every(B=>N.includes(B));return b!==t.title||!Z||!te||(t.priority||"")!==A||(t.categoryId||d)!==D||!re}return b.trim()!==""||v.trim()!==""||A!==""||D!==d||N.length!==((S=o==null?void 0:o.length)!=null?S:0)||(o==null?void 0:o.some(Z=>!N.includes(Z)))},[t,b,v,W,A,D,d,N,o]);n.useEffect(()=>{const h=K=>{a&&(K.preventDefault(),K.returnValue="")};return window.addEventListener("beforeunload",h),()=>window.removeEventListener("beforeunload",h)},[a]);const M=n.useCallback(h=>{const K=h.currentTarget.textContent||"";L(K),k(K.length>0||b.length>0)},[b]),i=n.useCallback(()=>ce(void 0,null,function*(){const K=ne(Q.current).trim();if(!K||C)return;const V=Me(Q.current),S=Oe(Q.current);try{Y(!0);const Z=[];for(let B=0;B<S.length;B++){const m=S[B],E=Ie[(I.length+B)%Ie.length],g=yield y({name:m,color:E});Z.push(g.id)}const te=[...V,...Z],re={title:K,description:v.trim()||void 0,dueDate:W||void 0,priority:A||void 0,categoryId:D,tags:te.length>0?te:void 0,status:"todo",createdAt:(t==null?void 0:t.createdAt)||new Date,updatedAt:new Date};yield r(re),t||(P(""),L(""),u(null),T(""),q(d),F(o),k(!1),$.current&&($.current.textContent=""),requestAnimationFrame(()=>{var B;return(B=Q.current)==null?void 0:B.focus()}))}catch(Z){Jt.error("Failed to submit task",{error:Z})}finally{Y(!1)}}),[v,W,A,D,r,t,C,d,o,I.length,y]),w=n.useCallback(h=>{h.key==="Enter"&&!h.shiftKey?(h.preventDefault(),h.stopPropagation(),i()):h.key==="Escape"&&(h.preventDefault(),h.stopPropagation(),l())},[i,l]);return e.jsx(f,{component:Ct.div,initial:{opacity:0,y:-6},animate:{opacity:1,y:0},transition:{duration:.2,ease:"easeOut"},sx:{mb:2},children:e.jsx(f,{ref:X,component:"form",onSubmit:h=>{h.preventDefault(),h.stopPropagation(),i()},sx:{display:"block",bgcolor:"transparent",borderRadius:0,border:"none",boxShadow:"none",overflow:"hidden"},children:e.jsxs(f,{sx:{display:"flex",alignItems:"flex-start",p:1.5,gap:1.5},children:[!t&&e.jsx(f,{sx:{width:20,height:20,display:"flex",alignItems:"center",justifyContent:"center",mt:.5},children:e.jsx(f,{sx:{width:16,height:16,border:`2px solid ${p(j.palette.text.secondary,.4)}`,borderRadius:"50%",transition:"all 0.2s ease"}})}),e.jsxs(f,{sx:{flex:1,display:"flex",flexDirection:"column",gap:1},children:[e.jsx(ot,{inputRef:Q,value:b,onChange:h=>{P(h),k(h.length>0||v.length>0)},onTagIdsChange:F,onTimeParsed:h=>{h&&!t?u(h):!h&&!t&&!b.trim()&&u(null)},placeholder:"Task name",variant:"inline",autoFocus:s,initialTagIds:t?(z=t.tags)!=null?z:[]:o,onEscape:l},(ee=t==null?void 0:t.id)!=null?ee:"new"),e.jsx(f,{ref:$,contentEditable:!0,suppressContentEditableWarning:!0,onInput:M,onKeyDown:w,"data-placeholder":"Description",sx:{minHeight:"24px",maxHeight:"150px",overflowY:"auto",outline:"none",fontSize:"0.875rem",lineHeight:1.5,color:j.palette.text.secondary,wordBreak:"break-word","&:empty:before":{content:"attr(data-placeholder)",color:j.palette.text.secondary,opacity:.5,fontStyle:"italic"},"&:focus":{outline:"none",color:j.palette.text.primary}}}),e.jsx(Gt,{initialTask:!!t,show:_,dueDate:W,priority:A,onDueDateChange:h=>u(h),onPriorityChange:h=>T(h)}),e.jsx(Vt,{show:!!t,isSubmitting:C,isSaveDisabled:b.trim()==="",onCancel:l})]})]})})})},Ut=({anchorEl:r,tempDate:l,hasExistingDueDate:t,onClose:s,onDateChange:c,onRemove:d})=>{const x=le();return e.jsx(qe,{open:!!r,anchorEl:r,onClose:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{sx:{mt:1,p:2,minWidth:280,backgroundColor:x.palette.background.paper,boxShadow:x.palette.mode==="dark"?"0 8px 24px rgba(0, 0, 0, 0.4)":"0 8px 24px rgba(0, 0, 0, 0.15)"}},children:e.jsx(Te,{dateAdapter:ke,children:e.jsxs(f,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(Ye,{label:"Date",value:l,onChange:c,slotProps:{textField:{size:"small",fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{backgroundColor:x.palette.mode==="dark"?p(x.palette.common.white,.05):p(x.palette.common.black,.02)}}}}}),t&&e.jsx(f,{sx:{display:"flex",justifyContent:"flex-end",pt:1},children:e.jsx(ae,{onClick:d,sx:{cursor:"pointer",color:"error.main",fontSize:"0.875rem","&:hover":{textDecoration:"underline"}},children:"Remove date"})})]})})})},er=({task:r,onToggleComplete:l,onDelete:t,onEdit:s,onUpdate:c,isActionInProgress:d=!1,showPriorityRing:x=!1})=>{const o=le(),{tags:j,categories:O}=je(),{activeInlineTaskId:I,setActiveInlineTaskId:y}=qt(),[b,P]=n.useState(null),[v,L]=n.useState(null),[W,u]=n.useState(!1),A=n.useRef(null),T=W&&I===r.id;n.useEffect(()=>{I!==r.id&&W&&u(!1)},[I,r.id,W]);const D=n.useMemo(()=>{var M;const a=(M=r.categoryId)!=null?M:r.category;return a?O.find(i=>i.id===a):void 0},[r.categoryId,r.category,O]),q=n.useMemo(()=>{var a;return((a=r.tags)==null?void 0:a.map(M=>j.find(i=>i.id===M)).filter(Boolean))||[]},[r.tags,j]),N=n.useMemo(()=>{if(!r.dueDate||r.completed)return!1;const a=se(new Date(r.dueDate)),M=se(new Date);return Ht(a,M)},[r.dueDate,r.completed]),F=n.useMemo(()=>{if(!r.dueDate)return"";const a=new Date(r.dueDate);return de(a,"MMM d yyyy")},[r.dueDate]),C=n.useMemo(()=>{if(!(!x||r.completed))switch(r.priority){case"high":return o.palette.error.main;case"medium":return o.palette.warning.main;case"low":return o.palette.info.main;default:return}},[x,r.completed,r.priority,o.palette.error.main,o.palette.warning.main,o.palette.info.main]),Y=n.useCallback(a=>{a==null||a.stopPropagation(),l(r.id)},[l,r.id]),_=n.useCallback(a=>{a==null||a.stopPropagation(),t(r.id)},[t,r.id]),k=n.useCallback(()=>{T||s(r)},[s,r,T]),Q=n.useCallback(a=>{if(a==null||a.stopPropagation(),!c){k();return}y(r.id),u(!0)},[c,k,y,r.id]),$=n.useCallback(a=>{if(c)if(a.stopPropagation(),P(a.currentTarget),r.dueDate){const M=new Date(r.dueDate);L(M)}else L(new Date)},[c,r.dueDate]),X=n.useCallback(()=>{P(null)},[]),J=n.useCallback(a=>{if(a&&(L(a),c)){const M=se(new Date(a));c(r.id,{dueDate:M}),P(null)}},[c,r.id]),G=n.useCallback(()=>ce(void 0,null,function*(){c&&(yield c(r.id,{dueDate:void 0}),P(null))}),[c,r.id]);return e.jsxs(Ge,{onClick:T?void 0:k,onKeyDown:a=>{T||(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),k())},role:T?void 0:"button",tabIndex:T?-1:0,"aria-label":`Open task: ${r.title}`,sx:{mb:2,bgcolor:"transparent",transition:"opacity 0.2s ease",cursor:T?"default":"pointer",borderRadius:1,"&:hover":{backgroundColor:"transparent !important"},"& .MuiListItemSecondaryAction-root":{opacity:0,transition:"opacity 0.2s ease"},"&:hover .MuiListItemSecondaryAction-root":{opacity:1},"&:focus-visible":{outline:`2px solid ${p(o.palette.primary.main,.5)}`,outlineOffset:2}},children:[!T&&e.jsx(ue,{edge:"start",onClick:a=>Y(a),disabled:d,size:"small",sx:{p:.25,mr:.5,backgroundColor:"transparent","&:hover":{backgroundColor:"transparent"},"&:hover .check-hover":{opacity:1}},"aria-label":r.completed?"Mark incomplete":"Mark complete",children:r.completed?e.jsx(_e,{sx:{fontSize:17,color:"success.main"}}):e.jsxs(f,{component:"span",sx:{position:"relative",display:"inline-flex",width:17,height:17},children:[e.jsx(St,{sx:{fontSize:17,color:C!=null?C:"action.active"}}),e.jsx(_e,{className:"check-hover",sx:{position:"absolute",left:0,top:0,fontSize:16,color:"white",opacity:0,transition:"opacity 0.15s ease",pointerEvents:"none",backgroundColor:"transparent"}})]})}),T&&c?e.jsx(f,{sx:{flex:1},onClick:a=>a.stopPropagation(),children:e.jsx(Zt,{initialTask:r,onSubmit:a=>ce(void 0,null,function*(){yield c(r.id,a),y(null),u(!1)}),onCancel:()=>{y(null),u(!1)},defaultCategoryId:r.categoryId,autoFocus:!0})}):e.jsx(pe,{primary:e.jsx(ae,{variant:"body1",sx:{fontSize:"0.875rem",textDecoration:r.completed?"line-through":"none",color:r.completed?"text.secondary":"text.primary"},children:r.title}),secondary:e.jsxs(f,{children:[r.description&&e.jsx(ae,{variant:"body2",sx:{color:"text.secondary",fontSize:"0.8125rem",mb:r.dueDate||D||q.length>0?.5:0,display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:r.description}),e.jsxs(f,{sx:{display:"flex",gap:1,mt:.5,flexWrap:"wrap"},children:[r.dueDate&&e.jsxs(f,{ref:A,onClick:$,sx:{display:"flex",alignItems:"center",gap:.5,cursor:c?"pointer":"default",borderRadius:1,px:.5,py:.25,"&:hover":c?{backgroundColor:p(o.palette.primary.main,.1)}:{},transition:"background-color 0.2s ease"},children:[e.jsx(Xe,{fontSize:"small",sx:{fontSize:"0.8125rem"}}),e.jsx(ae,{variant:"body2",sx:{color:N?"error.main":"text.secondary",fontSize:"0.8125rem"},children:F})]}),D&&e.jsx(ve,{title:"Category",children:e.jsx(ye,{size:"small",icon:e.jsx(Je,{fontSize:"small"}),label:D.name,onClick:a=>a.stopPropagation(),sx:{bgcolor:"background.default","& .MuiChip-label":{px:1}}})}),q.map(a=>e.jsx(ve,{title:a.name,children:e.jsx(ye,{size:"small",label:a.name,onClick:M=>M.stopPropagation(),sx:{bgcolor:a.color||"background.default",color:"white","& .MuiChip-label":{px:1}}})},a.id))]})]})}),!T&&e.jsxs(It,{children:[e.jsx(ve,{title:"Edit",children:e.jsx("span",{children:e.jsx(ue,{edge:"end",onClick:a=>Q(a),disabled:d,sx:{mr:.5},size:"small","aria-label":"Edit task",children:e.jsx(Mt,{sx:{fontSize:"1rem"}})})})}),e.jsx(ve,{title:"Delete",children:e.jsx("span",{children:e.jsx(ue,{edge:"end",onClick:a=>_(a),disabled:d,size:"small","aria-label":"Delete task",children:e.jsx(zt,{sx:{fontSize:"1rem"}})})})})]}),c&&e.jsx(Ut,{anchorEl:b,tempDate:v,hasExistingDueDate:!!r.dueDate,onClose:X,onDateChange:J,onRemove:G})]})},ar=wt.memo(er),sr=({open:r,onClose:l,onSubmit:t,initialTask:s,loading:c=!1,defaultDueDate:d=null,defaultTagIds:x=[]})=>{var G;const o=le(),{tags:j,addTag:O}=je(),[I,y]=n.useState(""),[b,P]=n.useState(""),[v,L]=n.useState(null),[W,u]=n.useState(""),[A,T]=n.useState(x),[D,q]=n.useState([]),[N,F]=n.useState({}),[C,Y]=n.useState(!1),_=n.useRef(null);n.useEffect(()=>{var a;s?(y(s.title),P(s.description||""),L(s.dueDate?new Date(s.dueDate):null),u(s.priority||""),T((a=s.tags)!=null?a:[]),q([])):(Q(),L(d),T(x),q([]))},[s,r]),n.useEffect(()=>{r&&_.current&&requestAnimationFrame(()=>{setTimeout(()=>{var a;(a=_.current)==null||a.focus()},0)})},[r]);const k=n.useMemo(()=>{var a,M,i;if(!r)return!1;if(s){const w=(s.description||"")===b,z=s.dueDate==null&&v==null||s.dueDate!=null&&v!=null&&new Date(s.dueDate).getTime()===v.getTime();return I!==s.title||!w||!z||(s.priority||"")!==W||((M=(a=s.tags)==null?void 0:a.length)!=null?M:0)!==A.length||((i=s.tags)!=null?i:[]).some(ee=>!A.includes(ee))}return I.trim()!==""||b.trim()!==""||W!==""||A.length>0||D.length>0},[r,s,I,b,v,W,A,D]);n.useEffect(()=>{const a=M=>{k&&(M.preventDefault(),M.returnValue="")};return window.addEventListener("beforeunload",a),()=>window.removeEventListener("beforeunload",a)},[k]);const Q=()=>{y(""),P(""),L(null),u(""),T(x),q([]),F({}),Y(!1)},$=()=>{const a={};return I.trim()||(a.title="Task name is required"),F(a),Object.keys(a).length===0},X=a=>ce(void 0,null,function*(){var i;a.preventDefault();const M=ne(_.current)||I;if(y(M),yield new Promise(w=>setTimeout(w,0)),!(!$()||C))try{Y(!0);const w=Me(_.current),z=Oe(_.current),ee=[];for(let S=0;S<z.length;S++){const Z=z[S],te=Ie[(j.length+S)%Ie.length],re=yield O({name:Z,color:te});ee.push(re.id)}const h=[...w,...ee],V={title:((i=ne(_.current))==null?void 0:i.trim())||I.trim(),description:b||void 0,dueDate:v||void 0,priority:W||void 0,tags:h.length>0?h:void 0,status:"todo",createdAt:(s==null?void 0:s.createdAt)||new Date,updatedAt:new Date};yield t(V),Q(),l()}catch(w){F({submit:"Failed to save task. Please try again."})}finally{Y(!1)}}),J=()=>{C||(Q(),l())};return e.jsx(Ze,{open:r,onClose:J,PaperProps:{sx:{width:"550px",minHeight:"220px",maxWidth:"550px",maxHeight:"90vh",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",m:0,backgroundColor:o.palette.background.paper,color:o.palette.text.primary,boxShadow:o.palette.mode==="dark"?"0 20px 60px -12px rgba(0, 0, 0, 0.5), 0 8px 24px -4px rgba(0, 0, 0, 0.4)":"0 20px 60px -12px rgba(0, 0, 0, 0.15), 0 8px 24px -4px rgba(0, 0, 0, 0.1)",borderRadius:"12px"}},TransitionProps:{onEntered:()=>{var a;(a=_.current)==null||a.focus()}},disableEscapeKeyDown:C,children:e.jsx(Ue,{sx:{p:2,height:"100%",backgroundColor:o.palette.background.paper,color:o.palette.text.primary,"&.MuiDialogContent-root":{paddingTop:2}},children:e.jsx("form",{onSubmit:X,style:{height:"100%",display:"flex",flexDirection:"column"},children:e.jsxs(Pt,{spacing:1.5,sx:{flexGrow:1},children:[N.submit&&e.jsx(At,{severity:"error",sx:{py:.5,backgroundColor:p(o.palette.error.main,.15),color:o.palette.text.primary,"& .MuiAlert-icon":{color:o.palette.error.main}},children:N.submit}),e.jsxs(f,{sx:{display:"flex",gap:1.5},children:[e.jsx(ot,{inputRef:_,value:I,onChange:y,onTagIdsChange:T,onPendingNamesChange:q,onTimeParsed:a=>{L(a||null)},label:"Task name",error:!!N.title,helperText:N.title,required:!0,disabled:C,autoFocus:!0,initialTagIds:A,sx:{flex:1}},(G=s==null?void 0:s.id)!=null?G:"new"),e.jsx(Te,{dateAdapter:ke,children:e.jsx(Ye,{label:"Date",value:v,onChange:a=>L(a),slotProps:{textField:{size:"small",sx:{width:"140px","& .MuiOutlinedInput-root":{backgroundColor:o.palette.mode==="dark"?p(o.palette.common.white,.05):p(o.palette.common.black,.02),"& fieldset":{borderColor:o.palette.mode==="dark"?p(o.palette.common.white,.2):p(o.palette.common.black,.2)},"&:hover fieldset":{borderColor:o.palette.mode==="dark"?p(o.palette.common.white,.3):p(o.palette.common.black,.3)},"&.Mui-focused fieldset":{borderColor:o.palette.primary.main}},"& .MuiInputLabel-root":{color:o.palette.text.secondary},"& .MuiInputLabel-root.Mui-focused":{color:o.palette.primary.main},"& .MuiInputBase-input":{color:o.palette.text.primary}}}},disabled:C})}),e.jsxs(Et,{size:"small",sx:{width:"120px"},children:[e.jsx(Ve,{sx:{color:o.palette.text.secondary},children:"Priority"}),e.jsxs(Rt,{value:W,onChange:a=>u(a.target.value),label:"Priority",disabled:C,sx:{color:o.palette.text.primary,"& .MuiOutlinedInput-notchedOutline":{borderColor:o.palette.mode==="dark"?p(o.palette.common.white,.2):p(o.palette.common.black,.2)},"&:hover .MuiOutlinedInput-notchedOutline":{borderColor:o.palette.mode==="dark"?p(o.palette.common.white,.3):p(o.palette.common.black,.3)},"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:o.palette.primary.main},"& .MuiSvgIcon-root":{color:o.palette.text.secondary}},MenuProps:{PaperProps:{sx:{backgroundColor:o.palette.background.paper,"& .MuiMenuItem-root":{color:o.palette.text.primary,"&:hover":{backgroundColor:o.palette.action.hover},"&.Mui-selected":{backgroundColor:p(o.palette.primary.main,.2),"&:hover":{backgroundColor:p(o.palette.primary.main,.3)}}}}}},children:[e.jsx(ie,{value:"",children:"None"}),e.jsx(ie,{value:"low",children:"Low"}),e.jsx(ie,{value:"medium",children:"Medium"}),e.jsx(ie,{value:"high",children:"High"})]})]})]}),e.jsx(Re,{label:"Description",value:b,onChange:a=>P(a.target.value),multiline:!0,rows:1,size:"small",fullWidth:!0,disabled:C,sx:{"& .MuiOutlinedInput-root":{backgroundColor:o.palette.mode==="dark"?p(o.palette.common.white,.05):p(o.palette.common.black,.02),"& fieldset":{borderColor:o.palette.mode==="dark"?p(o.palette.common.white,.2):p(o.palette.common.black,.2)},"&:hover fieldset":{borderColor:o.palette.mode==="dark"?p(o.palette.common.white,.3):p(o.palette.common.black,.3)},"&.Mui-focused fieldset":{borderColor:o.palette.primary.main}},"& .MuiInputLabel-root":{color:o.palette.text.secondary},"& .MuiInputLabel-root.Mui-focused":{color:o.palette.primary.main},"& .MuiInputBase-input":{color:o.palette.text.primary}}}),e.jsxs(f,{sx:{display:"flex",justifyContent:"flex-end",gap:1,mt:"auto"},children:[e.jsx(xe,{onClick:J,disabled:C,size:"small",sx:{color:o.palette.text.secondary,"&:hover":{backgroundColor:o.palette.action.hover}},children:"Cancel"}),e.jsx(xe,{type:"submit",variant:"contained",color:"primary",disabled:C||c,size:"small",sx:{backgroundColor:o.palette.primary.main,color:o.palette.primary.contrastText,"&:hover":{backgroundColor:o.palette.primary.dark},"&:disabled":{backgroundColor:p(o.palette.primary.main,.3),color:p(o.palette.primary.contrastText,.5)}},children:C?e.jsx(Tt,{size:20,color:"inherit"}):"Add Task"})]})]})})})})},Ae=[{value:"high",label:"P1",color:"#e53935"},{value:"medium",label:"P2",color:"#fb8c00"},{value:"low",label:"P3",color:"#1e88e5"},{value:"",label:"P4",color:"#ffffff"}],lr=({open:r,onClose:l,task:t,onUpdate:s,onToggleComplete:c})=>{var a,M;const d=le(),{tags:x,categories:o}=je(),[j,O]=n.useState(t.title),[I,y]=n.useState(t.description||""),[b,P]=n.useState(t.dueDate?new Date(t.dueDate):null),[v,L]=n.useState(t.priority||""),[W,u]=n.useState(!1),[A,T]=n.useState(null),[D,q]=n.useState(null),[N,F]=n.useState(null),C=n.useMemo(()=>{var w;const i=(w=t.categoryId)!=null?w:t.category;return i?o.find(z=>z.id===i):void 0},[t.categoryId,t.category,o]),Y=n.useMemo(()=>{var i;return((i=t.tags)!=null?i:[]).map(w=>x.find(z=>z.id===w)).filter(Boolean)},[t.tags,x]),_=n.useMemo(()=>x.filter(i=>{var w;return!((w=t.tags)!=null?w:[]).includes(i.id)}),[x,t.tags]),k=n.useCallback(i=>{var z;const w=(z=t.tags)!=null?z:[];w.includes(i)||(s(t.id,{tags:[...w,i],updatedAt:new Date}),T(null))},[t.id,t.tags,s]),Q=n.useCallback(i=>{var z;const w=((z=t.tags)!=null?z:[]).filter(ee=>ee!==i);s(t.id,{tags:w,updatedAt:new Date})},[t.id,t.tags,s]);n.useEffect(()=>{r&&t&&(O(t.title),y(t.description||""),P(t.dueDate?new Date(t.dueDate):null),L(t.priority||""))},[r,t]);const $=n.useMemo(()=>{var i;return(i=Ae.find(w=>w.value===v))!=null?i:Ae[3]},[v]),X=n.useCallback(()=>{c(t.id)},[t.id,c]),J=n.useCallback(()=>ce(void 0,null,function*(){var w;const i={};if(j!==t.title&&(i.title=j),I!==(t.description||"")&&(i.description=I||void 0),((w=b==null?void 0:b.getTime())!=null?w:null)!==(t.dueDate?new Date(t.dueDate).getTime():null)&&(i.dueDate=b||void 0),(v||"")!==(t.priority||"")&&(i.priority=v||void 0),Object.keys(i).length!==0)try{u(!0),yield s(t.id,ze(fe({},i),{updatedAt:new Date}))}finally{u(!1)}}),[j,I,b,v,t,s]),G=n.useCallback(i=>{L(i),s(t.id,{priority:i||void 0,updatedAt:new Date}),q(null)},[t.id,s]);return e.jsx(Ze,{open:r,onClose:l,maxWidth:!1,PaperProps:{sx:{width:"90vw",maxWidth:720,minHeight:400,maxHeight:"85vh",borderRadius:2,backgroundColor:d.palette.background.paper,boxShadow:d.palette.mode==="dark"?"0 24px 48px rgba(0, 0, 0, 0.4)":"0 24px 48px rgba(0, 0, 0, 0.12)"}},children:e.jsxs(Ue,{sx:{p:0,display:"flex",flexDirection:"column",minHeight:400},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,py:1.5,borderBottom:1,borderColor:"divider"},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(kt,{sx:{fontSize:"1.25rem",color:"text.secondary"}}),e.jsx(ae,{variant:"subtitle1",sx:{fontWeight:600,fontSize:"0.9375rem"},children:(a=C==null?void 0:C.name)!=null?a:"Inbox"})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:.25},children:[e.jsx(ue,{size:"small",sx:{color:"text.secondary"},children:e.jsx(Ot,{fontSize:"small"})}),e.jsx(ue,{size:"small",sx:{color:"text.secondary"},children:e.jsx(Wt,{fontSize:"small"})}),e.jsx(ue,{size:"small",sx:{color:"text.secondary"},children:e.jsx(Bt,{fontSize:"small"})}),e.jsx(ue,{size:"small",onClick:l,sx:{color:"text.secondary"},children:e.jsx(Lt,{fontSize:"small"})})]})]}),e.jsxs(f,{sx:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs(f,{sx:{flex:2,display:"flex",flexDirection:"column",minWidth:0,borderRight:1,borderColor:"divider"},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"flex-start",gap:1,px:2,py:2},children:[e.jsx(Nt,{checked:t.completed,onChange:X,sx:{p:.25,mt:.25}}),e.jsx(Re,{value:j,onChange:i=>O(i.target.value),onBlur:J,variant:"standard",fullWidth:!0,multiline:!0,maxRows:4,InputProps:{disableUnderline:!0,sx:{fontSize:"1.125rem",fontWeight:600,textDecoration:t.completed?"line-through":"none",color:t.completed?"text.secondary":"text.primary"}}})]}),e.jsxs(f,{sx:{px:2,pb:2},children:[e.jsx(f,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:e.jsx("span",{style:{fontSize:"0.875rem",color:d.palette.text.secondary},children:"Description"})}),e.jsx(Re,{value:I,onChange:i=>y(i.target.value),onBlur:J,placeholder:"Add a more detailed description...",multiline:!0,minRows:2,maxRows:8,fullWidth:!0,size:"small",sx:{"& .MuiOutlinedInput-root":{backgroundColor:p(d.palette.text.primary,.04),fontSize:"0.875rem","& fieldset":{borderColor:"transparent"},"&:hover fieldset":{borderColor:"divider"},"&.Mui-focused fieldset":{borderColor:"primary.main"}}}})]})]}),e.jsxs(f,{sx:{flex:1,minWidth:200,maxWidth:260,p:2,display:"flex",flexDirection:"column",gap:1.5},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(Ft,{sx:{fontSize:"1.125rem",color:"text.secondary"}}),e.jsx(ae,{variant:"body2",sx:{color:"text.secondary"},children:(M=C==null?void 0:C.name)!=null?M:"Inbox"})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(ge,{sx:{fontSize:"1.125rem",color:"text.secondary",flexShrink:0}}),e.jsxs(f,{component:"button",onClick:i=>q(i.currentTarget),sx:{flex:1,display:"flex",alignItems:"center",gap:.75,py:.75,px:1,border:"1px solid transparent",borderRadius:1,backgroundColor:"transparent",cursor:"pointer",fontSize:"0.875rem",color:"text.primary",fontFamily:"inherit",textAlign:"left",transition:"background-color 0.15s, border-color 0.15s","&:hover":{backgroundColor:p(d.palette.text.primary,.04),borderColor:"divider"}},children:[e.jsx(ge,{sx:{fontSize:"1rem",color:$.color==="#ffffff"?d.palette.divider:$.color}}),e.jsx(ae,{variant:"body2",sx:{flex:1},children:$.label})]}),e.jsx(Ee,{anchorEl:D,open:!!D,onClose:()=>q(null),PaperProps:{sx:{minWidth:140}},children:Ae.map(i=>e.jsxs(ie,{onClick:()=>G(i.value),selected:v===i.value,children:[e.jsx(be,{sx:{minWidth:36},children:e.jsx(ge,{sx:{fontSize:"1.125rem",color:i.color==="#ffffff"?d.palette.divider:i.color}})}),e.jsx(pe,{children:i.label})]},i.value||"p4"))})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:1,width:"100%"},children:[e.jsx(Xe,{sx:{fontSize:"1.125rem",color:"text.secondary",flexShrink:0}}),e.jsx(f,{component:"button",onClick:i=>F(i.currentTarget),sx:{flex:1,display:"flex",alignItems:"center",gap:.75,py:.75,px:1,border:"1px solid transparent",borderRadius:1,backgroundColor:"transparent",cursor:"pointer",fontSize:"0.875rem",color:"text.primary",fontFamily:"inherit",textAlign:"left",transition:"background-color 0.15s, border-color 0.15s","&:hover":{backgroundColor:p(d.palette.text.primary,.04),borderColor:"divider"}},children:e.jsx(ae,{variant:"body2",sx:{flex:1},children:b?et(b)?"Today":de(b,"MMM d"):"No date"})}),e.jsx(tt,{anchorEl:N,value:b,onClose:()=>F(null),onChange:i=>{P(i?se(i):null),s(t.id,{dueDate:i?se(i):void 0,updatedAt:new Date})}})]}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[e.jsx(Je,{sx:{fontSize:"1.125rem",color:"text.secondary"}}),e.jsxs(f,{sx:{display:"flex",gap:.5,flexWrap:"wrap"},children:[Y.map(i=>e.jsx(ye,{label:i.name,size:"small",onDelete:()=>Q(i.id),sx:{fontSize:"0.75rem",height:22,bgcolor:i.color||"default",color:i.color?"white":"inherit"}},i.id)),e.jsx(ye,{icon:e.jsx(_t,{sx:{fontSize:"0.875rem !important"}}),label:"Add",size:"small",variant:"outlined",onClick:i=>T(i.currentTarget),sx:{fontSize:"0.75rem",height:24,cursor:"pointer"}}),e.jsx(Ee,{anchorEl:A,open:!!A,onClose:()=>T(null),PaperProps:{sx:{minWidth:180,maxHeight:280}},children:_.length===0?e.jsx(ie,{disabled:!0,children:e.jsx(pe,{children:x.length===0?"No tags yet":"All tags added"})}):_.map(i=>e.jsxs(ie,{onClick:()=>k(i.id),children:[e.jsx(be,{sx:{minWidth:32},children:e.jsx(f,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:i.color||d.palette.divider}})}),e.jsx(pe,{children:i.name})]},i.id))})]})]})]})]})]})})};export{Zt as I,ar as T,lr as a,sr as b,Ie as c};
