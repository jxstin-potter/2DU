const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Login-jxJfcizA.js","assets/js/vendor-BwNiVhmj.js","assets/js/mui-z4ihkPrE.js","assets/js/utils-DwmbZkdi.js","assets/js/Settings-CO6GB-44.js","assets/js/Today-CSFUL7X0.js","assets/js/tasksService-DHXsAsTk.js","assets/js/TaskDetailModal-CKBa4nUZ.js","assets/js/TodayAddTaskButton-1Lxusnso.js","assets/js/Completed-B-ZERcmI.js","assets/js/Upcoming-DVzELw1L.js","assets/css/Upcoming-CR9TS4G5.css","assets/js/Tags-BX7FFnZL.js","assets/js/Inbox-D1vKGsho.js"])))=>i.map(i=>d[i]);
var zt=Object.defineProperty,Ot=Object.defineProperties;var Wt=Object.getOwnPropertyDescriptors;var me=Object.getOwnPropertySymbols;var Ne=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var Se=(t,o,r)=>o in t?zt(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,P=(t,o)=>{for(var r in o||(o={}))Ne.call(o,r)&&Se(t,r,o[r]);if(me)for(var r of me(o))Ke.call(o,r)&&Se(t,r,o[r]);return t},$=(t,o)=>Ot(t,Wt(o));var Ge=(t,o)=>{var r={};for(var a in t)Ne.call(t,a)&&o.indexOf(a)<0&&(r[a]=t[a]);if(t!=null&&me)for(var a of me(t))o.indexOf(a)<0&&Ke.call(t,a)&&(r[a]=t[a]);return r};var qe=(t,o,r)=>Se(t,typeof o!="symbol"?o+"":o,r);var k=(t,o,r)=>new Promise((a,n)=>{var c=u=>{try{d(r.next(u))}catch(h){n(h)}},l=u=>{try{d(r.throw(u))}catch(h){n(h)}},d=u=>u.done?a(u.value):Promise.resolve(u.value).then(c,l);d((r=r.apply(t,o)).next())});import{z as _t,A as Bt,B as Ht,D as Vt,r as s,E as Ut,F as X,H as Qe,I as Ie,J as $t,K as Nt,L as Kt,M as Gt,N as qt,O as Qt,Q as Xt,S as Xe,U as Ye,V as Yt,W as Jt,j as e,X as Zt,Y as er,Z as tr,$ as rr,a0 as Fe,a1 as Te,a2 as De,a3 as Le,a4 as ke,a5 as or,a6 as ar,a7 as lt,a8 as ct,a9 as dt,aa as ut,ab as sr,ac as nr,ad as U,ae as ir,af as lr}from"./vendor-BwNiVhmj.js";import{a as I,c as cr,B as f,S as dr,A as pt,b as ur,T as w,d as N,P as pr,e as hr,f as mr,C as Je,h as ht,u as le,I as gr,i as xr,E as yr,j as fr,k as br,L as se,l as wr,m as q,n as Q,D as kr,o as mt,p as ie,q as Me,r as jr,s as gt,H as vr,M as Ze,t as Ee,v as xt,w as K,x as Cr,K as Sr,y as ye,z as yt,F as ft,G as fe,U as Ir,J as Er,N as Pr,O as Tr,Q as ne,R as Ae,V as et,W as tt,X as Mr,Y as Ar,Z as Fr,_ as Dr,$ as Lr,a0 as Rr,a1 as zr,a2 as Or,a3 as Wr,a4 as _r,a5 as Br,a6 as Hr,a7 as Vr,a8 as Ur,a9 as $r}from"./mui-z4ihkPrE.js";import{p as Re,a2 as Nr,a3 as Kr,a4 as Gr,a5 as qr,a6 as Qr,a7 as Xr,b as Yr,a8 as Jr,d as Zr}from"./utils-DwmbZkdi.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function r(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(n){if(n.ep)return;n.ep=!0;const c=r(n);fetch(n.href,c)}})();const eo="modulepreload",to=function(t){return"/2DU/"+t},rt={},ee=function(o,r,a){let n=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(r.map(u=>{if(u=to(u),u in rt)return;rt[u]=!0;const h=u.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${m}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":eo,h||(p.as="script"),p.crossOrigin="",p.href=u,d&&p.setAttribute("nonce",d),document.head.appendChild(p),h)return new Promise((g,S)=>{p.addEventListener("load",g),p.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function c(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return n.then(l=>{for(const d of l||[])d.status==="rejected"&&c(d.reason);return o().catch(c)})},ot="#5B7A9E",ro="#6A8AA8",oo="#4A6582",ao="#7B9BB8",C={brand:{black:"#0F1419",blackElevated:"#161D26",gold:ot,goldHover:ro,goldActive:oo},primary:{main:ot,light:ao,contrastText:"#F5F5F5"},secondary:{main:"#8B9AAF",contrastText:"#0F1419"},success:{main:"#4A9B6D",light:"#6BB88A",dark:"#3A7A55"},warning:{main:"#B8954A",light:"#D4B56A",dark:"#947538"},error:{main:"#B85C5C",light:"#D47B7B",dark:"#944848"}},so=t=>{const r={palette:{mode:"dark",primary:{main:C.primary.main,dark:C.brand.goldActive,light:C.primary.light,contrastText:C.primary.contrastText},secondary:{main:C.secondary.main,contrastText:C.secondary.contrastText},background:{default:C.brand.black,paper:C.brand.blackElevated},text:{primary:"#F5F5F5",secondary:"rgba(245, 245, 245, 0.72)"},divider:"rgba(245, 245, 245, 0.12)",error:{main:C.error.main,light:C.error.light,dark:C.error.dark},success:{main:C.success.main,light:C.success.light,dark:C.success.dark},warning:{main:C.warning.main,light:C.warning.light,dark:C.warning.dark},action:{hover:I(C.primary.main,.08),selected:I(C.primary.main,.12),focus:I(C.primary.main,.14),disabled:"rgba(245, 245, 245, 0.28)",disabledBackground:"rgba(245, 245, 245, 0.08)"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},components:{MuiCssBaseline:{styleOverrides:{body:{scrollbarColor:`rgba(245,245,245,0.28) ${C.brand.black}`,"&::-webkit-scrollbar, & *::-webkit-scrollbar":{backgroundColor:C.brand.black},"&::-webkit-scrollbar-thumb, & *::-webkit-scrollbar-thumb":{borderRadius:8,backgroundColor:"rgba(245,245,245,0.18)",minHeight:24,border:`3px solid ${C.brand.black}`},"&::-webkit-scrollbar-thumb:focus, & *::-webkit-scrollbar-thumb:focus":{backgroundColor:"rgba(245,245,245,0.28)"},"&::-webkit-scrollbar-thumb:active, & *::-webkit-scrollbar-thumb:active":{backgroundColor:"rgba(245,245,245,0.28)"},"&::-webkit-scrollbar-thumb:hover, & *::-webkit-scrollbar-thumb:hover":{backgroundColor:"rgba(245,245,245,0.22)"},"&::-webkit-scrollbar-corner, & *::-webkit-scrollbar-corner":{backgroundColor:C.brand.black}}}},MuiButton:{styleOverrides:{contained:{backgroundColor:C.brand.gold,color:C.primary.contrastText,"&:hover":{backgroundColor:C.brand.goldHover},"&:active":{backgroundColor:C.brand.goldActive}},outlined:{borderColor:"rgba(245,245,245,0.18)",color:"#F5F5F5","&:hover":{borderColor:I(C.brand.gold,.5),backgroundColor:I(C.brand.gold,.08)}}}},MuiLink:{styleOverrides:{root:{color:C.primary.main,"&:hover":{color:C.brand.goldHover}}}},MuiCheckbox:{styleOverrides:{root:{color:"rgba(245,245,245,0.42)","&.Mui-checked":{color:C.primary.main}}}},MuiOutlinedInput:{styleOverrides:{root:{"&.Mui-focused .MuiOutlinedInput-notchedOutline":{borderColor:C.primary.main}},notchedOutline:{borderColor:"rgba(245,245,245,0.18)"}}},MuiTab:{styleOverrides:{root:{textTransform:"none"}}},MuiTabs:{styleOverrides:{indicator:{backgroundColor:C.primary.main}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}};return cr(r)},re={apiKey:"AIzaSyBnQUqYLVesyv6FgmhizP7lUQxXe7Fwpbg",authDomain:"du-app-ff4ae.firebaseapp.com",projectId:"du-app-ff4ae",storageBucket:"du-app-ff4ae.appspot.com",messagingSenderId:"300312760528",appId:"1:300312760528:web:87b3c9da666ee2fd4fced5"},bt={apiKey:re.apiKey,authDomain:re.authDomain,projectId:re.projectId,storageBucket:re.storageBucket,messagingSenderId:re.messagingSenderId,appId:re.appId},no=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"],at=no.filter(t=>!bt[t]);if(at.length>0)throw new Error(`Missing required Firebase configuration fields: ${at.join(", ")}`);let Pe,_,V,st=!1;try{Pe=_t(bt),_=Bt(Pe),V=Ht(Pe)}catch(t){throw new Error(`Failed to initialize Firebase: ${t instanceof Error?t.message:"Unknown error"}`)}const io=()=>k(void 0,null,function*(){if(!st)try{yield Vt(_),st=!0}catch(t){if(t.code!=="failed-precondition"&&t.code!=="unimplemented")throw t}}),ge=(t,o,r={},a)=>{new Date().toISOString(),Object.entries(r).filter(([n,c])=>c!==void 0).map(([n,c])=>`[${n}:${c}]`).join(" ")},L={debug:(t,o={},r)=>ge("DEBUG",t,o),info:(t,o={},r)=>ge("INFO",t,o),warn:(t,o={},r)=>ge("WARN",t,o),error:(t,o={},r)=>ge("ERROR",t,o),component:t=>({debug:(o,r)=>L.debug(o,{component:t},r),info:(o,r)=>L.info(o,{component:t},r),warn:(o,r)=>L.warn(o,{component:t},r),error:(o,r)=>L.error(o,{component:t},r)}),service:t=>({debug:(o,r)=>L.debug(o,{service:t},r),info:(o,r)=>L.info(o,{service:t},r),warn:(o,r)=>L.warn(o,{service:t},r),error:(o,r)=>L.error(o,{service:t},r)}),hook:t=>({debug:(o,r)=>L.debug(o,{hook:t},r),info:(o,r)=>L.info(o,{hook:t},r),warn:(o,r)=>L.warn(o,{hook:t},r),error:(o,r)=>L.error(o,{hook:t},r)})},ae=t=>t.trim().toLowerCase(),xe=(t,o)=>{switch(t==null?void 0:t.code){case"auth/invalid-email":return new Error("Please enter a valid email address.");case"auth/user-disabled":return new Error("This account has been disabled.");case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return new Error("Invalid email or password.");case"auth/too-many-requests":return new Error("Too many attempts. Please try again later.");case"auth/network-request-failed":return new Error("Network error. Check your connection and try again.");case"auth/operation-not-allowed":return new Error("Email/password sign-in is not enabled for this project.");case"auth/account-exists-with-different-credential":return new Error("This email is linked to a different sign-in method (e.g. Google). Use that method or reset your password if applicable.");case"auth/requires-recent-login":return new Error("For security, please sign in again and retry this action.");case"auth/weak-password":return new Error("Password is too weak. Use at least 6 characters.");default:return t instanceof Error?t:new Error(o)}},wt=s.createContext({user:null,loading:!0,login:()=>k(void 0,null,function*(){}),signup:()=>k(void 0,null,function*(){}),loginWithGoogle:()=>k(void 0,null,function*(){return"cancelled"}),loginWithApple:()=>k(void 0,null,function*(){return"cancelled"}),logout:()=>k(void 0,null,function*(){}),updateUserProfile:()=>k(void 0,null,function*(){}),requestPasswordReset:()=>k(void 0,null,function*(){}),addPassword:()=>k(void 0,null,function*(){}),authProviders:[],hasPasswordProvider:!1}),ze=()=>s.useContext(wt),lo=({children:t})=>{const[o,r]=s.useState(null),[a,n]=s.useState(null),[c,l]=s.useState(!0),[d,u]=s.useState(!1),h=s.useCallback(b=>k(void 0,null,function*(){yield Ut(V,b?tr:rr)}),[]),m=s.useCallback(b=>k(void 0,null,function*(){const x=X(_,"users",b.uid);if((yield Qe(x)).exists())return;const y={email:ae(b.email||""),name:b.displayName||"",profilePicture:b.photoURL||void 0,preferences:{theme:"dark",highContrast:!1,notifications:!0,defaultView:"today"}};yield Ie(x,y,{merge:!0})}),[]),p=b=>k(void 0,null,function*(){try{const x=X(_,"users",b.uid),i=yield Qe(x);if(i.exists()){const y=i.data();return P({id:b.uid},y)}else return{id:b.uid,email:b.email||"",name:b.displayName||"",preferences:{theme:"dark",highContrast:!1,notifications:!0,defaultView:"today"}}}catch(x){throw L.error("Error fetching user data",{action:"fetchUserData"},x),x}});s.useEffect(()=>{let b;return k(void 0,null,function*(){try{try{yield io()}catch(i){}b=Zt(V,i=>k(void 0,null,function*(){l(!0);try{if(i){n(i);try{yield er(V)}catch(y){}yield new Promise(y=>setTimeout(y,1e3));try{yield m(i);const y=yield p(i);r(y)}catch(y){const M={id:i.uid,email:i.email||"",name:i.displayName||"",profilePicture:i.photoURL||void 0,preferences:{theme:"dark",highContrast:!1,notifications:!0,defaultView:"today"}};r(M)}}else n(null),r(null)}catch(y){i||(n(null),r(null))}finally{l(!1),u(!0)}}))}catch(i){u(!0),l(!1)}}),()=>{b&&b()}},[m]);const g=s.useCallback((b,x,i=!0)=>k(void 0,null,function*(){try{l(!0),yield h(i),yield $t(V,ae(b),x)}catch(y){throw xe(y,"Failed to sign in. Please try again.")}finally{l(!1)}}),[h]),S=s.useCallback((b,x,i,y=!0)=>k(void 0,null,function*(){try{l(!0),yield h(y);const M=ae(b),D=(yield Nt(V,M,x)).user,te={email:M,name:i.trim(),preferences:{theme:"dark",highContrast:!1,notifications:!0,defaultView:"today"}};yield Ie(X(_,"users",D.uid),te)}catch(M){throw xe(M,"Failed to create account.")}finally{l(!1)}}),[h]),F=s.useCallback(b=>k(void 0,null,function*(){try{l(!0),yield Kt(V,ae(b))}catch(x){if((x==null?void 0:x.code)==="auth/user-not-found")return;throw xe(x,"Failed to send password reset email.")}finally{l(!1)}}),[]),T=s.useMemo(()=>{const b=((a==null?void 0:a.providerData)||[]).map(x=>x==null?void 0:x.providerId).filter(x=>!!x);return Array.from(new Set(b))},[a==null?void 0:a.providerData]),j=T.includes("password"),E=s.useCallback(b=>k(void 0,null,function*(){var y;const x=V.currentUser;if(!x)throw new Error("You must be signed in to add a password.");const i=x.email?ae(x.email):"";if(!i)throw new Error("No email found for your account.");try{if(l(!0),(y=x.providerData)!=null&&y.some(A=>A.providerId==="password")){yield Gt(x,b);return}const M=qt.credential(i,b);yield Qt(x,M)}catch(M){throw xe(M,"Failed to add password.")}finally{l(!1)}}),[]),B=s.useCallback((b=!0)=>k(void 0,null,function*(){try{l(!0),yield h(b);const x=new Xt;x.setCustomParameters({prompt:"select_account"});try{const i=yield Xe(V,x);return yield m(i.user),"success"}catch(i){if((i==null?void 0:i.code)==="auth/popup-closed-by-user"||(i==null?void 0:i.code)==="auth/cancelled-popup-request")return"cancelled";if((i==null?void 0:i.code)==="auth/popup-blocked")return yield Ye(V,x),"redirect";throw i}}catch(x){throw new Error("Google sign-in failed. Please try again.")}finally{l(!1)}}),[h,m]),H=s.useCallback((b=!0)=>k(void 0,null,function*(){try{l(!0),yield h(b);const x=new Yt("apple.com");x.addScope("email"),x.addScope("name");try{const i=yield Xe(V,x);return yield m(i.user),"success"}catch(i){if((i==null?void 0:i.code)==="auth/popup-closed-by-user"||(i==null?void 0:i.code)==="auth/cancelled-popup-request")return"cancelled";if((i==null?void 0:i.code)==="auth/popup-blocked")return yield Ye(V,x),"redirect";throw(i==null?void 0:i.code)==="auth/operation-not-allowed"?new Error("Apple sign-in is not enabled for this project yet."):i}}catch(x){throw x instanceof Error?x:new Error("Apple sign-in failed. Please try again.")}finally{l(!1)}}),[h,m]),R=s.useCallback(()=>k(void 0,null,function*(){try{yield Jt(V)}catch(b){throw new Error("Failed to log out")}}),[]),W=s.useCallback(b=>k(void 0,null,function*(){if(!(a!=null&&a.uid))return;const x=X(_,"users",a.uid);yield Ie(x,b,{merge:!0});const i=yield p(a);r(i)}),[a]),z=s.useMemo(()=>({user:o,loading:c,login:g,signup:S,loginWithGoogle:B,loginWithApple:H,logout:R,updateUserProfile:W,requestPasswordReset:F,addPassword:E,authProviders:T,hasPasswordProvider:j}),[o,c,g,S,B,H,R,W,F,E,T,j]);return d?e.jsx(wt.Provider,{value:z,children:t}):e.jsx("div",{children:"Initializing authentication..."})},ua=[{code:"en",name:"English"},{code:"es",name:"Español"},{code:"fr",name:"Français"},{code:"de",name:"Deutsch"},{code:"ja",name:"日本語"},{code:"zh",name:"中文"}],Oe="en",We={en:Yr,es:Xr,fr:Qr,de:qr,ja:Gr,zh:Kr},be={en:{"app.name":"2DU Task Management","app.description":"A simple and efficient task management application","app.loading":"Loading...","app.error":"An error occurred","app.retry":"Retry","app.cancel":"Cancel","app.save":"Save","app.delete":"Delete","app.edit":"Edit","app.create":"Create","app.search":"Search","app.filter":"Filter","app.sort":"Sort","app.clear":"Clear","app.confirm":"Confirm","app.close":"Close","settings.title":"Settings","settings.description":"Configure your application preferences","settings.tabsLabel":"Settings sections","settings.tabs.accessibility":"Accessibility","settings.tabs.language":"Language","settings.language":"Language","settings.language.select":"Select Language","settings.language.note":"Changes will take effect immediately","settings.accessibility":"Accessibility","settings.accessibility.description":"Configure accessibility settings to improve your experience","settings.accessibility.highContrast":"High Contrast Mode","settings.accessibility.highContrastDescription":"Increase contrast for better visibility","settings.accessibility.reducedMotion":"Reduced Motion","settings.accessibility.reducedMotionDescription":"Reduce animations and motion effects","settings.accessibility.fontSize":"Font Size","settings.accessibility.fontSizeDescription":"Adjust the size of text throughout the application","settings.accessibility.fontSize.increase":"Increase Font Size","settings.accessibility.fontSize.decrease":"Decrease Font Size","settings.accessibility.fontSize.reset":"Reset Font Size","settings.accessibility.focusVisible":"Focus Visibility","settings.accessibility.focusVisibleDescription":"Enhance the visibility of focused elements","settings.accessibility.screenReader":"Screen Reader Mode","settings.accessibility.screenReaderDescription":"Optimize the application for screen readers","settings.theme.toggle":"Toggle Theme","sidebar.inbox":"Inbox","sidebar.today":"Today","sidebar.upcoming":"Upcoming","sidebar.calendar":"Calendar","sidebar.tags":"Tags","sidebar.completed":"Completed","sidebar.analytics":"Analytics","sidebar.settings":"Settings","sidebar.welcome":"Welcome, {userName}","sidebar.user":"User","sidebar.helpResources":"Help & resources","sidebar.keyboardShortcuts":"Keyboard shortcuts","sidebar.logout":"Log out","sidebar.openProfileMenu":"Open profile menu","shortcuts.title":"Keyboard Shortcuts","auth.login":"Login","auth.signup":"Sign Up","auth.logout":"Logout","auth.email":"Email","auth.password":"Password","auth.confirmPassword":"Confirm Password","auth.forgotPassword":"Forgot Password?","auth.resetPassword":"Reset Password","auth.noAccount":"Don't have an account?","auth.haveAccount":"Already have an account?","auth.loginError":"Login failed. Please check your credentials.","auth.signupError":"Sign up failed. Please try again.","auth.passwordMismatch":"Passwords do not match.","auth.weakPassword":"Password is too weak.","auth.emailInUse":"Email is already in use.","auth.invalidEmail":"Invalid email address.","task.title":"Title","task.description":"Description","task.dueDate":"Due Date","task.priority":"Priority","task.status":"Status","task.tags":"Tags","task.addTag":"Add Tag","task.removeTag":"Remove Tag","task.create":"Create Task","task.edit":"Edit Task","task.delete":"Delete Task","task.complete":"Complete Task","task.uncomplete":"Uncomplete Task","task.reorder":"Reorder Tasks","task.filterByStatus":"Filter by Status","task.filterByTag":"Filter by Tag","task.sortByDueDate":"Sort by Due Date","task.search":"Search Tasks","task.noTasks":"No tasks found","task.loading":"Loading tasks...","task.error":"Error loading tasks","status.todo":"To Do","status.inProgress":"In Progress","status.completed":"Completed","priority.low":"Low","priority.medium":"Medium","priority.high":"High","view.today":"Today","view.upcoming":"Upcoming","view.calendar":"Calendar","view.tags":"Tags","view.completed":"Completed","a11y.menuButton":"Menu","a11y.addTaskButton":"Add Task","a11y.taskItem":"Task Item","a11y.taskComplete":"Mark task as complete","a11y.taskUncomplete":"Mark task as uncomplete","a11y.taskEdit":"Edit task","a11y.taskDelete":"Delete task","a11y.taskDrag":"Drag task to reorder","a11y.taskDrop":"Drop task to reorder","a11y.enable":"Enable","a11y.increaseFontSize":"Increase Font Size","a11y.decreaseFontSize":"Decrease Font Size","a11y.resetFontSize":"Reset Font Size","a11y.highContrast":"High Contrast","a11y.reducedMotion":"Reduced Motion","a11y.fontSize":"Font Size","a11y.focusVisible":"Focus Visible","a11y.screenReaderOnly":"Screen Reader Only","a11y.resetAllSettings":"Reset All Settings","error.somethingWentWrong":"Something went wrong","error.unexpectedError":"An unexpected error occurred","error.reloadPage":"Reload Page","error.tryAgain":"Try Again","error.pageLoadFailed":"Error loading page. Please refresh.","common.loading":"Loading...","error.defaultError":"An error occurred. Please try again.","task.dialog.titleRequired":"Title is required","task.dialog.description":"Description (optional)","task.dialog.taskTitle":"Task Title","common.cancel":"Cancel","common.save":"Save"},es:{"app.name":"2DU Gestión de Tareas","app.description":"Una aplicación simple y eficiente para la gestión de tareas","app.loading":"Cargando...","app.error":"Se produjo un error","app.retry":"Reintentar","app.cancel":"Cancelar","app.save":"Guardar","app.delete":"Eliminar","app.edit":"Editar","app.create":"Crear","app.search":"Buscar","app.filter":"Filtrar","app.sort":"Ordenar","app.clear":"Limpiar","app.confirm":"Confirmar","app.close":"Cerrar","sidebar.inbox":"Bandeja de entrada","sidebar.today":"Hoy","sidebar.upcoming":"Próximos","sidebar.calendar":"Calendario","sidebar.tags":"Etiquetas","sidebar.completed":"Completados","sidebar.settings":"Configuración","sidebar.welcome":"Bienvenido, {userName}","sidebar.user":"Usuario"}};let G=Oe;const co=t=>{be[t]&&(G=t,localStorage.setItem("language",t))},nt=()=>G,kt=()=>{const t=localStorage.getItem("language");t&&be[t]?G=t:G=Oe},Z=(t,o)=>{var a,n;const r=((a=be[G])==null?void 0:a[t])||((n=be[Oe])==null?void 0:n[t])||t;return o?Object.entries(o).reduce((c,[l,d])=>c.replace(`{${l}}`,d),r):r},uo=(t,o="PP")=>{const r=typeof t=="string"?Re(t):t;return Zr(r,o,{locale:We[G]})},po=(t,o=new Date)=>{const r=typeof t=="string"?Re(t):t;return Jr(r,o,{locale:We[G]})},ho=(t,o=new Date)=>{const r=typeof t=="string"?Re(t):t;return Nr(r,o,{locale:We[G]})},mo=(t,o)=>new Intl.NumberFormat(G,o).format(t),go=(t,o="USD")=>new Intl.NumberFormat(G,{style:"currency",currency:o}).format(t);kt();const jt=s.createContext({language:"en",setLanguage:()=>{},t:t=>t,formatDate:t=>t.toString(),formatRelativeDate:t=>t.toString(),formatDistanceDate:t=>t.toString(),formatNumber:t=>t.toString(),formatCurrency:t=>t.toString()}),xo=({children:t})=>{const[o,r]=s.useState(nt());s.useEffect(()=>{kt();const c=nt();r(c)},[]);const a=s.useCallback(c=>{co(c),r(c)},[]),n=s.useMemo(()=>({language:o,setLanguage:a,t:Z,formatDate:uo,formatRelativeDate:po,formatDistanceDate:ho,formatNumber:mo,formatCurrency:go}),[o,a]);return e.jsx(jt.Provider,{value:n,children:t})},_e=()=>s.useContext(jt),vt=s.createContext({highContrast:!1,toggleHighContrast:()=>{},reducedMotion:!1,toggleReducedMotion:()=>{},fontSize:16,increaseFontSize:()=>{},decreaseFontSize:()=>{},resetFontSize:()=>{},focusVisible:!1,toggleFocusVisible:()=>{},screenReaderOnly:!1,toggleScreenReaderOnly:()=>{}}),yo=({children:t})=>{const{t:o}=_e(),[r,a]=s.useState(!1),[n,c]=s.useState(!1),[l,d]=s.useState(16),[u,h]=s.useState(!1),[m,p]=s.useState(!1),g=s.useCallback(i=>{i?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast")},[]),S=s.useCallback(()=>{a(i=>{const y=!i;return localStorage.setItem("highContrast",y.toString()),g(y),y})},[g]),F=s.useCallback(i=>{i?document.documentElement.classList.add("reduced-motion"):document.documentElement.classList.remove("reduced-motion")},[]),T=s.useCallback(()=>{c(i=>{const y=!i;return localStorage.setItem("reducedMotion",y.toString()),F(y),y})},[F]),j=s.useCallback(i=>{document.documentElement.style.setProperty("--base-font-size",`${i}px`)},[]),E=s.useCallback(()=>{d(i=>{const y=Math.min(i+2,24);return localStorage.setItem("fontSize",y.toString()),j(y),y})},[j]),B=s.useCallback(()=>{d(i=>{const y=Math.max(i-2,12);return localStorage.setItem("fontSize",y.toString()),j(y),y})},[j]),H=s.useCallback(()=>{d(16),localStorage.setItem("fontSize","16"),j(16)},[j]),R=s.useCallback(i=>{i?document.documentElement.classList.add("focus-visible"):document.documentElement.classList.remove("focus-visible")},[]),W=s.useCallback(()=>{h(i=>{const y=!i;return localStorage.setItem("focusVisible",y.toString()),R(y),y})},[R]),z=s.useCallback(i=>{i?document.documentElement.classList.add("screen-reader-only"):document.documentElement.classList.remove("screen-reader-only")},[]),b=s.useCallback(()=>{p(i=>{const y=!i;return localStorage.setItem("screenReaderOnly",y.toString()),z(y),y})},[z]);s.useEffect(()=>{const i=localStorage.getItem("highContrast")==="true",y=localStorage.getItem("reducedMotion")==="true",M=parseInt(localStorage.getItem("fontSize")||"16",10),A=localStorage.getItem("focusVisible")==="true",D=localStorage.getItem("screenReaderOnly")==="true";a(i),c(y),d(M),h(A),p(D),g(i),F(y),j(M),R(A),z(D)},[R,j,g,F,z]);const x=s.useMemo(()=>({highContrast:r,toggleHighContrast:S,reducedMotion:n,toggleReducedMotion:T,fontSize:l,increaseFontSize:E,decreaseFontSize:B,resetFontSize:H,focusVisible:u,toggleFocusVisible:W,screenReaderOnly:m,toggleScreenReaderOnly:b}),[r,S,n,T,l,E,B,H,u,W,m,b]);return e.jsx(vt.Provider,{value:x,children:t})},pa=()=>s.useContext(vt),fo=s.createContext(void 0),bo=({children:t})=>{const[o,r]=s.useState([]),a=s.useCallback(d=>{r(u=>u.filter(h=>h.id!==d))},[]),n=s.useCallback(d=>{const u=Math.random().toString(36).substring(2,9),h=$(P({},d),{id:u,timestamp:Date.now()});r(m=>[...m,h]),d.autoHideDuration!==0&&setTimeout(()=>{a(u)},d.autoHideDuration||6e3)},[a]),c=s.useCallback(()=>{r([])},[]),l=s.useMemo(()=>({showFeedback:n,hideFeedback:a,clearAllFeedback:c}),[n,a,c]);return s.useEffect(()=>()=>{},[l]),e.jsxs(fo.Provider,{value:l,children:[t,e.jsx(wo,{feedbacks:o,onClose:a})]})},wo=({feedbacks:t,onClose:o})=>{const r=t.reduce((n,c)=>(n[c.type]||(n[c.type]=[]),n[c.type].push(c),n),{}),a=Object.values(r).map(n=>n.slice().sort((c,l)=>l.timestamp-c.timestamp)[0]);return e.jsx(f,{sx:{position:"fixed",bottom:16,right:16,zIndex:9999,display:"flex",flexDirection:"column",gap:1},children:a.map(n=>e.jsx(dr,{open:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{position:"relative",bottom:0,right:0},children:e.jsxs(pt,{severity:n.type,onClose:()=>o(n.id),sx:{width:"100%",minWidth:300},action:n.action&&e.jsx(N,{color:"inherit",size:"small",onClick:n.action.onClick,children:n.action.label}),children:[n.title&&e.jsx(ur,{children:n.title}),e.jsx(w,{variant:"body2",children:n.message})]})},n.id))})},Ct=s.createContext(void 0),ko=({children:t})=>{const[o]=s.useState("dark"),r=s.useCallback(()=>{},[]),a=s.useMemo(()=>({mode:o,toggleColorMode:r}),[o,r]);return e.jsx(Ct.Provider,{value:a,children:t})},we=()=>{const t=s.useContext(Ct);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t},St=s.createContext(void 0),jo=({children:t})=>{const[o,r]=s.useState({isOpen:!1,activeInlineTaskId:null}),a=s.useCallback(()=>{r(d=>$(P({},d),{isOpen:!0,activeInlineTaskId:null}))},[]),n=s.useCallback(()=>{r(d=>$(P({},d),{isOpen:!1}))},[]),c=s.useCallback(d=>{r(u=>$(P({},u),{activeInlineTaskId:d}))},[]),l=s.useMemo(()=>({isOpen:o.isOpen,openModal:a,closeModal:n,activeInlineTaskId:o.activeInlineTaskId,setActiveInlineTaskId:c}),[o.isOpen,o.activeInlineTaskId,a,n,c]);return e.jsx(St.Provider,{value:l,children:t})},vo=()=>{const t=s.useContext(St);if(t===void 0)throw new Error("useTaskModal must be used within a TaskModalProvider");return t},It="search-recently-viewed",Be=8,Co={"/today":{labelKey:"sidebar.today",icon:"today"},"/completed":{labelKey:"sidebar.completed",icon:"completed"},"/settings":{labelKey:"sidebar.settings",icon:"settings"}};function So(){try{const t=localStorage.getItem(It);if(!t)return[];const o=JSON.parse(t);return Array.isArray(o)?o.slice(0,Be):[]}catch(t){return[]}}function Io(t){try{localStorage.setItem(It,JSON.stringify(t.slice(0,Be)))}catch(o){}}const Et=s.createContext(void 0),Eo=({children:t})=>{const[o,r]=s.useState(!1),[a,n]=s.useState(So);s.useEffect(()=>{Io(a)},[a]);const c=s.useCallback(()=>{r(!0)},[]),l=s.useCallback(()=>{r(!1)},[]),d=s.useCallback(h=>{const m=Co[h];m&&n(p=>{const g={path:h,labelKey:m.labelKey,icon:m.icon},S=p.filter(F=>F.path!==h);return[g,...S].slice(0,Be)})},[]),u=s.useMemo(()=>({isOpen:o,openModal:c,closeModal:l,recentViews:a,recordRecentView:d}),[o,c,l,a,d]);return e.jsx(Et.Provider,{value:u,children:t})},He=()=>{const t=s.useContext(Et);if(t===void 0)throw new Error("useSearchModal must be used within a SearchModalProvider");return t},Ve=(t,o,r={},a="error")=>{const n=P({name:t.name,message:t.message,stack:t.stack},r);switch(a){case"error":L.error(o,n);break;case"warn":L.warn(o,n);break;case"info":L.info(o,n);break}},Po=(t,o,r,a={})=>{Ve(t,r,P({component:o},a))},ha=(t,o,r,a={})=>{Ve(t,r,P({service:o},a))},Y=(t,o,r,a={})=>{Ve(t,r,P({hook:o},a))};class To extends s.Component{constructor(){super(...arguments);qe(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,a){Po(r,"ErrorBoundary","Component error",{componentStack:a.componentStack})}render(){var r;return this.state.hasError?this.props.fallback?this.props.fallback:e.jsxs(pr,{elevation:3,sx:{p:4,m:2,display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx(w,{variant:"h4",color:"error",gutterBottom:!0,children:Z("error.somethingWentWrong")}),e.jsx(f,{sx:{my:2},children:e.jsx(w,{variant:"body1",children:((r=this.state.error)==null?void 0:r.message)||Z("error.unexpectedError")})}),e.jsx(N,{variant:"contained",color:"primary",onClick:()=>window.location.reload(),children:Z("error.reloadPage")})]}):this.props.children}}const Pt=({isLoading:t,error:o,children:r,loadingText:a=Z("common.loading"),errorText:n=Z("error.defaultError"),retryAction:c,variant:l="overlay",fullScreen:d=!1})=>{if(o){const u=typeof o=="string"?o:(o==null?void 0:o.message)||n;return e.jsx(f,{sx:{display:"flex",alignItems:"center",p:2,animation:"fadeIn 0.3s ease-out forwards"},children:e.jsx(pt,{severity:"error",action:c&&e.jsx(N,{color:"inherit",size:"small",onClick:c,startIcon:e.jsx(hr,{}),sx:{animation:"fadeIn 0.3s ease-out forwards"},children:Z("error.tryAgain")}),children:e.jsx(w,{variant:"body1",children:u})})})}return t?l==="skeleton"?e.jsx(f,{sx:{animation:"slideIn 0.3s ease-out forwards",width:"100%"},children:[...Array(4)].map((u,h)=>e.jsx(mr,{variant:"rectangular",height:60,sx:{mb:h<3?1:0,background:"linear-gradient(90deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1))",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite",borderRadius:1}},h))}):l==="inline"?e.jsxs(f,{sx:{display:"flex",alignItems:"center",p:2,animation:"fadeIn 0.3s ease-out forwards"},children:[e.jsx(Je,{size:20,sx:{mr:2}}),e.jsx(w,{variant:"body2",children:a})]}):e.jsxs(f,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:1e3,height:d?"100vh":"100%",animation:"fadeIn 0.3s ease-out forwards"},children:[e.jsx(Je,{size:40,sx:{mb:2}}),e.jsx(w,{variant:"body1",children:a})]}):e.jsx(e.Fragment,{children:r})},Mo=({children:t})=>{const{user:o,loading:r}=ze(),a=Fe();return r?e.jsx(f,{sx:{position:"relative",minHeight:"100vh"},children:e.jsx(Pt,{isLoading:!0,fullScreen:!0,variant:"overlay",children:e.jsx(f,{})})}):o?e.jsx(e.Fragment,{children:t}):e.jsx(Te,{to:"/login",replace:!0,state:{from:a}})},Ao=r=>{var a=r,{isCollapsed:t=!1}=a,o=Ge(a,["isCollapsed"]);return e.jsx(ht,$(P({},o),{viewBox:"0 0 24 24",sx:{fontSize:"1.25rem"},children:t?e.jsxs("g",{children:[e.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("line",{x1:"7",y1:"7",x2:"17",y2:"7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"7",y1:"10",x2:"17",y2:"10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"7",y1:"13",x2:"17",y2:"13",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"7",y1:"16",x2:"17",y2:"16",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]}):e.jsxs("g",{children:[e.jsx("rect",{x:"3",y:"4",width:"7",height:"16",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("circle",{cx:"6.5",cy:"7.5",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"10.5",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"13.5",r:"1",fill:"currentColor"}),e.jsx("circle",{cx:"6.5",cy:"16.5",r:"1",fill:"currentColor"}),e.jsx("rect",{x:"12",y:"4",width:"9",height:"16",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),e.jsx("line",{x1:"14",y1:"7",x2:"19",y2:"7",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"14",y1:"10",x2:"19",y2:"10",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"14",y1:"13",x2:"19",y2:"13",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"}),e.jsx("line",{x1:"14",y1:"16",x2:"19",y2:"16",stroke:"currentColor",strokeWidth:"1.2",strokeLinecap:"round"})]})}))},Fo=t=>e.jsx(ht,$(P({},t),{viewBox:"0 0 24 24",children:e.jsx("path",{d:"M7 10l5 5 5-5",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeLinecap:"round",strokeLinejoin:"round"})})),Do=({isCollapsed:t,onToggleCollapse:o,darkMode:r,toggleDarkMode:a,onLogout:n,userName:c,user:l,onOpenShortcutsHelp:d,onOpenSettings:u})=>{const h=le(),m=De(),p=Fe(),{t:g}=_e(),{openModal:S}=vo(),{openModal:F}=He(),[T,j]=s.useState(null),[E,B]=s.useState(null),H=(l==null?void 0:l.name)||c||g("sidebar.user"),R=l==null?void 0:l.profilePicture,W=O=>{j(O.currentTarget)},z=()=>{j(null)},b=O=>{B(O.currentTarget)},x=()=>{B(null)},i=()=>{z(),u?u():m("/settings")},y=()=>{z(),n()},M=()=>{x(),d()},A=.75,D=[{text:g("sidebar.inbox"),icon:e.jsx(gr,{}),path:"/inbox"},{text:g("sidebar.today"),icon:e.jsx(xr,{}),path:"/today"},{text:g("sidebar.upcoming"),icon:e.jsx(yr,{}),path:"/upcoming"},{text:g("sidebar.tags"),icon:e.jsx(fr,{}),path:"/tags"},{text:g("sidebar.completed"),icon:e.jsx(br,{}),path:"/completed"}],te=s.useCallback((O,de)=>{const J=p.pathname===O.path,ue=h.palette.mode==="dark"?I(h.palette.common.white,.1):I(h.palette.common.white,.7),oe=h.palette.primary.main;return e.jsx(se,{button:!0,onClick:()=>m(O.path),sx:{minHeight:32,justifyContent:de?"center":"initial",px:2,py:.5,borderRadius:1,mb:.25,backgroundColor:J?ue:"transparent",color:"text.primary","&:hover":{backgroundColor:J?ue:"action.hover"},"& .MuiListItemIcon-root":{color:J?oe:"text.secondary",minWidth:36}},children:de?e.jsx(wr,{title:O.text,placement:"right",children:e.jsx(q,{sx:{minWidth:0,justifyContent:"center",color:J?oe:"text.secondary","& svg":{fontSize:"1.25rem"}},children:O.icon})}):e.jsxs(e.Fragment,{children:[e.jsx(q,{sx:{minWidth:36,mr:A,justifyContent:"center",color:J?oe:"text.secondary","& svg":{fontSize:"1.25rem"}},children:O.icon}),e.jsx(Q,{primary:O.text,primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.8125rem"}}})]})},O.path)},[p.pathname,m,h.palette.mode,h.palette.common.white,h.palette.primary.main]),ce=t?64:240,Ce={width:ce,flexShrink:0,"& .MuiDrawer-paper":{width:ce,boxSizing:"border-box",backgroundColor:h.palette.background.default,color:h.palette.text.primary,transition:h.transitions.create(["width","transform"],{easing:h.transitions.easing.sharp,duration:h.transitions.duration.enteringScreen}),overflowX:"hidden",border:"none",outline:"none",boxShadow:"none",willChange:"width"}};return e.jsxs(e.Fragment,{children:[e.jsxs(kr,{variant:"permanent",sx:Ce,children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:t?"center":"space-between",p:1,px:1.5,minHeight:40,height:40},children:[t?null:e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:.75,flex:1,minWidth:0},children:[e.jsx(mt,{src:R,alt:H,sx:{width:28,height:28,fontSize:"0.75rem",bgcolor:h.palette.primary.main},children:H.charAt(0).toUpperCase()}),e.jsx(w,{variant:"body2",sx:{fontSize:"0.8125rem",fontWeight:500,maxWidth:140,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:H}),e.jsx(ie,{onClick:W,"aria-label":g("sidebar.openProfileMenu"),size:"small",sx:{color:h.palette.text.primary,p:.25,ml:-.25,"&:hover":{backgroundColor:"action.hover"}},children:e.jsx(Fo,{sx:{fontSize:"1rem"}})})]}),e.jsx(ie,{onClick:o,"aria-label":t?"Open sidebar":"Close sidebar","aria-controls":"sidebar","aria-expanded":!t,sx:{ml:t?0:-.5,mr:t?0:-.5,color:h.palette.text.secondary,p:.5,"&:hover":{color:h.palette.primary.main,backgroundColor:h.palette.action.hover},transition:"all 0.2s ease"},children:e.jsx(Ao,{isCollapsed:t,sx:{fontSize:"1rem"}})})]}),!t&&e.jsxs(e.Fragment,{children:[e.jsxs(Me,{sx:{px:1,"& .MuiListItemIcon-root":{mr:A}},children:[e.jsxs(se,{button:!0,"data-add-task-trigger":!0,onClick:S,sx:{minHeight:32,justifyContent:"initial",px:2,py:.5,borderRadius:1,mb:.25,backgroundColor:"transparent",color:"text.primary","&:hover":{backgroundColor:"action.hover"},"& .MuiListItemIcon-root":{minWidth:36,color:"text.secondary"}},children:[e.jsx(q,{sx:{minWidth:36,justifyContent:"center",color:"text.secondary","& svg":{fontSize:"1.25rem"}},children:e.jsx(f,{sx:{width:24,height:24,borderRadius:"50%",backgroundColor:h.palette.primary.main,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(jr,{sx:{fontSize:"1rem",color:"inherit"}})})}),e.jsx(Q,{primary:"Add task",primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.8125rem",color:"primary.main"}}})]}),e.jsxs(se,{button:!0,onClick:F,sx:{minHeight:32,justifyContent:"initial",px:2,py:.5,borderRadius:1,mb:.25,backgroundColor:"transparent",color:"text.primary","&:hover":{backgroundColor:"action.hover"},"& .MuiListItemIcon-root":{minWidth:36}},children:[e.jsx(q,{sx:{minWidth:36,justifyContent:"center",color:"text.secondary","& svg":{fontSize:"1.25rem"}},children:e.jsx(gt,{})}),e.jsx(Q,{primary:"Search",primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.8125rem"}}})]}),D.map(O=>te(O,!1))]}),e.jsx(f,{sx:{flexGrow:1}}),e.jsx(Me,{sx:{px:1,"& .MuiListItemIcon-root":{mr:A}},children:e.jsxs(se,{button:!0,onClick:b,sx:{minHeight:32,justifyContent:"initial",px:2,py:.5,borderRadius:1,mb:.25,color:"text.primary","&:hover":{backgroundColor:"action.hover"},"& .MuiListItemIcon-root":{color:"text.secondary",minWidth:36}},children:[e.jsx(q,{sx:{minWidth:36,justifyContent:"center",color:"text.secondary","& svg":{fontSize:"1.25rem"}},children:e.jsx(vr,{})}),e.jsx(Q,{primary:g("sidebar.helpResources"),primaryTypographyProps:{variant:"body2",sx:{fontSize:"0.8125rem"}}})]})})]})]}),e.jsxs(Ze,{anchorEl:T,open:!!T,onClose:z,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},disablePortal:!1,children:[e.jsxs(Ee,{onClick:i,children:[e.jsx(q,{children:e.jsx(xt,{fontSize:"small"})}),e.jsx(Q,{primary:g("sidebar.settings")})]}),e.jsx(K,{}),e.jsxs(Ee,{onClick:y,children:[e.jsx(q,{children:e.jsx(Cr,{fontSize:"small"})}),e.jsx(Q,{primary:g("sidebar.logout")})]})]}),e.jsx(Ze,{anchorEl:E,open:!!E,onClose:x,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"left"},disablePortal:!1,children:e.jsxs(Ee,{onClick:M,children:[e.jsx(q,{children:e.jsx(Sr,{fontSize:"small"})}),e.jsx(Q,{primary:g("sidebar.keyboardShortcuts")})]})})]})},Lo=({open:t,onClose:o})=>{const r=le(),a=[{title:"General",items:[{key:"Enter",description:"Open task view"},{key:"X",description:"Select task"},{key:"Ctrl A",description:"Select all tasks"},{key:"↑ or K",description:"Move focus up"},{key:"↓ or J",description:"Move focus down"},{key:"←",description:"Move focus to the left"},{key:"→",description:"Move focus to the right"},{key:"Esc",description:"Dismiss/cancel"},{key:"Z or Ctrl Z",description:"Undo"},{key:"Ctrl K",description:"Open Quick Find"},{key:"?",description:"Show keyboard shortcuts"},{key:"M",description:"Open/close sidebar"}]},{title:"Quick Add",items:[{key:"Q",description:"Add task"},{key:"⇧ Q",description:"Dictate tasks with Ramble"},{key:"#",description:"Pick project"},{key:"/",description:"Pick section"},{key:"+",description:"Add assignee"},{key:"@",description:"Add label"},{key:"P1, P2, P3, P4",description:"Set priority"},{key:"!",description:"Add reminder"}]},{title:"Navigate",items:[{key:"G then H or H",description:"Go to home"},{key:"G then T",description:"Go to Today"}]}],n=c=>{const l=c.split(" ");return e.jsx(f,{sx:{display:"flex",alignItems:"center",gap:.5},children:l.map((d,u)=>d==="↑"?e.jsx(Ir,{sx:{fontSize:"1rem"}},u):d==="↓"?e.jsx(Er,{sx:{fontSize:"1rem"}},u):d==="←"?e.jsx(Pr,{sx:{fontSize:"1rem"}},u):d==="→"?e.jsx(Tr,{sx:{fontSize:"1rem"}},u):d==="⇧"?e.jsx(w,{component:"span",sx:{fontSize:"0.75rem",fontWeight:500,fontFamily:"monospace"},children:"⇧"},u):d==="then"||d==="or"?e.jsx(w,{component:"span",variant:"body2",sx:{mx:.5,color:"text.secondary"},children:d},u):e.jsx(f,{component:"span",sx:{display:"inline-flex",alignItems:"center",justifyContent:"center",minWidth:"24px",height:"24px",px:1,py:.5,borderRadius:"4px",bgcolor:I(r.palette.text.primary,.08),fontFamily:"monospace",fontSize:"0.75rem",fontWeight:500,color:r.palette.text.primary},children:d},u))})};return e.jsxs(ye,{open:t,onClose:o,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,bgcolor:r.palette.background.paper,maxHeight:"80vh"}},children:[e.jsxs(yt,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pb:2},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(w,{variant:"h6",component:"h2",fontWeight:"bold",children:"Keyboard Shortcuts"}),e.jsx(f,{sx:{width:20,height:20,borderRadius:"50%",bgcolor:I(r.palette.text.secondary,.1),display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(w,{variant:"caption",color:"text.secondary",children:"?"})})]}),e.jsx(ie,{onClick:o,size:"small",sx:{color:r.palette.text.secondary,"&:hover":{color:r.palette.text.primary}},children:e.jsx(ft,{})})]}),e.jsx(fe,{sx:{px:3,pb:2,"&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{bgcolor:"transparent"},"&::-webkit-scrollbar-thumb":{bgcolor:I(r.palette.text.secondary,.2),borderRadius:"4px","&:hover":{bgcolor:I(r.palette.text.secondary,.3)}}},children:a.map((c,l)=>e.jsxs(f,{sx:{mb:l<a.length-1?3:0},children:[e.jsx(w,{variant:"subtitle2",fontWeight:"bold",sx:{mb:2,color:r.palette.text.primary,fontSize:"0.875rem"},children:c.title}),e.jsx(f,{sx:{display:"flex",flexDirection:"column",gap:0},children:c.items.map((d,u)=>e.jsxs(Le.Fragment,{children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",py:1.5,px:0},children:[e.jsx(w,{variant:"body2",sx:{fontSize:"0.875rem",color:r.palette.text.primary},children:d.description}),n(d.key)]}),u<c.items.length-1&&e.jsx(K,{sx:{my:0}})]},d.key))}),l<a.length-1&&e.jsx(K,{sx:{mt:2,mb:0}})]},c.title))})]})};function Ro(t,o,r){return new Promise((a,n)=>{const c=URL.createObjectURL(t),l=new Image;l.onload=()=>{URL.revokeObjectURL(c);const d=l.naturalWidth,u=l.naturalHeight;let h=d,m=u;(d>o||u>o)&&(d>u?(h=o,m=u*o/d):(m=o,h=d*o/u));const p=document.createElement("canvas");p.width=Math.round(h),p.height=Math.round(m);const g=p.getContext("2d");if(!g){n(new Error("Canvas not supported"));return}g.drawImage(l,0,0,p.width,p.height),a(p.toDataURL("image/jpeg",r))},l.onerror=()=>{URL.revokeObjectURL(c),n(new Error("Failed to load image"))},l.src=c})}const zo=({open:t,onClose:o})=>{var Ue;const r=le(),{user:a,updateUserProfile:n,addPassword:c,authProviders:l,hasPasswordProvider:d}=ze(),{mode:u,toggleColorMode:h}=we(),[m,p]=s.useState("account"),[g,S]=s.useState((a==null?void 0:a.name)||""),[F,T]=s.useState(null),[j,E]=s.useState(!1),B=s.useRef(null),[H,R]=s.useState(!1),[W,z]=s.useState(""),[b,x]=s.useState(""),[i,y]=s.useState(null),[M,A]=s.useState(null),[D,te]=s.useState(!1);Le.useEffect(()=>{S((a==null?void 0:a.name)||"")},[a==null?void 0:a.name]);const ce=v=>{p(v)},Ce=v=>{S(v.target.value)},O=()=>{const v=g.trim();v&&v!==(a==null?void 0:a.name)&&n({name:v})},de=()=>{var v;T(null),(v=B.current)==null||v.click()},J=v=>k(void 0,null,function*(){var $e;const pe=($e=v.target.files)==null?void 0:$e[0];if(!pe||!(a!=null&&a.id))return;const Rt=4*1024*1024;if(pe.size>Rt){T("Photo must be 4MB or smaller."),v.target.value="";return}if(!pe.type.startsWith("image/")){T("Please select an image file."),v.target.value="";return}E(!0),T(null);try{const he=yield Ro(pe,256,.75);yield n({profilePicture:he})}catch(he){T(he instanceof Error?he.message:"Failed to process photo.")}finally{E(!1),v.target.value=""}}),ue=()=>{n({profilePicture:""})},oe=()=>{},Mt=()=>{y(null),A(null),z(""),x(""),R(!0)},At=()=>k(void 0,null,function*(){if(y(null),A(null),W.length<6){y("Password must be at least 6 characters long.");return}if(W!==b){y("Passwords do not match.");return}te(!0);try{yield c(W),R(!1),A(d?"Password updated.":"Password added. You can now sign in with email & password.")}catch(v){y(v instanceof Error?v.message:"Failed to add password.")}finally{te(!1)}}),Ft=v=>{switch(v){case"google.com":return"Google";case"apple.com":return"Apple";case"password":return"Email / Password";default:return v}},Dt=()=>{},Lt=[{id:"account",label:"Account",icon:e.jsx(Ar,{})},{id:"general",label:"General",icon:e.jsx(xt,{})}];return e.jsxs(ye,{open:t,onClose:o,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{maxWidth:"900px",height:"80vh",maxHeight:"700px",borderRadius:2,overflow:"hidden"}},children:[e.jsxs(fe,{sx:{p:0,height:"100%",display:"flex",flexDirection:"column"},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",p:2,borderBottom:`1px solid ${r.palette.divider}`},children:[e.jsx(w,{variant:"h6",fontWeight:"bold",children:"Settings"}),e.jsx(ie,{onClick:o,size:"small",children:e.jsx(ft,{})})]}),e.jsxs(f,{sx:{display:"flex",flex:1,overflow:"hidden"},children:[e.jsxs(f,{sx:{width:240,borderRight:`1px solid ${r.palette.divider}`,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx(f,{sx:{p:2,borderBottom:`1px solid ${r.palette.divider}`},children:e.jsx(ne,{placeholder:"Search",size:"small",fullWidth:!0,InputProps:{startAdornment:e.jsx(Ae,{position:"start",children:e.jsx(gt,{fontSize:"small"})})},sx:{"& .MuiOutlinedInput-root":{backgroundColor:I(r.palette.action.hover,.3)}}})}),e.jsx(Me,{sx:{flex:1,overflow:"auto",py:1},children:Lt.map(v=>e.jsxs(se,{button:!0,onClick:()=>ce(v.id),selected:m===v.id,sx:{minHeight:48,px:2,"&.Mui-selected":{backgroundColor:I(r.palette.primary.main,.1),color:r.palette.primary.main,"&:hover":{backgroundColor:I(r.palette.primary.main,.15)},"& .MuiListItemIcon-root":{color:r.palette.primary.main}},"&:hover":{backgroundColor:r.palette.action.hover}},children:[e.jsx(q,{sx:{minWidth:40},children:v.icon}),e.jsx(Q,{primary:v.label,primaryTypographyProps:{fontSize:"0.875rem",fontWeight:m===v.id?500:400}})]},v.id))})]}),e.jsxs(f,{sx:{flex:1,overflow:"auto",p:3},children:[m==="account"&&e.jsxs(f,{children:[e.jsx(w,{variant:"h6",fontWeight:"bold",sx:{mb:3},children:"Account"}),e.jsxs(f,{sx:{mb:4},children:[e.jsx(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Plan"})}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(w,{variant:"body1",children:"Beginner"}),e.jsx(N,{variant:"outlined",size:"small",onClick:Dt,sx:{textTransform:"none",borderColor:r.palette.divider,color:r.palette.text.primary,"&:hover":{borderColor:r.palette.text.secondary,backgroundColor:r.palette.action.hover}},children:"Manage plan"})]})]}),e.jsx(K,{sx:{mb:4}}),e.jsxs(f,{sx:{mb:4},children:[e.jsx("input",{ref:B,type:"file",accept:"image/*",onChange:J,style:{display:"none"},"aria-hidden":"true"}),e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1.5},children:"Photo"}),e.jsxs(f,{sx:{display:"flex",alignItems:"center",gap:2,mb:1},children:[e.jsx(mt,{src:(a==null?void 0:a.profilePicture)||void 0,alt:(a==null?void 0:a.name)||"User",sx:{width:64,height:64,fontSize:"1.5rem",bgcolor:r.palette.primary.main},children:((Ue=a==null?void 0:a.name)==null?void 0:Ue.charAt(0).toUpperCase())||"U"}),e.jsxs(f,{sx:{display:"flex",gap:1},children:[e.jsx(N,{variant:"outlined",size:"small",onClick:de,disabled:j,sx:{textTransform:"none",borderColor:r.palette.divider,color:r.palette.text.primary,"&:hover":{borderColor:r.palette.text.secondary,backgroundColor:r.palette.action.hover}},children:j?"Uploading…":"Change photo"}),e.jsx(N,{variant:"outlined",size:"small",onClick:ue,sx:{textTransform:"none",borderColor:r.palette.error.main,color:r.palette.error.main,"&:hover":{borderColor:r.palette.error.dark,backgroundColor:I(r.palette.error.main,.1)}},children:"Remove photo"})]})]}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"Pick a photo up to 4MB."}),F&&e.jsx(w,{variant:"caption",color:"error",display:"block",sx:{mt:.5},children:F}),e.jsx(w,{variant:"caption",color:"text.secondary",display:"block",sx:{mt:.5},children:"Your avatar photo will be public."})]}),e.jsx(K,{sx:{mb:4}}),e.jsxs(f,{sx:{mb:4},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Name"}),e.jsx(ne,{fullWidth:!0,value:g,onChange:Ce,onBlur:O,variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{backgroundColor:r.palette.background.paper}}}),e.jsxs(w,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[g.length,"/255"]})]}),e.jsx(K,{sx:{mb:4}}),e.jsxs(f,{sx:{mb:4},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Email"}),e.jsx(w,{variant:"body1",sx:{mb:1.5},children:(a==null?void 0:a.email)||"No email"}),e.jsx(N,{variant:"outlined",size:"small",onClick:oe,sx:{textTransform:"none",borderColor:r.palette.divider,color:r.palette.text.primary,"&:hover":{borderColor:r.palette.text.secondary,backgroundColor:r.palette.action.hover}},children:"Change email"})]}),e.jsx(K,{sx:{mb:4}}),e.jsxs(f,{sx:{mb:4},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Password"}),e.jsx(w,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:1.25},children:d?"Password is set for your account.":"No password yet. Add one to sign in without Google."}),M&&e.jsx(w,{variant:"caption",color:"success.main",sx:{display:"block",mb:1},children:M}),e.jsx(N,{variant:"outlined",size:"small",onClick:Mt,sx:{textTransform:"none",borderColor:r.palette.divider,color:r.palette.text.primary,"&:hover":{borderColor:r.palette.text.secondary,backgroundColor:r.palette.action.hover}},children:d?"Change password":"Add password"})]}),e.jsx(K,{sx:{mb:4}}),e.jsxs(f,{sx:{mb:4},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(w,{variant:"body2",color:"text.secondary",children:"Two-factor authentication"}),e.jsx(et,{control:e.jsx(tt,{checked:!1,onChange:()=>{},size:"small"}),label:""})]}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"2FA is disabled on your account."})]}),e.jsx(K,{sx:{mb:4}}),e.jsxs(f,{children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Connected accounts"}),l.length===0?e.jsx(w,{variant:"body2",color:"text.secondary",children:"No connected accounts"}):e.jsx(f,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:l.map(v=>e.jsx(f,{sx:{px:1.25,py:.5,borderRadius:999,border:`1px solid ${r.palette.divider}`,fontSize:"0.8125rem",color:"text.secondary"},children:Ft(v)},v))})]})]}),m==="general"&&e.jsxs(f,{children:[e.jsx(w,{variant:"h6",fontWeight:"bold",sx:{mb:3},children:"General"}),e.jsxs(f,{sx:{mb:4},children:[e.jsxs(f,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsxs(f,{children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:"Theme"}),e.jsx(w,{variant:"caption",color:"text.secondary",children:"Choose between light and dark mode"})]}),e.jsx(et,{control:e.jsx(tt,{checked:u==="dark",onChange:h,size:"small"}),label:""})]}),e.jsx(w,{variant:"body2",color:"text.primary",children:u==="dark"?"Dark mode":"Light mode"})]}),e.jsx(K,{sx:{mb:4}}),e.jsxs(f,{sx:{mb:4},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Language"}),e.jsx(w,{variant:"body1",children:"English"}),e.jsx(w,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:"Changes will take effect immediately"})]})]})]})]})]}),e.jsxs(ye,{open:H,onClose:()=>R(!1),"aria-labelledby":"add-password-title",fullWidth:!0,maxWidth:"xs",children:[e.jsx(yt,{id:"add-password-title",children:d?"Change password":"Add password"}),e.jsxs(fe,{sx:{pt:1.25},children:[e.jsx(w,{variant:"body2",color:"text.secondary",sx:{mb:1.5},children:d?"Enter a new password for your account.":"Add a password so you can sign in with email & password next time."}),e.jsx(ne,{fullWidth:!0,label:"New password",type:"password",value:W,onChange:v=>z(v.target.value),disabled:D,autoComplete:"new-password",sx:{mb:1.25}}),e.jsx(ne,{fullWidth:!0,label:"Confirm password",type:"password",value:b,onChange:v=>x(v.target.value),disabled:D,autoComplete:"new-password"}),i&&e.jsx(w,{variant:"caption",color:"error",sx:{display:"block",mt:1},children:i})]}),e.jsxs(Mr,{sx:{px:3,pb:2},children:[e.jsx(N,{onClick:()=>R(!1),disabled:D,children:"Cancel"}),e.jsx(N,{variant:"contained",onClick:At,disabled:D,children:D?"Saving…":d?"Update password":"Add password"})]})]})]})},Oo={inbox:zr,today:Rr,completed:Lr,settings:Dr},Wo=({open:t,onClose:o})=>{const r=le(),a=De(),{recentViews:n,closeModal:c}=He(),{t:l}=_e(),[d,u]=s.useState(""),h=s.useRef(null),[m,p]=s.useState(0),g=s.useMemo(()=>{if(!d.trim())return n;const j=d.toLowerCase().trim();return n.filter(E=>l(E.labelKey).toLowerCase().includes(j))},[n,d,l]);s.useEffect(()=>{t&&(u(""),p(0),setTimeout(()=>{var j;return(j=h.current)==null?void 0:j.focus()},0))},[t]),s.useEffect(()=>{p(0)},[d]);const S=()=>{u(""),o(),c()},F=j=>{a(j),S()},T=j=>{if(j.key==="Escape"){S();return}if(j.key==="ArrowDown"){j.preventDefault(),p(E=>Math.min(E+1,g.length-1));return}if(j.key==="ArrowUp"){j.preventDefault(),p(E=>Math.max(E-1,0));return}j.key==="Enter"&&g.length>0&&(j.preventDefault(),F(g[m].path))};return e.jsx(ye,{open:t,onClose:S,PaperProps:{sx:{width:"560px",maxWidth:"calc(100vw - 32px)",position:"absolute",top:"15%",left:"50%",transform:"translateX(-50%)",m:0,borderRadius:"12px",overflow:"hidden",backgroundColor:r.palette.background.paper,color:r.palette.text.primary,boxShadow:r.palette.mode==="dark"?"0 20px 60px -12px rgba(0, 0, 0, 0.5), 0 8px 24px -4px rgba(0, 0, 0, 0.4)":"0 20px 60px -12px rgba(0, 0, 0, 0.15), 0 8px 24px -4px rgba(0, 0, 0, 0.1)"}},sx:{"& .MuiBackdrop-root":{backgroundColor:r.palette.mode==="dark"?"rgba(0,0,0,0.5)":"rgba(0,0,0,0.25)"}},children:e.jsxs(fe,{sx:{p:0,"&.MuiDialogContent-root":{padding:0}},children:[e.jsx(f,{sx:{px:2,pt:2,pb:1},children:e.jsx(ne,{inputRef:h,fullWidth:!0,size:"small",placeholder:"Search or type a command...",value:d,onChange:j=>u(j.target.value),onKeyDown:T,variant:"outlined",InputProps:{startAdornment:e.jsx(Ae,{position:"start",sx:{mr:1},children:e.jsx(Fr,{sx:{color:r.palette.text.secondary,fontSize:"1.25rem"}})}),endAdornment:e.jsx(Ae,{position:"end",children:e.jsx(w,{component:"span",variant:"caption",sx:{px:1,py:.25,borderRadius:.75,bgcolor:r.palette.mode==="dark"?I(r.palette.common.white,.1):I(r.palette.common.black,.06),color:r.palette.text.secondary,fontFamily:"monospace",fontSize:"0.7rem"},children:"Ctrl K"})}),sx:{backgroundColor:r.palette.mode==="dark"?I(r.palette.common.white,.05):I(r.palette.common.black,.03),borderRadius:"8px","& fieldset":{borderColor:r.palette.mode==="dark"?I(r.palette.common.white,.12):I(r.palette.common.black,.12)},"&:hover fieldset":{borderColor:r.palette.mode==="dark"?I(r.palette.common.white,.2):I(r.palette.common.black,.2)},"&.Mui-focused fieldset":{borderColor:r.palette.primary.main,borderWidth:"1px"},"& .MuiInputBase-input":{color:r.palette.text.primary,py:1.25}}}})}),g.length>0&&e.jsxs(f,{sx:{pb:2},children:[e.jsx(w,{variant:"caption",sx:{display:"block",px:2,py:.75,color:r.palette.text.secondary,fontWeight:600,textTransform:"uppercase",letterSpacing:"0.05em"},children:"Recently viewed"}),e.jsx(f,{component:"ul",sx:{m:0,p:0,listStyle:"none"},children:g.map((j,E)=>e.jsx(_o,{item:j,label:l(j.labelKey),isHighlighted:E===m,theme:r,onSelect:()=>F(j.path),onHover:()=>p(E)},j.path))})]})]})})};function _o({item:t,label:o,isHighlighted:r,theme:a,onSelect:n,onHover:c}){const l=Oo[t.icon];return e.jsxs(f,{component:"li",onMouseEnter:c,onClick:n,sx:{display:"flex",alignItems:"center",gap:1.5,px:2,py:1.25,cursor:"pointer",borderRadius:"8px",mx:1,backgroundColor:r?a.palette.mode==="dark"?I(a.palette.common.white,.08):I(a.palette.common.black,.06):"transparent",color:a.palette.text.primary,"&:hover":{backgroundColor:a.palette.mode==="dark"?I(a.palette.common.white,.08):I(a.palette.common.black,.06)}},children:[e.jsx(f,{sx:{width:36,height:36,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:a.palette.mode==="dark"?I(a.palette.common.white,.1):I(a.palette.common.black,.06),color:a.palette.text.secondary},children:e.jsx(l,{sx:{fontSize:"1.25rem"}})}),e.jsx(w,{variant:"body2",sx:{fontWeight:500,fontSize:"0.875rem"},children:o})]})}const Bo=({children:t})=>{const[o,r]=s.useState(!1),[a,n]=s.useState(!1),[c,l]=s.useState(!1),{mode:d}=we(),u=le(),h=Or(u.breakpoints.down("sm")),{logout:m,user:p}=ze(),g=De(),S=Fe(),{isOpen:F,openModal:T,closeModal:j,recordRecentView:E}=He();s.useEffect(()=>{E(S.pathname)},[S.pathname,E]),s.useEffect(()=>{const A=D=>{(D.ctrlKey||D.metaKey)&&D.key==="k"&&(D.preventDefault(),T())};return window.addEventListener("keydown",A),()=>window.removeEventListener("keydown",A)},[T]);const B=s.useCallback(()=>k(void 0,null,function*(){try{yield m(),g("/login")}catch(A){L.error("Logout failed",{action:"logout"},A)}}),[m,g]),H=s.useCallback(()=>{n(!0)},[]),R=s.useCallback(()=>{n(!1)},[]),W=s.useCallback(()=>{l(!0)},[]),z=s.useCallback(()=>{l(!1)},[]),b=s.useCallback(()=>{r(A=>!A)},[]),x=we().toggleColorMode,i=s.useMemo(()=>o?64:240,[o]),y=s.useMemo(()=>({flexGrow:1,width:{xs:"100%",sm:`calc(100% - ${i}px)`},ml:{xs:0,sm:`${i}px`},transition:u.transitions.create(["margin","width"],{easing:u.transitions.easing.sharp,duration:u.transitions.duration.leavingScreen})}),[i,u]),M=s.useMemo(()=>({width:{xs:"100%",sm:`calc(100% - ${i}px)`},ml:{xs:0,sm:`${i}px`},transition:u.transitions.create(["margin","width"],{easing:u.transitions.easing.sharp,duration:u.transitions.duration.leavingScreen}),backgroundColor:u.palette.background.default}),[i,u]);return e.jsxs(f,{sx:{display:"flex",minHeight:"100vh"},children:[e.jsx(Do,{isCollapsed:o,onToggleCollapse:b,darkMode:d==="dark",toggleDarkMode:x,onLogout:B,user:p,userName:p==null?void 0:p.name,onOpenShortcutsHelp:H,onOpenSettings:W}),e.jsx(Lo,{open:a,onClose:R}),e.jsx(zo,{open:c,onClose:z}),e.jsx(Wo,{open:F,onClose:j}),e.jsxs(f,{component:"main",sx:y,children:[e.jsx(Wr,{position:"fixed",elevation:0,sx:M,children:e.jsx(_r,{children:h&&e.jsx(ie,{edge:"start",color:"inherit","aria-label":"menu",sx:{mr:2},onClick:b,children:e.jsx(Br,{})})})}),e.jsx(f,{sx:{mt:{xs:7,sm:8},pt:0,pb:3,pl:0,pr:{xs:2,sm:3},display:"flex",justifyContent:"flex-start",alignItems:"flex-start",width:"100%",minHeight:"calc(100vh - 64px)"},children:t})]})]})},je="categories";function Ho(){return k(this,null,function*(){const t=ke(_,je),o=or(t,ar("order"));return(yield lt(o)).docs.map(a=>P({id:a.id},a.data()))})}function Vo(t){return k(this,null,function*(){const o=ke(_,je),r=yield ut(o,t);return $(P({},t),{id:r.id})})}function Uo(t,o){return k(this,null,function*(){const r=X(_,je,t);yield dt(r,o)})}function $o(t){return k(this,null,function*(){const o=X(_,je,t);yield ct(o)})}const No=()=>{const[t,o]=s.useState([]),[r,a]=s.useState(!0),[n,c]=s.useState(null);s.useEffect(()=>{l()},[]);const l=()=>k(void 0,null,function*(){try{a(!0),o(yield Ho())}catch(m){c("Failed to load categories"),Y(m instanceof Error?m:new Error("Failed to load categories"),"useCategories","Failed to load categories")}finally{a(!1)}});return{categories:t,loading:r,error:n,addCategory:m=>k(void 0,null,function*(){try{const p=yield Vo($(P({},m),{order:t.length}));return o(g=>[...g,p]),p}catch(p){throw c("Failed to add category"),Y(p instanceof Error?p:new Error("Failed to add category"),"useCategories","Failed to add category"),p}}),updateCategory:(m,p)=>k(void 0,null,function*(){try{yield Uo(m,p),o(g=>g.map(S=>S.id===m?P(P({},S),p):S))}catch(g){throw c("Failed to update category"),Y(g instanceof Error?g:new Error("Failed to update category"),"useCategories","Failed to update category",{categoryId:m,updates:p}),g}}),deleteCategory:m=>k(void 0,null,function*(){try{yield $o(m),o(p=>p.filter(g=>g.id!==m))}catch(p){throw c("Failed to delete category"),Y(p instanceof Error?p:new Error("Failed to delete category"),"useCategories","Failed to delete category",{categoryId:m}),p}}),refreshCategories:l}},ve="tags";function Ko(){return k(this,null,function*(){const t=ke(_,ve);return(yield lt(t)).docs.map(r=>P({id:r.id},r.data()))})}function Go(t){return k(this,null,function*(){const o=ke(_,ve),r=yield ut(o,t);return $(P({},t),{id:r.id})})}function qo(t,o){return k(this,null,function*(){const r=X(_,ve,t);yield dt(r,o)})}function Qo(t){return k(this,null,function*(){const o=X(_,ve,t);yield ct(o)})}const Xo=()=>{const[t,o]=s.useState([]),[r,a]=s.useState(!0),[n,c]=s.useState(null);s.useEffect(()=>{l()},[]);const l=()=>k(void 0,null,function*(){try{a(!0),o(yield Ko())}catch(m){c("Failed to load tags"),Y(m instanceof Error?m:new Error("Failed to load tags"),"useTags","Failed to load tags")}finally{a(!1)}});return{tags:t,loading:r,error:n,addTag:m=>k(void 0,null,function*(){try{const p=yield Go(m);return o(g=>[...g,p]),p}catch(p){throw c("Failed to add tag"),Y(p instanceof Error?p:new Error("Failed to add tag"),"useTags","Failed to add tag"),p}}),updateTag:(m,p)=>k(void 0,null,function*(){try{yield qo(m,p),o(g=>g.map(S=>S.id===m?P(P({},S),p):S))}catch(g){throw c("Failed to update tag"),Y(g instanceof Error?g:new Error("Failed to update tag"),"useTags","Failed to update tag",{tagId:m,updates:p}),g}}),deleteTag:m=>k(void 0,null,function*(){try{yield Qo(m),o(p=>p.filter(g=>g.id!==m))}catch(p){throw c("Failed to delete tag"),Y(p instanceof Error?p:new Error("Failed to delete tag"),"useTags","Failed to delete tag",{tagId:m}),p}}),refreshTags:l}},Tt=s.createContext(void 0),Yo=({children:t})=>{const{categories:o,loading:r,error:a,refreshCategories:n}=No(),{tags:c,loading:l,error:d,refreshTags:u,addTag:h,deleteTag:m}=Xo(),p=s.useMemo(()=>({categories:o,tags:c,loading:r||l,error:a||d,tagsError:d,categoriesError:a,refresh:()=>{n(),u()},addTag:h,deleteTag:m,refreshTags:u}),[o,c,r,l,a,d,n,u,h,m]);return e.jsx(Tt.Provider,{value:p,children:t})},ma=()=>{const t=s.useContext(Tt);if(!t)throw new Error("useTaskMetadata must be used within TaskMetadataProvider");return t},Jo=()=>e.jsx(Mo,{children:e.jsx(Yo,{children:e.jsx(Bo,{children:e.jsx(sr,{})})})}),Zo=s.lazy(()=>ee(()=>import("./Login-jxJfcizA.js"),__vite__mapDeps([0,1,2,3]))),ea=s.lazy(()=>ee(()=>import("./Settings-CO6GB-44.js"),__vite__mapDeps([4,1,2,3]))),ta=s.lazy(()=>ee(()=>import("./Today-CSFUL7X0.js"),__vite__mapDeps([5,1,2,3,6,7,8]))),ra=s.lazy(()=>ee(()=>import("./Completed-B-ZERcmI.js"),__vite__mapDeps([9,1,2,3,6]))),oa=s.lazy(()=>ee(()=>import("./Upcoming-DVzELw1L.js"),__vite__mapDeps([10,1,2,3,7,6,11]))),it=s.lazy(()=>ee(()=>import("./Tags-BX7FFnZL.js"),__vite__mapDeps([12,1,2,3,6,7]))),aa=s.lazy(()=>ee(()=>import("./Inbox-D1vKGsho.js"),__vite__mapDeps([13,1,2,3,6,7,8]))),sa=()=>{const{mode:t}=we(),o=s.useMemo(()=>so(),[t]);return e.jsxs(Ur,{theme:o,children:[e.jsx($r,{}),e.jsx(f,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh",bgcolor:"background.default"},children:e.jsx(s.Suspense,{fallback:e.jsx(Pt,{isLoading:!0,children:null}),children:e.jsxs(nr,{children:[e.jsx(U,{path:"/login",element:e.jsx(Zo,{})}),e.jsxs(U,{element:e.jsx(Jo,{}),children:[e.jsx(U,{index:!0,element:e.jsx(Te,{to:"today",replace:!0})}),e.jsx(U,{path:"inbox",element:e.jsx(aa,{})}),e.jsx(U,{path:"today",element:e.jsx(ta,{})}),e.jsx(U,{path:"upcoming",element:e.jsx(oa,{})}),e.jsx(U,{path:"tags",element:e.jsx(it,{})}),e.jsx(U,{path:"tags/:tagSlug",element:e.jsx(it,{})}),e.jsx(U,{path:"completed",element:e.jsx(ra,{})}),e.jsx(U,{path:"settings",element:e.jsx(ea,{})})]}),e.jsx(U,{path:"*",element:e.jsx(Te,{to:"/today",replace:!0})})]})})})]})},na=()=>e.jsx(To,{children:e.jsx(ko,{children:e.jsx(lo,{children:e.jsx(xo,{children:e.jsx(yo,{children:e.jsx(bo,{children:e.jsx(jo,{children:e.jsx(Eo,{children:e.jsx(Hr,{dateAdapter:Vr,children:e.jsx(sa,{})})})})})})})})})});"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/2DU/sw.js").catch(()=>{})});ir.createRoot(document.getElementById("root")).render(e.jsx(Le.StrictMode,{children:e.jsx(lr,{basename:"/2DU/".replace(/\/$/,""),children:e.jsx(na,{})})}));export{ee as _,_e as a,pa as b,ma as c,vo as d,_ as e,ha as f,L as l,ua as s,ze as u};
